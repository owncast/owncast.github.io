(self.webpackChunkowncast_web=self.webpackChunkowncast_web||[]).push([[3652,8228],{"./stories/config-federation.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>config_federation_stories});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),modal=__webpack_require__("./node_modules/antd/es/modal/index.js"),es_button=__webpack_require__("./node_modules/antd/es/button/index.js"),typography=__webpack_require__("./node_modules/antd/es/typography/index.js"),es_alert=__webpack_require__("./node_modules/antd/es/alert/index.js"),row=__webpack_require__("./node_modules/antd/es/row/index.js"),col=__webpack_require__("./node_modules/antd/es/col/index.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),es_form=__webpack_require__("./node_modules/antd/es/form/index.js"),input=__webpack_require__("./node_modules/antd/es/input/index.js"),input_number=__webpack_require__("./node_modules/antd/es/input-number/index.js"),__jsx=react.createElement,FormStatusIndicator=function FormStatusIndicator(_ref){var _ref2=_ref.status||{},type=_ref2.type,icon=_ref2.icon,message=_ref2.message,classes=classnames_default()((0,defineProperty.c)((0,defineProperty.c)({"status-container":!0},"status-".concat(type),type),"empty",!message));return __jsx("span",{className:classes},icon?__jsx("span",{className:"status-icon"},icon):null,message?__jsx("span",{className:"status-message"},message):null)};FormStatusIndicator.displayName="FormStatusIndicator";try{FormStatusIndicator.displayName="FormStatusIndicator",FormStatusIndicator.__docgenInfo={description:"",displayName:"FormStatusIndicator",props:{status:{defaultValue:null,description:"",name:"status",required:!0,type:{name:"StatusState"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/FormStatusIndicator.tsx#FormStatusIndicator"]={docgenInfo:FormStatusIndicator.__docgenInfo,name:"FormStatusIndicator",path:"components/admin/FormStatusIndicator.tsx#FormStatusIndicator"})}catch(__react_docgen_typescript_loader_error){}var asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),regenerator=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),apis=__webpack_require__("./utils/apis.ts"),validators=__webpack_require__("./utils/validators.ts");function postConfigUpdateToAPI(_x){return _postConfigUpdateToAPI.apply(this,arguments)}function _postConfigUpdateToAPI(){return(_postConfigUpdateToAPI=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(args){var apiPath,data,onSuccess,onError,result;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return apiPath=args.apiPath,data=args.data,onSuccess=args.onSuccess,onError=args.onError,_context.prev=1,_context.next=4,(0,apis.gr)("".concat(apis.aC).concat(apiPath),{data,method:"POST",auth:!0});case 4:(result=_context.sent).success&&onSuccess?onSuccess(result.message):onError&&onError(result.message),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),onError&&onError(_context.t0.message);case 11:case"end":return _context.stop()}}),_callee,null,[[1,8]])})))).apply(this,arguments)}var TEXTFIELD_PROPS_STREAM_TITLE={apiPath:"/streamtitle",configPath:"instanceDetails",maxLength:100,placeholder:"Doing cool things...",label:"Stream Title",tip:"What is your stream about today?"},FIELD_PROPS_ENABLE_FEDERATION=(validators.qC,validators.qC,validators.qC,{apiPath:"/federation/enable",configPath:"federation",label:"Enable Social Features",tip:"Send and receive activities on the Fediverse.",useSubmit:!0}),FIELD_PROPS_FEDERATION_IS_PRIVATE={apiPath:"/federation/private",configPath:"federation",label:"Private",tip:"Follow requests will require approval and only followers will see your activity.",useSubmit:!0},FIELD_PROPS_SHOW_FEDERATION_ENGAGEMENT={apiPath:"/federation/showengagement",configPath:"showEngagement",label:"Show engagement",tip:"Following, liking and sharing will appear in the chat feed.",useSubmit:!0},TEXTFIELD_PROPS_FEDERATION_LIVE_MESSAGE={apiPath:"/federation/livemessage",configPath:"federation",maxLength:500,placeholder:"My stream has started, tune in!",label:"Now Live message",tip:"The message sent announcing that your live stream has begun. Tags will be automatically added. Leave blank to disable."},TEXTFIELD_PROPS_FEDERATION_DEFAULT_USER={apiPath:"/federation/username",configPath:"federation",maxLength:10,placeholder:"owncast",default:"owncast",label:"Username",tip:'The username used for sending and receiving activities from the Fediverse. For example, if you use "bob" as a username you would send messages to the fediverse from @bob@yourserver. Once people start following your instance you should not change this.\nNote: Username cannot have special characters. '},TEXTFIELD_PROPS_FEDERATION_INSTANCE_URL={apiPath:"/serverurl",configPath:"yp",maxLength:255,placeholder:"https://owncast.mysite.com",label:"Server URL",tip:"The full url to your Owncast server is required to enable social features. Must use SSL (https). Once people start following your instance you should not change this.",type:"url",pattern:validators.qC,useTrim:!0},FIELD_PROPS_FEDERATION_NSFW={apiPath:"/nsfw",configPath:"instanceDetails",label:"Potentially NSFW",tip:"Turn this ON if you plan to stream explicit or adult content so previews of your stream can be marked as potentially sensitive."},FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_label="Blocked domains",FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_placeholder="bad.domain.biz",FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_tip="You can block specific domains from interacting with you.",FRAMERATE_DEFAULTS_min=24,FRAMERATE_DEFAULTS_max=120,FRAMERATE_DEFAULTS_unit="fps",VIDEO_BITRATE_DEFAULTS_min=((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)({},FRAMERATE_DEFAULTS_min,"".concat(FRAMERATE_DEFAULTS_min," ").concat(FRAMERATE_DEFAULTS_unit)),25," "),30," "),50," "),60," "),90," "),FRAMERATE_DEFAULTS_max,"".concat(FRAMERATE_DEFAULTS_max," ").concat(FRAMERATE_DEFAULTS_unit)),(0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)({},FRAMERATE_DEFAULTS_min,"".concat(FRAMERATE_DEFAULTS_min,"fps - Good for film, presentations, music, low power/bandwidth servers.")),25,"25fps - Good for film, presentations, music, low power/bandwidth servers."),30,"30fps - Good for slow/casual games, chat, general purpose."),50,"50fps - Good for fast/action games, sports, HD video."),60,"60fps - Good for fast/action games, sports, HD video."),90,"90fps - Good for newer fast games and hardware."),FRAMERATE_DEFAULTS_max,"".concat(FRAMERATE_DEFAULTS_max,"fps - Experimental, use at your own risk!")),400),VIDEO_BITRATE_DEFAULTS_max=6e3,VIDEO_BITRATE_DEFAULTS_unit="kbps",PASSWORD_COMPLEXITY_RULES=((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)({},VIDEO_BITRATE_DEFAULTS_min,{style:{marginLeft:"24px"},label:"".concat(VIDEO_BITRATE_DEFAULTS_min," ").concat(VIDEO_BITRATE_DEFAULTS_unit)}),3e3,3e3),4500,4500),VIDEO_BITRATE_DEFAULTS_max,{style:{marginLeft:"-10px"},label:"".concat(VIDEO_BITRATE_DEFAULTS_max," ").concat(VIDEO_BITRATE_DEFAULTS_unit)}),validators.qC,validators.qC,[{min:8,message:"- minimum 8 characters"},{max:192,message:"- maximum 192 characters"},{pattern:/^(?=.*[a-z])/,message:"- at least one lowercase letter"},{pattern:/^(?=.*[A-Z])/,message:"- at least one uppercase letter"},{pattern:/\d/,message:"- at least one digit"},{pattern:/^(?=.*?[#?!@$%^&*-])/,message:"- at least one special character: !@#$%^&*"}]),REGEX_PASSWORD=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[!@#$%^&*]).{8,192}$/;try{postConfigUpdateToAPI.displayName="postConfigUpdateToAPI",postConfigUpdateToAPI.__docgenInfo={description:"",displayName:"postConfigUpdateToAPI",props:{apiPath:{defaultValue:null,description:"",name:"apiPath",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"object"}},onSuccess:{defaultValue:null,description:"",name:"onSuccess",required:!1,type:{name:"(arg: any) => void"}},onError:{defaultValue:null,description:"",name:"onError",required:!1,type:{name:"(arg: any) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["utils/config-constants.tsx#postConfigUpdateToAPI"]={docgenInfo:postConfigUpdateToAPI.__docgenInfo,name:"postConfigUpdateToAPI",path:"utils/config-constants.tsx#postConfigUpdateToAPI"})}catch(__react_docgen_typescript_loader_error){}var TextField_jsx=react.createElement,TextField=function TextField(_ref){var className=_ref.className,disabled=_ref.disabled,fieldName=_ref.fieldName,label=_ref.label,maxLength=_ref.maxLength,onBlur=_ref.onBlur,onChange=_ref.onChange,onPressEnter=_ref.onPressEnter,onHandleSubmit=_ref.onHandleSubmit,pattern=_ref.pattern,placeholder=_ref.placeholder,required=_ref.required,status=_ref.status,tip=_ref.tip,type=_ref.type,useTrim=_ref.useTrim,value=_ref.value,hasComplexityRequirements=_ref.hasComplexityRequirements,_useState=(0,react.useState)(!1),hasPwdChanged=_useState[0],setHasPwdChanged=_useState[1],_useState2=(0,react.useState)(!1),showPwdButton=_useState2[0],setShowPwdButton=_useState2[1],_Form$useForm=es_form.c.useForm(),form=(0,slicedToArray.c)(_Form$useForm,1)[0],handleChange=function handleChange(e){if(onChange){var val="numeric"===type?e:e.target.value;setShowPwdButton(!0),hasComplexityRequirements&&REGEX_PASSWORD.test(val)?setHasPwdChanged(!0):setHasPwdChanged(!1),onChange({fieldName,value:useTrim?val.trim():val})}};(0,react.useEffect)((function(){form.setFieldsValue({inputFieldPassword:value})}),[value]);var handleBlur=function handleBlur(e){var val=e.target.value;onBlur&&onBlur({value:val})},handlePressEnter=function handlePressEnter(){onPressEnter&&onPressEnter()},passwordComplexityRules=[],Field=input.c,fieldProps={};"textarea"===type?(Field=input.c.TextArea,fieldProps={autoSize:!0}):"password"===type?(PASSWORD_COMPLEXITY_RULES.forEach((function(element){passwordComplexityRules.push(element)})),Field=input.c.Password,fieldProps={visibilityToggle:!0}):"numeric"===type?(Field=input_number.c,fieldProps={type:"number",min:1,max:Math.pow(10,maxLength)-1}):"url"===type&&(fieldProps={type:"url",pattern});var fieldId="field-".concat(fieldName),statusType=(status||{}).type,containerClass=classnames_default()((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)({"formfield-container":!0,"textfield-container":!0},"type-".concat(type),!0),"required",required),"status-".concat(statusType),status));return TextField_jsx("div",{className:containerClass},label?TextField_jsx("div",{className:"label-side"},TextField_jsx("label",{htmlFor:fieldId,className:"formfield-label"},label)):null,hasComplexityRequirements?TextField_jsx("div",{className:"input-side"},TextField_jsx("div",{className:"input-group"},TextField_jsx(es_form.c,{name:"basic",form,initialValues:{inputFieldPassword:value},style:{width:"100%"}},TextField_jsx(es_form.c.Item,{name:"inputFieldPassword",rules:passwordComplexityRules},TextField_jsx(input.c.Password,{id:fieldId,className:"field ".concat(className," ").concat(fieldId),onChange:handleChange,onBlur:handleBlur,placeholder,onPressEnter:handlePressEnter,disabled,value})),showPwdButton&&TextField_jsx("div",{style:{display:"flex",flexDirection:"row-reverse"}},TextField_jsx(es_button.c,{type:"primary",size:"small",className:"submit-button",onClick:onHandleSubmit,disabled:!hasPwdChanged},"Update")),TextField_jsx(FormStatusIndicator,{status}),TextField_jsx("p",{className:"field-tip"},tip)))):TextField_jsx("div",{className:"input-side"},TextField_jsx("div",{className:"input-group"},TextField_jsx(Field,(0,esm_extends.c)({id:fieldId,className:"field ".concat(className," ").concat(fieldId)},fieldProps,"numeric"!==type&&{allowClear:!0},{placeholder,maxLength,onChange:handleChange,onBlur:handleBlur,onPressEnter:handlePressEnter,disabled,value}))),TextField_jsx(FormStatusIndicator,{status}),TextField_jsx("p",{className:"field-tip"},tip)))};TextField.displayName="TextField",TextField.defaultProps={className:"",disabled:!1,label:"",maxLength:255,placeholder:"",required:!1,status:null,tip:"",type:"default",value:"",pattern:"",useTrim:!1,useTrimLead:!1,hasComplexityRequirements:!1,onSubmit:function onSubmit(){},onBlur:function onBlur(){},onChange:function onChange(){},onPressEnter:function onPressEnter(){},onHandleSubmit:function onHandleSubmit(){}};try{TextField.displayName="TextField",TextField.__docgenInfo={description:"",displayName:"TextField",props:{fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},onSubmit:{defaultValue:{value:"() => {}"},description:"",name:"onSubmit",required:!1,type:{name:"() => void"}},onPressEnter:{defaultValue:{value:"() => {}"},description:"",name:"onPressEnter",required:!1,type:{name:"() => void"}},onHandleSubmit:{defaultValue:{value:"() => {}"},description:"",name:"onHandleSubmit",required:!1,type:{name:"() => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:""},description:"",name:"label",required:!1,type:{name:"string"}},maxLength:{defaultValue:{value:"255"},description:"",name:"maxLength",required:!1,type:{name:"number"}},pattern:{defaultValue:{value:""},description:"",name:"pattern",required:!1,type:{name:"string"}},placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},status:{defaultValue:{value:"null"},description:"",name:"status",required:!1,type:{name:"StatusState"}},tip:{defaultValue:{value:""},description:"",name:"tip",required:!1,type:{name:"string"}},type:{defaultValue:{value:"default"},description:"",name:"type",required:!1,type:{name:"string"}},useTrim:{defaultValue:{value:"false"},description:"",name:"useTrim",required:!1,type:{name:"boolean"}},useTrimLead:{defaultValue:{value:"false"},description:"",name:"useTrimLead",required:!1,type:{name:"boolean"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string | number"}},hasComplexityRequirements:{defaultValue:{value:"false"},description:"",name:"hasComplexityRequirements",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:{value:"() => {}"},description:"",name:"onBlur",required:!1,type:{name:"FieldUpdaterFunc"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"FieldUpdaterFunc"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/TextField.tsx#TextField"]={docgenInfo:TextField.__docgenInfo,name:"TextField",path:"components/admin/TextField.tsx#TextField"})}catch(__react_docgen_typescript_loader_error){}var objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),dynamic=__webpack_require__("./node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),input_statuses_jsx=react.createElement,CheckCircleFilled=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(388)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/CheckCircleFilled.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/CheckCircleFilled.js"]}}}),ExclamationCircleFilled=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(2784)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/ExclamationCircleFilled.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/ExclamationCircleFilled.js"]}}}),LoadingOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(7276)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/LoadingOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/LoadingOutlined.js"]}}}),WarningOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(8240)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/WarningOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/WarningOutlined.js"]}}}),INPUT_STATES=(0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)((0,defineProperty.c)({},"success",{type:"success",icon:input_statuses_jsx(CheckCircleFilled,{style:{color:"green"}}),message:"Success!"}),"error",{type:"error",icon:input_statuses_jsx(ExclamationCircleFilled,{style:{color:"red"}}),message:"An error occurred."}),"invalid",{type:"invalid",icon:input_statuses_jsx(ExclamationCircleFilled,{style:{color:"red"}}),message:"An error occurred."}),"proessing",{type:"proessing",icon:input_statuses_jsx(LoadingOutlined,null),message:""}),"warning",{type:"warning",icon:input_statuses_jsx(WarningOutlined,{style:{color:"#fc0"}}),message:""});function createInputStatus(type,message){return type&&INPUT_STATES[type]?message?{type,icon:INPUT_STATES[type].icon,message}:INPUT_STATES[type]:null}var console=__webpack_require__("./node_modules/console-browserify/index.js"),server_status_context_jsx=react.createElement;function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.c)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var initialServerConfigState={streamKeys:[],streamKeyOverridden:!1,adminPassword:"",instanceDetails:{customStyles:"",customJavascript:"",extraPageContent:"",logo:"",name:"",nsfw:!1,socialHandles:[],streamTitle:"",summary:"",tags:[],title:"",welcomeMessage:"",offlineMessage:"",appearanceVariables:{}},ffmpegPath:"",rtmpServerPort:"",webServerPort:"",socketHostOverride:null,videoServingEndpoint:"",s3:{accessKey:"",acl:"",bucket:"",enabled:!1,endpoint:"",region:"",secret:"",pathPrefix:"",forcePathStyle:!1},yp:{enabled:!1,instanceUrl:""},videoSettings:{latencyLevel:4,cpuUsageLevel:3,videoQualityVariants:[{framerate:24,videoPassthrough:!1,videoBitrate:1200,audioPassthrough:!0,audioBitrate:0,cpuUsageLevel:2,scaledHeight:null,scaledWidth:null,name:""}]},federation:{enabled:!1,isPrivate:!1,username:"",goLiveMessage:"",showEngagement:!0,blockedDomains:[]},notifications:{browser:{enabled:!1,goLiveMessage:""},discord:{enabled:!1,webhook:"",goLiveMessage:""}},externalActions:[],supportedCodecs:[],videoCodec:"",forbiddenUsernames:[],suggestedUsernames:[],chatDisabled:!1,chatJoinMessagesEnabled:!0,chatEstablishedUserMode:!1,hideViewerCount:!1,disableSearchIndexing:!1},initialServerStatusState={broadcastActive:!1,broadcaster:null,currentBroadcast:null,online:!1,viewerCount:0,sessionMaxViewerCount:0,sessionPeakViewerCount:0,overallPeakViewerCount:0,versionNumber:"0.0.0",streamTitle:"",chatDisabled:!1,health:{healthy:!0,healthPercentage:100,message:"",representation:0},error:{type:null,msg:null}},ServerStatusContext=react.createContext(_objectSpread(_objectSpread({},initialServerStatusState),{},{serverConfig:initialServerConfigState,setFieldInConfigState:function setFieldInConfigState(_args){return null}})),ServerStatusProvider=function ServerStatusProvider(_ref){var children=_ref.children,_useState=(0,react.useState)(initialServerStatusState),status=_useState[0],setStatus=_useState[1],_useState2=(0,react.useState)(initialServerConfigState),config=_useState2[0],setConfig=_useState2[1],getStatus=function(){var _ref2=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(){var result;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,apis.gr)(apis.bL);case 3:if(!((result=_context.sent)instanceof Error)){_context.next=6;break}throw result;case 6:setStatus(_objectSpread(_objectSpread({},result),{},{error:{type:null,msg:null}})),_context.next=12;break;case 9:_context.prev=9,_context.t0=_context.catch(0),setStatus((function(initialStatus){return _objectSpread(_objectSpread({},initialStatus),{},{error:{type:"OWNCAST_SERVICE_UNREACHABLE",msg:"Cannot connect to the Owncast service. Please check you are connected to the internet and the Owncast server is running."}})}));case 12:case"end":return _context.stop()}}),_callee,null,[[0,9]])})));return function getStatus(){return _ref2.apply(this,arguments)}}(),getConfig=function(){var _ref3=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee2(){var result;return regenerator_default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,(0,apis.gr)(apis.w5);case 3:if(!((result=_context2.sent)instanceof Error)){_context2.next=6;break}throw result;case 6:setConfig(result),_context2.next=12;break;case 9:_context2.prev=9,_context2.t0=_context2.catch(0),console.error(_context2.t0);case 12:case"end":return _context2.stop()}}),_callee2,null,[[0,9]])})));return function getConfig(){return _ref3.apply(this,arguments)}}();(0,react.useEffect)((function(){var getStatusIntervalId;return getStatus(),getStatusIntervalId=setInterval(getStatus,apis.Ex),getConfig(),function(){clearInterval(getStatusIntervalId)}}),[]);var providerValue=_objectSpread(_objectSpread({},status),{},{serverConfig:config,setFieldInConfigState:function setFieldInConfigState(_ref4){var fieldName=_ref4.fieldName,value=_ref4.value,path=_ref4.path,updatedConfig=_objectSpread(_objectSpread({},config),{},path?(0,defineProperty.c)({},path,_objectSpread(_objectSpread({},config[path]),{},(0,defineProperty.c)({},fieldName,value))):(0,defineProperty.c)({},fieldName,value));setConfig(updatedConfig)}});return server_status_context_jsx(ServerStatusContext.Provider,{value:providerValue},children)};ServerStatusProvider.displayName="ServerStatusProvider";const server_status_context=ServerStatusProvider;try{serverstatuscontext.displayName="serverstatuscontext",serverstatuscontext.__docgenInfo={description:"",displayName:"serverstatuscontext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["utils/server-status-context.tsx#serverstatuscontext"]={docgenInfo:serverstatuscontext.__docgenInfo,name:"serverstatuscontext",path:"utils/server-status-context.tsx#serverstatuscontext"})}catch(__react_docgen_typescript_loader_error){}var _excluded=["apiPath","configPath","initialValue","useTrim","useTrimLead"],TextFieldWithSubmit_jsx=react.createElement,TextFieldWithSubmit=function TextFieldWithSubmit(_ref){var apiPath=_ref.apiPath,_ref$configPath=_ref.configPath,configPath=void 0===_ref$configPath?"":_ref$configPath,initialValue=_ref.initialValue,useTrim=_ref.useTrim,useTrimLead=_ref.useTrimLead,textFieldProps=(0,objectWithoutProperties.c)(_ref,_excluded),_useState=(0,react.useState)(null),submitStatus=_useState[0],setSubmitStatus=_useState[1],_useState2=(0,react.useState)(!1),hasChanged=_useState2[0],setHasChanged=_useState2[1],setFieldInConfigState=((0,react.useContext)(ServerStatusContext)||{}).setFieldInConfigState,resetTimer=null,fieldName=textFieldProps.fieldName,required=textFieldProps.required,tip=textFieldProps.tip,status=textFieldProps.status,value=textFieldProps.value,hasComplexityRequirements=textFieldProps.hasComplexityRequirements,onChange=textFieldProps.onChange,onSubmit=textFieldProps.onSubmit,resetStates=function resetStates(){setSubmitStatus(null),setHasChanged(!1),clearTimeout(resetTimer),resetTimer=null};(0,react.useEffect)((function(){required&&(""===value||null===value)||value===initialValue?setHasChanged(!1):(resetStates(),setHasChanged(!0))}),[value]);var handleSubmit=function(){var _ref5=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!(required&&""!==value||value!==initialValue)){_context.next=6;break}return setSubmitStatus(createInputStatus("proessing")),_context.next=4,postConfigUpdateToAPI({apiPath,data:{value},onSuccess:function onSuccess(){setFieldInConfigState({fieldName,value,path:configPath}),setSubmitStatus(createInputStatus("success"))},onError:function onError(message){setSubmitStatus(createInputStatus("error","There was an error: ".concat(message)))}});case 4:resetTimer=setTimeout(resetStates,3e3),onSubmit&&onSubmit();case 6:case"end":return _context.stop()}}),_callee)})));return function handleSubmit(){return _ref5.apply(this,arguments)}}(),textfieldContainerClass=classnames_default()({"textfield-with-submit-container":!0,submittable:hasChanged});return TextFieldWithSubmit_jsx("div",{className:textfieldContainerClass},TextFieldWithSubmit_jsx("div",{className:"textfield-component"},TextFieldWithSubmit_jsx(TextField,(0,esm_extends.c)({},textFieldProps,{onSubmit:null,onBlur:function handleBlur(_ref4){var changedValue=_ref4.value;onChange&&required&&""===changedValue&&onChange({fieldName,value:initialValue})},onChange:function handleChange(_ref3){var changedFieldName=_ref3.fieldName,changedValue=_ref3.value;if(onChange){var newValue=changedValue;useTrim?newValue=changedValue.trim():useTrimLead&&(newValue=changedValue.replace(/^\s+/g,"")),onChange({fieldName:changedFieldName,value:newValue})}},onHandleSubmit:handleSubmit}))),TextFieldWithSubmit_jsx("div",{className:"formfield-container lower-container"},TextFieldWithSubmit_jsx("p",{className:"label-spacer"}),TextFieldWithSubmit_jsx("div",{className:"lower-content"},TextFieldWithSubmit_jsx("div",{className:"field-tip"},tip),TextFieldWithSubmit_jsx(FormStatusIndicator,{status:status||submitStatus}),TextFieldWithSubmit_jsx("div",{className:"update-button-container"},!hasComplexityRequirements&&TextFieldWithSubmit_jsx(es_button.c,{type:"primary",size:"small",className:"submit-button",onClick:handleSubmit,disabled:!hasChanged},"Update")))))};TextFieldWithSubmit.displayName="TextFieldWithSubmit",TextFieldWithSubmit.defaultProps={configPath:"",initialValue:""};try{TextFieldWithSubmit.displayName="TextFieldWithSubmit",TextFieldWithSubmit.__docgenInfo={description:"",displayName:"TextFieldWithSubmit",props:{fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"() => void"}},onPressEnter:{defaultValue:null,description:"",name:"onPressEnter",required:!1,type:{name:"() => void"}},onHandleSubmit:{defaultValue:null,description:"",name:"onHandleSubmit",required:!1,type:{name:"() => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},pattern:{defaultValue:null,description:"",name:"pattern",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},status:{defaultValue:null,description:"",name:"status",required:!1,type:{name:"StatusState"}},tip:{defaultValue:null,description:"",name:"tip",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},useTrim:{defaultValue:null,description:"",name:"useTrim",required:!1,type:{name:"boolean"}},useTrimLead:{defaultValue:null,description:"",name:"useTrimLead",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},hasComplexityRequirements:{defaultValue:null,description:"",name:"hasComplexityRequirements",required:!1,type:{name:"boolean"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"FieldUpdaterFunc"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"FieldUpdaterFunc"}},apiPath:{defaultValue:null,description:"",name:"apiPath",required:!0,type:{name:"string"}},configPath:{defaultValue:{value:""},description:"",name:"configPath",required:!1,type:{name:"string"}},initialValue:{defaultValue:{value:""},description:"",name:"initialValue",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/TextFieldWithSubmit.tsx#TextFieldWithSubmit"]={docgenInfo:TextFieldWithSubmit.__docgenInfo,name:"TextFieldWithSubmit",path:"components/admin/TextFieldWithSubmit.tsx#TextFieldWithSubmit"})}catch(__react_docgen_typescript_loader_error){}var es_switch=__webpack_require__("./node_modules/antd/es/switch/index.js"),ToggleSwitch_jsx=react.createElement,ToggleSwitch=function ToggleSwitch(_ref){var apiPath=_ref.apiPath,checked=_ref.checked,_ref$reversed=_ref.reversed,reversed=void 0!==_ref$reversed&&_ref$reversed,_ref$configPath=_ref.configPath,configPath=void 0===_ref$configPath?"":_ref$configPath,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,fieldName=_ref.fieldName,label=_ref.label,tip=_ref.tip,useSubmit=_ref.useSubmit,onChange=_ref.onChange,_useState=(0,react.useState)(null),submitStatus=_useState[0],setSubmitStatus=_useState[1],resetTimer=null,setFieldInConfigState=((0,react.useContext)(ServerStatusContext)||{}).setFieldInConfigState,resetStates=function resetStates(){setSubmitStatus(null),clearTimeout(resetTimer),resetTimer=null},handleChange=function(){var _ref3=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(isChecked){var isCheckedSend;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!useSubmit){_context.next=6;break}return setSubmitStatus(createInputStatus("proessing")),isCheckedSend=reversed?!isChecked:isChecked,_context.next=5,postConfigUpdateToAPI({apiPath,data:{value:isCheckedSend},onSuccess:function onSuccess(){setFieldInConfigState({fieldName,value:isCheckedSend,path:configPath}),setSubmitStatus(createInputStatus("success"))},onError:function onError(message){setSubmitStatus(createInputStatus("error","There was an error: ".concat(message)))}});case 5:resetTimer=setTimeout(resetStates,3e3);case 6:onChange&&onChange(isChecked);case 7:case"end":return _context.stop()}}),_callee)})));return function handleChange(_x){return _ref3.apply(this,arguments)}}(),loading=null!==submitStatus&&"proessing"===submitStatus.type;return ToggleSwitch_jsx("div",{className:"formfield-container toggleswitch-container"},label&&ToggleSwitch_jsx("div",{className:"label-side"},ToggleSwitch_jsx("span",{className:"formfield-label"},label)),ToggleSwitch_jsx("div",{className:"input-side"},ToggleSwitch_jsx("div",{className:"input-group"},ToggleSwitch_jsx(es_switch.c,{className:"switch field-".concat(fieldName),loading,onChange:handleChange,defaultChecked:checked,checked,checkedChildren:"ON",unCheckedChildren:"OFF",disabled}),ToggleSwitch_jsx(FormStatusIndicator,{status:submitStatus})),ToggleSwitch_jsx("p",{className:"field-tip"},tip)))};ToggleSwitch.displayName="ToggleSwitch",ToggleSwitch.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null};try{ToggleSwitch.displayName="ToggleSwitch",ToggleSwitch.__docgenInfo={description:"",displayName:"ToggleSwitch",props:{fieldName:{defaultValue:null,description:"",name:"fieldName",required:!0,type:{name:"string"}},apiPath:{defaultValue:{value:""},description:"",name:"apiPath",required:!1,type:{name:"string"}},checked:{defaultValue:{value:"false"},description:"",name:"checked",required:!1,type:{name:"boolean"}},reversed:{defaultValue:{value:"false"},description:"",name:"reversed",required:!1,type:{name:"boolean"}},configPath:{defaultValue:{value:""},description:"",name:"configPath",required:!1,type:{name:"string"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:{value:""},description:"",name:"label",required:!1,type:{name:"string"}},tip:{defaultValue:{value:""},description:"",name:"tip",required:!1,type:{name:"string"}},useSubmit:{defaultValue:{value:"false"},description:"",name:"useSubmit",required:!1,type:{name:"boolean"}},onChange:{defaultValue:{value:"null"},description:"",name:"onChange",required:!1,type:{name:"(arg: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/ToggleSwitch.tsx#ToggleSwitch"]={docgenInfo:ToggleSwitch.__docgenInfo,name:"ToggleSwitch",path:"components/admin/ToggleSwitch.tsx#ToggleSwitch"})}catch(__react_docgen_typescript_loader_error){}var es_tag=__webpack_require__("./node_modules/antd/es/tag/index.js"),EditValueArray_jsx=react.createElement,Title=typography.c.Title,EditValueArray=function EditValueArray(_ref){var title=_ref.title,description=_ref.description,placeholder=_ref.placeholder,maxLength=_ref.maxLength,values=_ref.values,handleDeleteIndex=_ref.handleDeleteIndex,handleCreateString=_ref.handleCreateString,submitStatus=_ref.submitStatus,continuousStatusMessage=_ref.continuousStatusMessage,_useState=(0,react.useState)(""),newStringInput=_useState[0],setNewStringInput=_useState[1];return EditValueArray_jsx("div",{className:"edit-string-array-container"},EditValueArray_jsx(Title,{level:3,className:"section-title"},title),EditValueArray_jsx("p",{className:"description"},description),EditValueArray_jsx("div",{className:"edit-current-strings"},null==values?void 0:values.map((function(tag,index){return EditValueArray_jsx(es_tag.c,{closable:!0,onClose:function handleClose(){handleDeleteIndex(index)},color:"#5a67d8",key:"tag-".concat(tag,"-").concat(index)},tag)}))),continuousStatusMessage&&EditValueArray_jsx("div",{className:"continuous-status-section"},EditValueArray_jsx(FormStatusIndicator,{status:continuousStatusMessage})),EditValueArray_jsx("div",{className:"add-new-string-section"},EditValueArray_jsx(TextField,{fieldName:"string-input",value:newStringInput,onChange:function handleInputChange(_ref2){var value=_ref2.value;setNewStringInput(value)},onPressEnter:function handleSubmitNewString(){var newString=newStringInput.trim();handleCreateString(newString),setNewStringInput("")},maxLength,placeholder,status:submitStatus})))};EditValueArray.displayName="EditValueArray",EditValueArray.defaultProps={maxLength:50,description:null,submitStatus:null,continuousStatusMessage:null};try{EditValueArray.displayName="EditValueArray",EditValueArray.__docgenInfo={description:"",displayName:"EditValueArray",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},description:{defaultValue:{value:"null"},description:"",name:"description",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!0,type:{name:"string"}},maxLength:{defaultValue:{value:"50"},description:"",name:"maxLength",required:!1,type:{name:"number"}},values:{defaultValue:null,description:"",name:"values",required:!0,type:{name:"string[]"}},submitStatus:{defaultValue:{value:"null"},description:"",name:"submitStatus",required:!1,type:{name:"StatusState"}},continuousStatusMessage:{defaultValue:{value:"null"},description:"",name:"continuousStatusMessage",required:!1,type:{name:"StatusState"}},handleDeleteIndex:{defaultValue:null,description:"",name:"handleDeleteIndex",required:!0,type:{name:"(index: number) => void"}},handleCreateString:{defaultValue:null,description:"",name:"handleCreateString",required:!0,type:{name:"(arg: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/EditValueArray.tsx#EditValueArray"]={docgenInfo:EditValueArray.__docgenInfo,name:"EditValueArray",path:"components/admin/EditValueArray.tsx#EditValueArray"})}catch(__react_docgen_typescript_loader_error){}var alert_message_context_jsx=react.createElement,AlertMessageContext=react.createContext({message:null,setMessage:function setMessage(_text){return null}}),AlertMessageProvider=function AlertMessageProvider(_ref){var children=_ref.children,_useState=(0,react.useState)(""),providerValue={message:_useState[0],setMessage:_useState[1]};return alert_message_context_jsx(AlertMessageContext.Provider,{value:providerValue},children)};AlertMessageProvider.displayName="AlertMessageProvider";const alert_message_context=AlertMessageProvider;try{alertmessagecontext.displayName="alertmessagecontext",alertmessagecontext.__docgenInfo={description:"",displayName:"alertmessagecontext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["utils/alert-message-context.tsx#alertmessagecontext"]={docgenInfo:alertmessagecontext.__docgenInfo,name:"alertmessagecontext",path:"utils/alert-message-context.tsx#alertmessagecontext"})}catch(__react_docgen_typescript_loader_error){}var next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),head=__webpack_require__("./node_modules/next/head.js"),head_default=__webpack_require__.n(head),differenceInSeconds=__webpack_require__("./node_modules/date-fns/esm/differenceInSeconds/index.js"),next_router=__webpack_require__("./node_modules/next/router.js"),layout=__webpack_require__("./node_modules/antd/es/layout/index.js"),menu=__webpack_require__("./node_modules/antd/es/menu/index.js"),space=__webpack_require__("./node_modules/antd/es/space/index.js"),tooltip=__webpack_require__("./node_modules/antd/es/tooltip/index.js"),format=__webpack_require__("./utils/format.ts"),OwncastLogo=__webpack_require__("./components/common/OwncastLogo/OwncastLogo.tsx"),ComposeFederatedPost_console=__webpack_require__("./node_modules/console-browserify/index.js"),ComposeFederatedPost_jsx=react.createElement,TextArea=input.c.TextArea,ComposeFederatedPost=function ComposeFederatedPost(_ref){var open=_ref.open,handleClose=_ref.handleClose,_useState=(0,react.useState)(""),content=_useState[0],setContent=_useState[1],_useState2=(0,react.useState)(!1),postPending=_useState2[0],setPostPending=_useState2[1],_useState3=(0,react.useState)(null),postSuccessState=_useState3[0],setPostSuccessState=_useState3[1];function close(){setPostPending(!1),setPostSuccessState(null),handleClose()}function _sendButtonClicked(){return(_sendButtonClicked=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(){var data;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return setPostPending(!0),data={value:content},_context.prev=2,_context.next=5,(0,apis.gr)(apis.EH,{data,method:"POST",auth:!0});case 5:setPostSuccessState("success"),setTimeout(close,1e3),_context.next=13;break;case 9:_context.prev=9,_context.t0=_context.catch(2),ComposeFederatedPost_console.error(_context.t0),setPostSuccessState("error");case 13:setPostPending(!1);case 14:case"end":return _context.stop()}}),_callee,null,[[2,9]])})))).apply(this,arguments)}return ComposeFederatedPost_jsx(modal.c,{destroyOnClose:!0,width:600,title:"Post to Followers",open,onCancel:handleClose,footer:[ComposeFederatedPost_jsx(es_button.c,{onClick:function onClick(){return handleClose()}},"Cancel"),ComposeFederatedPost_jsx(es_button.c,{type:"primary",onClick:function sendButtonClicked(){return _sendButtonClicked.apply(this,arguments)},disabled:postPending||postSuccessState,loading:postPending},(null==postSuccessState?void 0:postSuccessState.toUpperCase())||"Post")]},ComposeFederatedPost_jsx("h3",null,"Tell the world about your future streaming plans or let your followers know to tune in."),ComposeFederatedPost_jsx(TextArea,{placeholder:"I'm still live, come join me!",size:"large",showCount:!0,maxLength:500,style:{height:"150px",width:"100%"},onChange:function handleEditorChange(e){setContent(e.target.value)}}))};ComposeFederatedPost.displayName="ComposeFederatedPost";try{ComposeFederatedPost.displayName="ComposeFederatedPost",ComposeFederatedPost.__docgenInfo={description:"",displayName:"ComposeFederatedPost",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/ComposeFederatedPost.tsx#ComposeFederatedPost"]={docgenInfo:ComposeFederatedPost.__docgenInfo,name:"ComposeFederatedPost",path:"components/admin/ComposeFederatedPost.tsx#ComposeFederatedPost"})}catch(__react_docgen_typescript_loader_error){}var FatalErrorStateModal=__webpack_require__("./components/modals/FatalErrorStateModal/FatalErrorStateModal.tsx"),MainLayout_console=__webpack_require__("./node_modules/console-browserify/index.js"),MainLayout_jsx=react.createElement,SettingOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(292)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/SettingOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/SettingOutlined.js"]}}}),HomeOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(8804)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/HomeOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/HomeOutlined.js"]}}}),LineChartOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(2863)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/LineChartOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/LineChartOutlined.js"]}}}),ToolOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(4664)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/ToolOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/ToolOutlined.js"]}}}),PlayCircleFilled=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(3900)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/PlayCircleFilled.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/PlayCircleFilled.js"]}}}),MinusSquareFilled=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(9456)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/MinusSquareFilled.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/MinusSquareFilled.js"]}}}),QuestionCircleOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(4807)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/QuestionCircleOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/QuestionCircleOutlined.js"]}}}),MessageOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(3100)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/MessageOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/MessageOutlined.js"]}}}),ExperimentOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(2416)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/ExperimentOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/ExperimentOutlined.js"]}}}),EditOutlined=dynamic_default()((function(){return Promise.all([__webpack_require__.e(8704),__webpack_require__.e(660)]).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@ant-design/icons/EditOutlined.js",23))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./node_modules/@ant-design/icons/EditOutlined.js"]}}}),FediverseOutlined=dynamic_default()((function(){return __webpack_require__.e(6444).then(__webpack_require__.bind(__webpack_require__,"./assets/images/icons/fediverse.svg"))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["./assets/images/icons/fediverse.svg"]}}}),MainLayout=function MainLayout(_ref){var children=_ref.children,_ref2=(0,react.useContext)(ServerStatusContext)||{},serverConfig=_ref2.serverConfig,online=_ref2.online,broadcaster=_ref2.broadcaster,versionNumber=_ref2.versionNumber,serverError=_ref2.error,instanceDetails=serverConfig.instanceDetails,chatDisabled=serverConfig.chatDisabled,federationEnabled=serverConfig.federation.enabled,_useState=(0,react.useState)(""),currentStreamTitle=_useState[0],setCurrentStreamTitle=_useState[1],_useState2=(0,react.useState)(!1),postModalDisplayed=_useState2[0],setPostModalDisplayed=_useState2[1],alertMessage=(0,react.useContext)(AlertMessageContext),route=((0,next_router.useRouter)()||{}).route,Header=layout.c.Header,Footer=layout.c.Footer,Content=layout.c.Content,Sider=layout.c.Sider,_useState3=(0,react.useState)(""),upgradeVersion=_useState3[0],setUpgradeVersion=_useState3[1],checkForUpgrade=function(){var _ref4=(0,asyncToGenerator.c)(regenerator_default().mark((function _callee(){var result;return regenerator_default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,(0,apis._m)(versionNumber);case 3:result=_context.sent,setUpgradeVersion(result),_context.next=10;break;case 7:_context.prev=7,_context.t0=_context.catch(0),MainLayout_console.log("==== error",_context.t0);case 10:case"end":return _context.stop()}}),_callee,null,[[0,7]])})));return function checkForUpgrade(){return _ref4.apply(this,arguments)}}();(0,react.useEffect)((function(){checkForUpgrade()}),[versionNumber]),(0,react.useEffect)((function(){setCurrentStreamTitle(instanceDetails.streamTitle)}),[instanceDetails]);var appClass=classnames_default()({"app-container":!0,online}),upgradeVersionString="".concat(upgradeVersion)||"",upgradeMessage="Upgrade to v".concat(upgradeVersionString),openMenuItems=upgradeVersion?["utilities-menu"]:[],headerAlertMessage=alertMessage.message?MainLayout_jsx(es_alert.c,{message:alertMessage.message,afterClose:function clearAlertMessage(){alertMessage.setMessage(null)},banner:!0,closable:!0}):null,streamDurationString=broadcaster?(0,format.yS)((0,differenceInSeconds.c)(new Date,new Date(broadcaster.time))):"",statusIcon=MainLayout_jsx(online?PlayCircleFilled:MinusSquareFilled,null),statusMessage=online?"Online ".concat(streamDurationString):"Offline",statusIndicator=MainLayout_jsx("div",{className:"online-status-indicator"},MainLayout_jsx("span",{className:"status-label"},statusMessage),MainLayout_jsx("span",{className:"status-icon"},statusIcon)),integrationsMenu=[{label:MainLayout_jsx(link_default(),{href:"/admin/webhooks"},"Webhooks"),key:"/admin/webhooks"},{label:MainLayout_jsx(link_default(),{href:"/admin/access-tokens"},"Access Tokens"),key:"/admin/access-tokens"},{label:MainLayout_jsx(link_default(),{href:"/admin/actions"},"External Actions"),key:"/admin/actions"}],chatMenu=[{label:MainLayout_jsx(link_default(),{href:"/admin/chat/messages"},"Messages"),key:"/admin/chat/messages"},{label:MainLayout_jsx(link_default(),{href:"/admin/chat/users"},"Users"),key:"/admin/chat/users"},{label:MainLayout_jsx(link_default(),{href:"/admin/chat/emojis"},"Emojis"),key:"/admin/chat/emojis"}],utilitiesMenu=[{label:MainLayout_jsx(link_default(),{href:"/admin/hardware-info"},"Hardware"),key:"/admin/hardware-info"},{label:MainLayout_jsx(link_default(),{href:"/admin/stream-health"},"Stream Health"),key:"/admin/stream-health"},{label:MainLayout_jsx(link_default(),{href:"/admin/logs"},"Logs"),key:"/admin/logs"},federationEnabled&&{label:MainLayout_jsx(link_default(),{href:"/admin/federation/actions"},"Social Actions"),key:"/admin/federation/actions"}],configurationMenu=[{label:MainLayout_jsx(link_default(),{href:"/admin/config/general"},"General"),key:"/admin/config/general"},{label:MainLayout_jsx(link_default(),{href:"/admin/config/server"},"Server Setup"),key:"/admin/config/server"},{label:MainLayout_jsx(link_default(),{href:"/admin/config-video"},"Video"),key:"/admin/config-video"},{label:MainLayout_jsx(link_default(),{href:"/admin/config-chat"},"Chat"),key:"/admin/config-chat"},{label:MainLayout_jsx(link_default(),{href:"/admin/config-federation"},"Social"),key:"/admin/config-federation"},{label:MainLayout_jsx(link_default(),{href:"/admin/config-notify"},"Notifications"),key:"/admin/config-notify"}],menuItems=[{label:MainLayout_jsx(link_default(),{href:"/admin"},"Home"),icon:MainLayout_jsx(HomeOutlined,null),key:"/admin"},{label:MainLayout_jsx(link_default(),{href:"/admin/viewer-info"},"Viewers"),icon:MainLayout_jsx(LineChartOutlined,null),key:"/admin/viewer-info"},!chatDisabled&&{label:MainLayout_jsx("span",null,"Chat & Users"),icon:MainLayout_jsx(MessageOutlined,null),children:chatMenu,key:"chat-and-users"},federationEnabled&&{key:"/admin/federation/followers",label:MainLayout_jsx(link_default(),{href:"/admin/federation/followers"},"Followers"),icon:MainLayout_jsx("span",{role:"img","aria-label":"message",className:"anticon anticon-message ant-menu-item-icon"},MainLayout_jsx(FediverseOutlined,null))},{key:"configuration",label:"Configuration",icon:MainLayout_jsx(SettingOutlined,null),children:configurationMenu},{key:"utilities",label:"Utilities",icon:MainLayout_jsx(ToolOutlined,null),children:utilitiesMenu},{key:"integrations",label:"Integrations",icon:MainLayout_jsx(ExperimentOutlined,null),children:integrationsMenu},upgradeVersion&&{key:"/admin/upgrade",label:MainLayout_jsx(link_default(),{href:"/admin/upgrade"},upgradeMessage)},{key:"/admin/help",label:MainLayout_jsx(link_default(),{href:"/admin/help"},"Help"),icon:MainLayout_jsx(QuestionCircleOutlined,null)}],_useState4=(0,react.useState)(openMenuItems),openKeys=_useState4[0],setOpenKeys=_useState4[1];return(0,react.useEffect)((function(){menuItems.forEach((function(item){var _item$children;return null==item||null===(_item$children=item.children)||void 0===_item$children?void 0:_item$children.forEach((function(child){(null==child?void 0:child.key)===route&&setOpenKeys([].concat(openMenuItems,[item.key]))}))}))}),[]),MainLayout_jsx(layout.c,{id:"admin-page",className:appClass},MainLayout_jsx(head_default(),null,MainLayout_jsx("title",null,"Owncast Admin"),MainLayout_jsx("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/img/favicon/favicon-32x32.png"})),"OWNCAST_SERVICE_UNREACHABLE"===(null==serverError?void 0:serverError.type)&&MainLayout_jsx(FatalErrorStateModal.FatalErrorStateModal,{title:"Server Unreachable",message:serverError.msg}),MainLayout_jsx(Sider,{width:240,className:"side-nav"},MainLayout_jsx("h1",{className:"owncast-title"},MainLayout_jsx("span",{className:"logo-container"},MainLayout_jsx(OwncastLogo.M,{variant:"simple"})),MainLayout_jsx("span",{className:"title-label"},"Owncast Admin")),MainLayout_jsx(menu.c,{mode:"inline",className:"menu-container",items:menuItems,selectedKeys:[route||"/admin"],openKeys,onOpenChange:function onOpenChange(keys){setOpenKeys(keys)}})),MainLayout_jsx(layout.c,{className:"layout-main"},MainLayout_jsx(Header,{className:"layout-header"},MainLayout_jsx(space.c,{direction:"horizontal"},MainLayout_jsx(tooltip.c,{title:"Compose post to your social followers"},MainLayout_jsx(es_button.c,{type:"link",icon:MainLayout_jsx(EditOutlined,null),size:"small",onClick:function handleCreatePostButtonPressed(){setPostModalDisplayed(!0)},style:{display:federationEnabled?"block":"none",margin:"10px"}},"Compose Post"))),MainLayout_jsx("div",{className:"global-stream-title-container"},MainLayout_jsx(TextFieldWithSubmit,(0,esm_extends.c)({fieldName:"streamTitle"},TEXTFIELD_PROPS_STREAM_TITLE,{placeholder:"What are you streaming now? (Stream title)",value:currentStreamTitle,initialValue:instanceDetails.streamTitle,onChange:function handleStreamTitleChanged(_ref5){var value=_ref5.value;setCurrentStreamTitle(value)}}))),MainLayout_jsx(space.c,{direction:"horizontal"},statusIndicator)),headerAlertMessage,MainLayout_jsx(Content,{className:"main-content-container"},children),MainLayout_jsx(Footer,{className:"footer-container"},MainLayout_jsx("a",{href:"https://owncast.online/?source=admin",target:"_blank",rel:"noopener noreferrer"},"About Owncast v",versionNumber))),MainLayout_jsx(ComposeFederatedPost,{open:postModalDisplayed,handleClose:function handleClose(){return setPostModalDisplayed(!1)}}))};MainLayout.displayName="MainLayout";try{MainLayout.displayName="MainLayout",MainLayout.__docgenInfo={description:"",displayName:"MainLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/admin/MainLayout.tsx#MainLayout"]={docgenInfo:MainLayout.__docgenInfo,name:"MainLayout",path:"components/admin/MainLayout.tsx#MainLayout"})}catch(__react_docgen_typescript_loader_error){}var AdminLayout_jsx=react.createElement,AdminLayout=function AdminLayout(_ref){var page=_ref.page;return AdminLayout_jsx(react.Fragment,null,AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/main-layout.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/form-textfields.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/config-socialhandles.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/config-storage.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/config-edit-string-tags.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/config-video-variants.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/config-public-details.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/home.css"}),AdminLayout_jsx("link",{rel:"stylesheet",href:"/styles/admin/chat.css"}),AdminLayout_jsx(server_status_context,null,AdminLayout_jsx(alert_message_context,null,AdminLayout_jsx(MainLayout,null,page))))};try{AdminLayout.displayName="AdminLayout",AdminLayout.__docgenInfo={description:"",displayName:"AdminLayout",props:{page:{defaultValue:null,description:"",name:"page",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/layouts/AdminLayout.tsx#AdminLayout"]={docgenInfo:AdminLayout.__docgenInfo,name:"AdminLayout",path:"components/layouts/AdminLayout.tsx#AdminLayout"})}catch(__react_docgen_typescript_loader_error){}var config_federation_console=__webpack_require__("./node_modules/console-browserify/index.js"),config_federation_jsx=react.createElement;function config_federation_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function config_federation_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?config_federation_ownKeys(Object(t),!0).forEach((function(r){(0,defineProperty.c)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):config_federation_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var FederationInfoModal=function FederationInfoModal(_ref){var cancelPressed=_ref.cancelPressed,okPressed=_ref.okPressed;return config_federation_jsx(modal.c,{width:"70%",title:"Enable Social Features",visible:!0,onCancel:cancelPressed,footer:config_federation_jsx("div",null,config_federation_jsx(es_button.c,{onClick:cancelPressed},"Do not enable"),config_federation_jsx(es_button.c,{type:"primary",onClick:okPressed},"Enable Social Features"))},config_federation_jsx(typography.c.Title,{level:3},"How do Owncast's social features work?"),config_federation_jsx(typography.c.Paragraph,null,"Owncast's social features are accomplished by having your server join The"," ",config_federation_jsx("a",{href:"https://en.wikipedia.org/wiki/Fediverse",rel:"noopener noreferrer",target:"_blank"},"Fediverse"),", a decentralized, open, collection of independent servers, like yours."),"Please"," ",config_federation_jsx("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank"},"read more")," ","about these features, the details behind them, and how they work.",config_federation_jsx(typography.c.Paragraph,null),config_federation_jsx(typography.c.Title,{level:3},"What do you need to know?"),config_federation_jsx("ul",null,config_federation_jsx("li",null,"These features are brand new. Given the variability of interfacing with the rest of the world, bugs are possible. Please report anything that you think isn't working quite right."),config_federation_jsx("li",null,"You must always host your Owncast server with SSL using a https url."),config_federation_jsx("li",null,"You should not change your server name URL or social username once people begin following you, as your server will be seen as a completely different user on the Fediverse, and the old user will disappear."),config_federation_jsx("li",null,"Turning on ",config_federation_jsx("i",null,"Private mode")," will allow you to manually approve each follower and limit the visibility of your posts to followers only.")),config_federation_jsx(typography.c.Title,{level:3},"Learn more about The Fediverse"),config_federation_jsx(typography.c.Paragraph,null,"If these concepts are new you should discover more about what this functionality has to offer. Visit"," ",config_federation_jsx("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank"},"our documentation")," ","to be pointed at some resources that will help get you started on The Fediverse."))};FederationInfoModal.displayName="FederationInfoModal";var ConfigFederation=function ConfigFederation(){var Title=typography.c.Title,_useState=(0,react.useState)(null),formDataValues=_useState[0],setFormDataValues=_useState[1],_useState2=(0,react.useState)(!1),isInfoModalOpen=_useState2[0],setIsInfoModalOpen=_useState2[1],_ref2=(0,react.useContext)(ServerStatusContext)||{},serverConfig=_ref2.serverConfig,setFieldInConfigState=_ref2.setFieldInConfigState,_useState3=(0,react.useState)(null),blockedDomainSaveState=_useState3[0],setBlockedDomainSaveState=_useState3[1],federation=serverConfig.federation,yp=serverConfig.yp,instanceDetails=serverConfig.instanceDetails,enabled=federation.enabled,isPrivate=federation.isPrivate,username=federation.username,goLiveMessage=federation.goLiveMessage,showEngagement=federation.showEngagement,blockedDomains=federation.blockedDomains,instanceUrl=yp.instanceUrl,nsfw=instanceDetails.nsfw,handleFieldChange=function handleFieldChange(_ref3){var fieldName=_ref3.fieldName,value=_ref3.value;setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},(0,defineProperty.c)({},fieldName,value)))};function resetBlockedDomainsSaveState(){setBlockedDomainSaveState(null)}function saveBlockedDomains(){try{postConfigUpdateToAPI({apiPath:"/federation/blockdomains",data:{value:formDataValues.blockedDomains},onSuccess:function onSuccess(){setFieldInConfigState({fieldName:"forbiddenUsernames",value:formDataValues.forbiddenUsernames}),setBlockedDomainSaveState("success"),setTimeout(resetBlockedDomainsSaveState,3e3)},onError:function onError(message){setBlockedDomainSaveState(createInputStatus("error",message)),setTimeout(resetBlockedDomainsSaveState,3e3)}})}catch(e){config_federation_console.error(e),setBlockedDomainSaveState("error")}}if((0,react.useEffect)((function(){setFormDataValues({enabled,isPrivate,username,goLiveMessage,showEngagement,blockedDomains,nsfw,instanceUrl:yp.instanceUrl})}),[serverConfig,yp]),!formDataValues)return null;var hasInstanceUrl=""!==instanceUrl,isInstanceUrlSecure=instanceUrl.startsWith("https://"),configurationWarning=!isInstanceUrlSecure&&config_federation_jsx(react.Fragment,null,config_federation_jsx(es_alert.c,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),config_federation_jsx("br",null),config_federation_jsx(TextFieldWithSubmit,(0,esm_extends.c)({fieldName:"instanceUrl"},TEXTFIELD_PROPS_FEDERATION_INSTANCE_URL,{value:formDataValues.instanceUrl,initialValue:yp.instanceUrl,type:"url",onChange:handleFieldChange,onSubmit:function handleSubmitInstanceUrl(){var hasInstanceUrl=""!==formDataValues.instanceUrl,isInstanceUrlSecure=formDataValues.instanceUrl.startsWith("https://");hasInstanceUrl&&isInstanceUrlSecure||(postConfigUpdateToAPI({apiPath:FIELD_PROPS_ENABLE_FEDERATION.apiPath,data:{value:!1}}),setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},{enabled:!1})))},required:!0}))),invalidPortWarning=config_federation_jsx(es_alert.c,{message:"Only Owncast instances available on the default SSL port 443 support this feature.",type:"warning",showIcon:!0}),hasInvalidPort=instanceUrl&&""!==new URL(instanceUrl).port&&"443"!==new URL(instanceUrl).port;return config_federation_jsx("div",null,config_federation_jsx(Title,null,"Configure Social Features"),config_federation_jsx("p",null,"Owncast provides the ability for people to follow and engage with your instance. It's a great way to promote alerting, sharing and engagement of your stream."),config_federation_jsx("p",null,"Once enabled you'll alert your followers when you go live as well as gain the ability to compose custom posts to share any information you like."),config_federation_jsx("p",null,config_federation_jsx("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank"},"Read more about the specifics of these social features.")),config_federation_jsx(row.c,null,config_federation_jsx(col.c,{span:15,className:"form-module",style:{marginRight:"15px"}},configurationWarning,hasInvalidPort&&invalidPortWarning,config_federation_jsx(ToggleSwitch,(0,esm_extends.c)({fieldName:"enabled",onChange:function handleEnabledSwitchChange(value){value?setIsInfoModalOpen(!0):setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},{enabled:!1}))}},FIELD_PROPS_ENABLE_FEDERATION,{checked:formDataValues.enabled,disabled:hasInvalidPort||!hasInstanceUrl||!isInstanceUrlSecure})),config_federation_jsx(ToggleSwitch,(0,esm_extends.c)({fieldName:"isPrivate"},FIELD_PROPS_FEDERATION_IS_PRIVATE,{checked:formDataValues.isPrivate,disabled:!enabled})),config_federation_jsx(ToggleSwitch,(0,esm_extends.c)({fieldName:"nsfw",useSubmit:!0},FIELD_PROPS_FEDERATION_NSFW,{checked:formDataValues.nsfw,disabled:hasInvalidPort||!hasInstanceUrl})),config_federation_jsx(TextFieldWithSubmit,(0,esm_extends.c)({required:!0,fieldName:"username",type:"default"},TEXTFIELD_PROPS_FEDERATION_DEFAULT_USER,{value:formDataValues.username,initialValue:username,onChange:function handleUsernameChange(_ref4){var fieldName=_ref4.fieldName,value=_ref4.value;handleFieldChange({fieldName,value}),setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},{username:value.replace(/\W/g,"")}))},disabled:!enabled})),config_federation_jsx(TextFieldWithSubmit,(0,esm_extends.c)({fieldName:"goLiveMessage"},TEXTFIELD_PROPS_FEDERATION_LIVE_MESSAGE,{type:"textarea",value:formDataValues.goLiveMessage,initialValue:goLiveMessage,onChange:handleFieldChange,disabled:!enabled})),config_federation_jsx(ToggleSwitch,(0,esm_extends.c)({fieldName:"showEngagement"},FIELD_PROPS_SHOW_FEDERATION_ENGAGEMENT,{checked:formDataValues.showEngagement,disabled:!enabled}))),config_federation_jsx(col.c,{span:8,className:"form-module"},config_federation_jsx(EditValueArray,{title:FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_label,placeholder:FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_placeholder,description:FIELD_PROPS_FEDERATION_BLOCKED_DOMAINS_tip,values:formDataValues.blockedDomains,handleDeleteIndex:function handleDeleteBlockedDomain(index){formDataValues.blockedDomains.splice(index,1),saveBlockedDomains()},handleCreateString:function handleCreateBlockedDomain(domain){var newDomain;try{newDomain=new URL(domain).host}catch(_){newDomain=domain}formDataValues.blockedDomains.push(newDomain),handleFieldChange({fieldName:"blockedDomains",value:formDataValues.blockedDomains}),saveBlockedDomains()},submitStatus:createInputStatus(blockedDomainSaveState)}))),isInfoModalOpen&&config_federation_jsx(FederationInfoModal,{cancelPressed:function federationInfoModalCancelPressed(){setIsInfoModalOpen(!1),setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},{enabled:!1}))},okPressed:function federationInfoModalOkPressed(){setIsInfoModalOpen(!1),setFormDataValues(config_federation_objectSpread(config_federation_objectSpread({},formDataValues),{},{enabled:!0}))}}))};ConfigFederation.displayName="ConfigFederation",ConfigFederation.getLayout=function getLayout(page){return config_federation_jsx(AdminLayout,{page})};const config_federation=ConfigFederation;var config_federation_stories_jsx=react.createElement;const config_federation_stories={title:"owncast/Admin/Config/Federation",component:config_federation,parameters:{}};var Template=function Template(arguments_){return config_federation_stories_jsx(config_federation,arguments_)};Template.displayName="Template";var Default=Template.bind({});Default.args={},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"arguments_ => <ConfigFederation {...arguments_} />",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]},"./components/common/OwncastLogo/OwncastLogo.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>OwncastLogo});var defineProperty=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),injectStylesIntoStyleTag=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),OwncastLogo_module=__webpack_require__("./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[17].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[17].use[3]!./components/common/OwncastLogo/OwncastLogo.module.scss"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(OwncastLogo_module.c,options);const OwncastLogo_OwncastLogo_module=OwncastLogo_module.c&&OwncastLogo_module.c.locals?OwncastLogo_module.c.locals:void 0;var __jsx=react.createElement,OwncastLogo=function OwncastLogo(_ref){var _ref$variant=_ref.variant,variant=void 0===_ref$variant?"simple":_ref$variant,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,rootClassName=classnames_default()(OwncastLogo_OwncastLogo_module.root,(0,defineProperty.c)((0,defineProperty.c)({},OwncastLogo_OwncastLogo_module.simple,"simple"===variant),OwncastLogo_OwncastLogo_module.contrast,"contrast"===variant));return __jsx("div",{className:"".concat(rootClassName," ").concat(className)},__jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 95.68623352050781 104.46271514892578",className:"logo-svg"},__jsx("g",{transform:"matrix(1 0 0 1 -37.08803939819336 -18.940391540527344)"},__jsx("g",null,__jsx("g",null,__jsx("g",null,__jsx("g",{transform:"matrix(1.0445680396949917 0 0 1.0445679172996596 36.34559138380523 18.877718021903796)"},__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient120",gradientTransform:"rotate(-90 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#1f2022",stopOpacity:"1"}),__jsx("stop",{offset:"1",stopColor:"#635e69",stopOpacity:"1"}))),__jsx("path",{fill:"url(#gradient120)",d:"M91.5 75.35Q93.05 71.15 91.65 67.7 90.35 64.5 86.65 62.3 83.2 60.3 78.3 59.4 73.85 58.6 68.6 58.7 63.55 58.85 58.8 59.8 54.25 60.75 50.8 62.2 47.4 63.65 45.5 65.35 43.6 67.15 43.5 69.05 43.35 71.3 45.8 73.9 48.05 76.3 52.1 78.6 56.15 80.9 61.05 82.55 66.3 84.3 71.4 84.8 74.7 85.1 77.55 84.9 80.65 84.6 83.3 83.6 86.15 82.5 88.15 80.55 90.4 78.4 91.5 75.35M70.6 67.5Q72.3 68.4 73.1 69.7 73.9 71.15 73.45 73 73.1 74.3 72.3 75.25 71.55 76.1 70.3 76.6 69.25 77.05 67.75 77.25 66.3 77.4 64.85 77.3 62.3 77.15 59.25 76.3 56.6 75.5 54.15 74.3 51.9 73.2 50.45 72 49.05 70.75 49.1 69.8 49.2 69 50.25 68.25 51.3 67.55 53.15 67 55 66.4 57.25 66.1 59.8 65.8 62.1 65.8 64.65 65.85 66.7 66.2 68.9 66.65 70.6 67.5Z"})),__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient121",gradientTransform:"rotate(-180 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#2087e2",stopOpacity:"1"}),__jsx("stop",{offset:"1",stopColor:"#b63fff",stopOpacity:"1"}))),__jsx("path",{fill:"url(#gradient121)",d:"M66.6 15.05Q66.4 9.65 63.9 6.05 61.25 2.1 56.1 0.65 54.95 0.3 53.65 0.15 52.5 0 51.3 0.1 50.2 0.1 49.1 0.35 48.15 0.55 47 1 43.3 2.45 40.3 6.1 37.5 9.4 35.5 14.3 33.75 18.45 32.7 23.4 31.7 28.05 31.35 32.85 31.05 37.2 31.3 41.2 31.6 45.15 32.4 48.35 34 54.9 37.3 56.4 37.6 56.55 37.9 56.65L39.2 56.85Q39.45 56.85 39.95 56.8 42.05 56.6 44.7 55.05 47.25 53.5 50.05 50.8 53.05 47.9 55.85 44.05 58.8 40.05 61.1 35.6 63.8 30.35 65.25 25.3 66.75 19.75 66.6 15.05M47.55 23.15Q48.05 23.25 48.4 23.4 52.45 24.8 52.55 29.85 52.6 34 50 39.4 47.85 43.9 44.85 47.3 42.05 50.5 40.15 50.7L39.9 50.75 39.45 50.7 39.2 50.6Q37.8 49.95 37.25 46.35 36.7 42.7 37.3 38 37.95 32.75 39.75 28.8 41.9 24.1 45.05 23.25 45.6 23.1 45.85 23.1 46.25 23.05 46.65 23.05 47.05 23.05 47.55 23.15Z"})),__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient122",gradientTransform:"rotate(-90 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#100f0f",stopOpacity:"1"}),__jsx("stop",{offset:"1",stopColor:"#49261F",stopOpacity:"1"}))),__jsx("path",{fill:"url(#gradient122)",d:"M2.7 33.6Q2.1 34.4 1.7 35.35 1.25 36.5 1.05 37.7 0 42.6 2.2 47.2 4 51 8 54.35 11.55 57.3 16 59.15 20.5 61 23.85 60.85 24.5 60.85 25.25 60.7 26 60.55 26.5 60.3 27 60.05 27.45 59.65 27.9 59.25 28.15 58.75 29.35 56.45 27.5 51.65 25.6 47 21.75 42.1 17.75 37 13.4 34.05 8.7 30.9 5.45 31.7 4.65 31.9 3.95 32.4 3.25 32.85 2.7 33.6M10.1 43.55Q10.35 43.1 10.6 42.85 10.85 42.6 11.2 42.4 11.6 42.25 11.9 42.2 13.5 41.9 15.95 43.6 18.15 45.05 20.35 47.7 22.35 50.1 23.55 52.4 24.7 54.75 24.25 55.7 24.15 55.9 24 56 23.85 56.2 23.65 56.25 23.55 56.35 23.25 56.4L22.7 56.5Q21.1 56.6 18.55 55.6 16.05 54.6 13.85 52.95 11.5 51.2 10.35 49.15 9.05 46.8 9.75 44.45 9.9 43.95 10.1 43.55Z"})),__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient123",gradientTransform:"rotate(-180 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#222020",stopOpacity:"1"}),__jsx("stop",{offset:"1",stopColor:"#49261F",stopOpacity:"1"}))),__jsx("path",{fill:"url(#gradient123)",d:"M34.95 74.2L34.75 74.2Q33.2 74.15 31.9 75.25 30.7 76.3 29.85 78.25 29.1 80 28.8 82.2 28.5 84.4 28.7 86.65 29.1 91.4 31.5 94.7 34.3 98.5 39.3 99.7L39.4 99.7 39.7 99.8 39.85 99.8Q45.3 100.85 47.15 97.75 48 96.3 48 94.05 47.95 91.9 47.2 89.35 46.45 86.75 45.1 84.15 43.75 81.5 42.05 79.35 40.25 77.1 38.45 75.75 36.55 74.35 34.95 74.2M33.55 80.4Q34.35 78.2 35.6 78.3L35.65 78.3Q36.9 78.45 38.6 80.9 40.3 83.35 41.15 86.05 42.1 89 41.55 90.75 40.9 92.6 38.35 92.25L38.3 92.25 38.25 92.2 38.1 92.2Q35.6 91.7 34.25 89.6 33.1 87.7 32.95 85 32.8 82.35 33.55 80.4Z"})),__jsx("g",{transform:"matrix(0.9999999999999999 0 0 1 0 5.684341886080802e-14)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient124",gradientTransform:"rotate(-180 .5 .5)"}," ",__jsx("stop",{offset:"0",stopColor:"#1e1c1c",stopOpacity:"1"}),__jsx("stop",{offset:"1",stopColor:"#49261F",stopOpacity:"1"}))),__jsx("path",{fill:"url(#gradient124)",d:"M22.7 69.65Q22.25 69.3 21.6 69.05 20.95 68.8 20.25 68.7 19.6 68.55 18.85 68.5 16.7 68.45 14.65 69.15 12.65 69.8 11.4 71.1 10.15 72.5 10.2 74.2 10.25 76.05 11.95 78.2 12.4 78.75 13.05 79.4 13.55 79.9 14.2 80.3 14.7 80.6 15.3 80.85 16 81.1 16.4 81.1 18.2 81.35 19.9 80.35 21.55 79.4 22.75 77.65 24 75.85 24.3 73.95 24.6 71.85 23.55 70.5 23.15 70 22.7 69.65M21.7 71.7Q22.15 72.3 21.9 73.3 21.7 74.25 21 75.25 20.3 76.2 19.4 76.75 18.45 77.35 17.55 77.25L17 77.15Q16.7 77.05 16.45 76.85 16.25 76.75 15.9 76.45 15.7 76.25 15.4 75.9 14.5 74.75 14.7 73.8 14.8 72.95 15.75 72.3 16.6 71.7 17.8 71.4 19 71.1 20.1 71.15L20.65 71.2 21.1 71.3Q21.3 71.4 21.45 71.5L21.7 71.7Z"})),__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient125",gradientTransform:"rotate(-360 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#FFFFFF",stopOpacity:"0.5"}),__jsx("stop",{offset:"1",stopColor:"#FFFFFF",stopOpacity:"0.2"}))),__jsx("path",{fill:"url(#gradient125)",d:"M52.6 19.25Q59.6 19.25 66.2 20.95 66.7 17.8 66.6 15.05 66.4 9.65 63.9 6.05 61.25 2.1 56.1 0.65 54.95 0.3 53.65 0.15 52.5 0 51.3 0.1 50.2 0.1 49.1 0.35 48.15 0.55 47 1 43.3 2.45 40.3 6.1 37.5 9.4 35.5 14.3 33.85 18.3 32.8 22.85 42.25 19.25 52.6 19.25Z"})),__jsx("g",{transform:"matrix(1 0 0 1 0 0)"},__jsx("defs",null,__jsx("linearGradient",{x1:"0",y1:"0",x2:"0",y2:"1",id:"gradient126",gradientTransform:"rotate(-360 .5 .5)"},__jsx("stop",{offset:"0",stopColor:"#FFFFFF",stopOpacity:"0.5"}),__jsx("stop",{offset:"1",stopColor:"#FFFFFF",stopOpacity:"0.2"}))),__jsx("path",{fill:"url(#gradient126)",d:"M1.05 37.7Q0 42.6 2.2 47.2 2.95 48.8 4.05 50.25 7.55 41.65 14.4 34.75 14 34.45 13.4 34.05 8.7 30.9 5.45 31.7 4.65 31.9 3.95 32.4 3.25 32.85 2.7 33.6 2.1 34.4 1.7 35.35 1.25 36.5 1.05 37.7Z"})))),__jsx("g",{transform:"matrix(1.219512230276127 0 0 1.2195122143630526 32.82519274395008 88.56945194723018)"},__jsx("path",{fill:"#000000",fillOpacity:"1",d:""})))))))};OwncastLogo.displayName="OwncastLogo";try{OwncastLogo.displayName="OwncastLogo",OwncastLogo.__docgenInfo={description:"",displayName:"OwncastLogo",props:{variant:{defaultValue:{value:"simple"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"simple"'},{value:'"contrast"'}]}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/common/OwncastLogo/OwncastLogo.tsx#OwncastLogo"]={docgenInfo:OwncastLogo.__docgenInfo,name:"OwncastLogo",path:"components/common/OwncastLogo/OwncastLogo.tsx#OwncastLogo"})}catch(__react_docgen_typescript_loader_error){}},"./components/modals/FatalErrorStateModal/FatalErrorStateModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FatalErrorStateModal:()=>FatalErrorStateModal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),antd__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/antd/es/modal/index.js"),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement,FatalErrorStateModal=function FatalErrorStateModal(_ref){var title=_ref.title,message=_ref.message;return __jsx(antd__WEBPACK_IMPORTED_MODULE_1__.c,{title,visible:!0,footer:null,closable:!1,keyboard:!1,width:900,centered:!0,className:"modal"},__jsx("p",{style:{fontSize:"1.3rem"}},message))};FatalErrorStateModal.displayName="FatalErrorStateModal";try{FatalErrorStateModal.displayName="FatalErrorStateModal",FatalErrorStateModal.__docgenInfo={description:"",displayName:"FatalErrorStateModal",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["components/modals/FatalErrorStateModal/FatalErrorStateModal.tsx#FatalErrorStateModal"]={docgenInfo:FatalErrorStateModal.__docgenInfo,name:"FatalErrorStateModal",path:"components/modals/FatalErrorStateModal/FatalErrorStateModal.tsx#FatalErrorStateModal"})}catch(__react_docgen_typescript_loader_error){}},"./utils/apis.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{EH:()=>FEDERATION_MESSAGE_SEND,Ex:()=>FETCH_INTERVAL,SM:()=>getUnauthedData,_m:()=>upgradeVersionAvailable,aC:()=>SERVER_CONFIG_UPDATE_URL,bL:()=>STATUS,gr:()=>fetchData,w5:()=>SERVER_CONFIG});var _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/regenerator/index.js"),_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1__),process=__webpack_require__("./node_modules/process/browser.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.c)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ADMIN_USERNAME=process.env.NEXT_PUBLIC_ADMIN_USERNAME,ADMIN_STREAMKEY=process.env.NEXT_PUBLIC_ADMIN_STREAMKEY,API_LOCATION="".concat("/","api/admin/"),FETCH_INTERVAL=15e3,STATUS="".concat(API_LOCATION,"status"),SERVER_CONFIG="".concat(API_LOCATION,"serverconfig"),SERVER_CONFIG_UPDATE_URL="".concat(API_LOCATION,"config"),FEDERATION_MESSAGE_SEND=("".concat(API_LOCATION,"viewersOverTime"),"".concat(API_LOCATION,"viewers"),"".concat(API_LOCATION,"chat/clients"),"".concat(API_LOCATION,"chat/users/disabled"),"".concat(API_LOCATION,"chat/users/setenabled"),"".concat(API_LOCATION,"chat/users/ipbans"),"".concat(API_LOCATION,"chat/users/ipbans/remove"),"".concat(API_LOCATION,"chat/users/setmoderator"),"".concat(API_LOCATION,"chat/users/moderators"),"".concat(API_LOCATION,"hardwarestats"),"".concat(API_LOCATION,"logs"),"".concat(API_LOCATION,"logs/warnings"),"".concat(API_LOCATION,"chat/messages"),"".concat(API_LOCATION,"emoji/upload"),"".concat(API_LOCATION,"emoji/delete"),"".concat(API_LOCATION,"accesstokens"),"".concat(API_LOCATION,"accesstokens/delete"),"".concat(API_LOCATION,"accesstokens/create"),"".concat(API_LOCATION,"webhooks"),"".concat(API_LOCATION,"webhooks/delete"),"".concat(API_LOCATION,"webhooks/create"),"".concat("/","api/socialplatforms"),"".concat(API_LOCATION,"federation/send")),GITHUB_RELEASE_URL=("".concat(API_LOCATION,"followers"),"".concat(API_LOCATION,"followers/pending"),"".concat(API_LOCATION,"followers/blocked"),"".concat(API_LOCATION,"followers/approve"),"".concat(API_LOCATION,"federation/actions"),"".concat(API_LOCATION,"metrics/video"),"".concat(API_LOCATION,"config/streamkeys"),"".concat(API_LOCATION,"yp/reset"),"https://api.github.com/repos/owncast/owncast/releases/latest");function fetchData(_x,_x2){return _fetchData.apply(this,arguments)}function _fetchData(){return(_fetchData=(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee(url,options){var _ref,data,_ref$method,method,_ref$auth,auth,requestOptions,encoded,response,json,message;return _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return data=(_ref=options||{}).data,_ref$method=_ref.method,method=void 0===_ref$method?"GET":_ref$method,_ref$auth=_ref.auth,auth=void 0===_ref$auth||_ref$auth,requestOptions={method},data&&(requestOptions.body=JSON.stringify(data)),auth&&ADMIN_USERNAME&&ADMIN_STREAMKEY&&(encoded=btoa("".concat(ADMIN_USERNAME,":").concat(ADMIN_STREAMKEY)),requestOptions.headers={Authorization:"Basic ".concat(encoded)},requestOptions.mode="cors",requestOptions.credentials="include"),_context.next=6,fetch(url,requestOptions);case 6:return response=_context.sent,_context.next=9,response.json();case 9:if(json=_context.sent,response.ok){_context.next=13;break}throw message=json.message||"An error has occurred: ".concat(response.status),new Error(message);case 13:return _context.abrupt("return",json);case 14:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function getUnauthedData(_x3,_x4){return _getUnauthedData.apply(this,arguments)}function _getUnauthedData(){return(_getUnauthedData=(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee2(url,options){var opts;return _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return opts=_objectSpread({method:"GET",auth:!1},options),_context2.abrupt("return",fetchData(url,opts));case 2:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}function fetchExternalData(_x5){return _fetchExternalData.apply(this,arguments)}function _fetchExternalData(){return(_fetchExternalData=(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee3(url){var response,message,json;return _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.prev=0,_context3.next=3,fetch(url,{referrerPolicy:"no-referrer",referrer:""});case 3:if((response=_context3.sent).ok){_context3.next=7;break}throw message="An error has occured: ".concat(response.status),new Error(message);case 7:return _context3.next=9,response.json();case 9:return json=_context3.sent,_context3.abrupt("return",json);case 13:_context3.prev=13,_context3.t0=_context3.catch(0),console.log(_context3.t0);case 16:return _context3.abrupt("return",{});case 17:case"end":return _context3.stop()}}),_callee3,null,[[0,13]])})))).apply(this,arguments)}function getGithubRelease(){return _getGithubRelease.apply(this,arguments)}function _getGithubRelease(){return(_getGithubRelease=(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee4(){return _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",fetchExternalData(GITHUB_RELEASE_URL));case 1:case"end":return _context4.stop()}}),_callee4)})))).apply(this,arguments)}var VPAT=/^\d+(\.\d+){0,2}$/;function upToDate(local,remote){if(!local||!remote||0===local.length||0===remote.length)return!1;if(local===remote)return!0;if(VPAT.test(local)&&VPAT.test(remote)){for(var lparts=local.split(".");lparts.length<3;)lparts.push("0");for(var rparts=remote.split(".");rparts.length<3;)rparts.push("0");for(var i=0;i<3;i++){var l=parseInt(lparts[i],10),r=parseInt(rparts[i],10);if(l!==r)return l>r}return!0}return local>=remote}function upgradeVersionAvailable(_x6){return _upgradeVersionAvailable.apply(this,arguments)}function _upgradeVersionAvailable(){return(_upgradeVersionAvailable=(0,_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.c)(_tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().mark((function _callee5(currentVersion){var recentRelease,recentReleaseVersion;return _tmp_tmp_rGYnov0vwr_owncast_web_node_modules_babel_runtime_regenerator_index_js__WEBPACK_IMPORTED_MODULE_1___default().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,getGithubRelease();case 2:if(recentRelease=_context5.sent,"v"===(recentReleaseVersion=recentRelease.tag_name).substr(0,1)&&(recentReleaseVersion=recentReleaseVersion.substr(1)),upToDate(currentVersion,recentReleaseVersion)){_context5.next=7;break}return _context5.abrupt("return",recentReleaseVersion);case 7:return _context5.abrupt("return",null);case 8:case"end":return _context5.stop()}}),_callee5)})))).apply(this,arguments)}},"./utils/format.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{rA:()=>formatUAstring,yS:()=>parseSecondsToDurationString});var ua_parser_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ua-parser-js/src/ua-parser.js"),ua_parser_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_0__);function padLeft(text,pad,size){return String(pad.repeat(size)+text).slice(-size)}function parseSecondsToDurationString(){var seconds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,finiteSeconds=Number.isFinite(+seconds)?Math.abs(seconds):0,days=Math.floor(finiteSeconds/86400),daysString=days>0?"".concat(days," day").concat(days>1?"s":""," "):"",hours=Math.floor(finiteSeconds/3600%24),hoursString=hours||days?padLeft("".concat(hours,":"),"0",3):"",mins=Math.floor(finiteSeconds/60%60),minString=padLeft("".concat(mins,":"),"0",3),secs=Math.floor(finiteSeconds%60);return daysString+hoursString+minString+padLeft("".concat(secs),"0",2)}function formatUAstring(uaString){var parser=ua_parser_js__WEBPACK_IMPORTED_MODULE_0___default()(uaString),device=parser.device,os=parser.os,browser=parser.browser,browserVersion=browser.major,name=browser.name,osVersion=os.version,osName=os.name,model=device.model,type=device.type;if("libmpv"===uaString)return"mpv media player";if(!name||!browserVersion||!osName)return uaString;var deviceString=model||type?" (".concat(model||type,")"):"";return"".concat(name," ").concat(browserVersion," on ").concat(osName," ").concat(osVersion,"\n  ").concat(deviceString)}},"./utils/validators.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{cY:()=>isValidFediverseAccount,i0:()=>isValidUrl,qC:()=>DEFAULT_TEXTFIELD_URL_PATTERN});var DEFAULT_TEXTFIELD_URL_PATTERN="https?://.*";function isValidUrl(url){var validProtocols=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["http:","https:"];try{var validationObject=new URL(url);if(""===validationObject.protocol||""===validationObject.hostname||!validProtocols.includes(validationObject.protocol))return!1}catch(e){return!1}return!0}function isValidFediverseAccount(account){var sanitized=account.replace(/^@+/,"");return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(sanitized).toLowerCase())}},"./node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[17].use[1]!./node_modules/resolve-url-loader/index.js!./node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[17].use[3]!./components/common/OwncastLogo/OwncastLogo.module.scss":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,".Mh5aZ2hlVAefs37ErsR8{display:flex;align-items:center;justify-content:center;width:max-content}.Mh5aZ2hlVAefs37ErsR8 svg{width:clamp(2.5rem,8vw,50px);height:clamp(2.5rem,8vw,50px)}.n7u4st83MroOERjeckaf{padding:5px;border-radius:50%}.n7u4st83MroOERjeckaf svg{width:clamp(2rem,7vw,40px);height:clamp(2rem,7vw,40px)}.EPyJp30PzqQBnQwBTIfr{background-color:rgba(0,0,0,0)}.EPyJp30PzqQBnQwBTIfr svg{width:clamp(2.5rem,8vw,50px);height:clamp(2.5rem,8vw,50px)}","",{version:3,sources:["webpack://./components/common/OwncastLogo/OwncastLogo.module.scss"],names:[],mappings:"AAAA,sBACE,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,iBAAA,CAEA,0BACE,4BAAA,CACA,6BAAA,CAIJ,sBACE,WAAA,CACA,iBAAA,CAEA,0BACE,0BAAA,CACA,2BAAA,CAIJ,sBACE,8BAAA,CAEA,0BACE,4BAAA,CACA,6BAAA",sourcesContent:[".root {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: max-content;\n\n  svg {\n    width: clamp(2.5rem, 8vw, 50px);\n    height: clamp(2.5rem, 8vw, 50px);\n  }\n}\n\n.contrast {\n  padding: 5px;\n  border-radius: 50%;\n\n  svg {\n    width: clamp(2rem, 7vw, 40px);\n    height: clamp(2rem, 7vw, 40px);\n  }\n}\n\n.simple {\n  background-color: transparent;\n\n  svg {\n    width: clamp(2.5rem, 8vw, 50px);\n    height: clamp(2.5rem, 8vw, 50px);\n  }\n}\n"],sourceRoot:""}]),___CSS_LOADER_EXPORT___.locals={root:"Mh5aZ2hlVAefs37ErsR8",contrast:"n7u4st83MroOERjeckaf",simple:"EPyJp30PzqQBnQwBTIfr"};const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"?c969":()=>{},"?ed1b":()=>{},"?d17e":()=>{}}]);