/*! For license information please see 7590.ca27fe37.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkowncast_web=self.webpackChunkowncast_web||[]).push([[7590],{"./node_modules/@xstate/react/es/useMachine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{z:()=>useMachine});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),with_selector=__webpack_require__("./node_modules/use-sync-external-store/shim/with-selector.js"),_tslib=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),types=__webpack_require__("./node_modules/xstate/es/types.js"),es_State=__webpack_require__("./node_modules/xstate/es/State.js"),actionTypes=__webpack_require__("./node_modules/xstate/es/actionTypes.js"),actions=__webpack_require__("./node_modules/xstate/es/actions.js"),environment=__webpack_require__("./node_modules/xstate/es/environment.js"),utils=__webpack_require__("./node_modules/xstate/es/utils.js"),defaultOptions={deferEvents:!1},Scheduler=function(){function Scheduler(options){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=(0,_tslib.Cl)((0,_tslib.Cl)({},defaultOptions),options)}return Scheduler.prototype.initialize=function(callback){if(this.initialized=!0,callback){if(!this.options.deferEvents)return void this.schedule(callback);this.process(callback)}this.flushEvents()},Scheduler.prototype.schedule=function(task){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(task),this.flushEvents()}else this.queue.push(task)},Scheduler.prototype.clear=function(){this.queue=[]},Scheduler.prototype.flushEvents=function(){for(var nextCallback=this.queue.shift();nextCallback;)this.process(nextCallback),nextCallback=this.queue.shift()},Scheduler.prototype.process=function(callback){this.processingEvent=!0;try{callback()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},Scheduler}(),Actor=__webpack_require__("./node_modules/xstate/es/Actor.js"),children=new Map,sessionIdIndex=0,registry_bookId=function(){return"x:".concat(sessionIdIndex++)},registry_register=function(id,actor){return children.set(id,actor),id},registry_get=function(id){return children.get(id)},registry_free=function(id){children.delete(id)},console=__webpack_require__("./node_modules/console-browserify/index.js");function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:void(environment.p||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}function registerService(service){if(getGlobal()){var devTools=function getDevTools(){var global=getGlobal();if(global&&"__xstate__"in global)return global.__xstate__}();devTools&&devTools.register(service)}}var serviceScope=__webpack_require__("./node_modules/xstate/es/serviceScope.js");function spawnBehavior(behavior,options){void 0===options&&(options={});var state=behavior.initialState,observers=new Set,mailbox=[],flushing=!1,actor=(0,Actor.sk)({id:options.id,send:function(event){mailbox.push(event),function(){if(!flushing){for(flushing=!0;mailbox.length>0;){var event_1=mailbox.shift();state=behavior.transition(state,event_1,actorCtx),observers.forEach((function(observer){return observer.next(state)}))}flushing=!1}}()},getSnapshot:function(){return state},subscribe:function(next,handleError,complete){var observer=(0,utils.WV)(next,handleError,complete);return observers.add(observer),observer.next(state),{unsubscribe:function(){observers.delete(observer)}}}}),actorCtx={parent:options.parent,self:actor,id:options.id||"anonymous",observers};return state=behavior.start?behavior.start(actorCtx):state,actor}var interpreter_InterpreterStatus,interpreter_console=__webpack_require__("./node_modules/console-browserify/index.js"),DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1};!function(InterpreterStatus){InterpreterStatus[InterpreterStatus.NotStarted=0]="NotStarted",InterpreterStatus[InterpreterStatus.Running=1]="Running",InterpreterStatus[InterpreterStatus.Stopped=2]="Stopped"}(interpreter_InterpreterStatus||(interpreter_InterpreterStatus={}));var Interpreter=function(){function Interpreter(machine,options){void 0===options&&(options=Interpreter.defaultOptions);var _this=this;this.machine=machine,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=interpreter_InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(event,payload){if((0,utils.cy)(event))return _this.batch(event),_this.state;var _event=(0,utils.ft)((0,utils.jK)(event,payload));if(_this.status===interpreter_InterpreterStatus.Stopped)return environment.p||(0,utils.R8)(!1,'Event "'.concat(_event.name,'" was sent to stopped service "').concat(_this.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(_event.data))),_this.state;if(_this.status!==interpreter_InterpreterStatus.Running&&!_this.options.deferEvents)throw new Error('Event "'.concat(_event.name,'" was sent to uninitialized service "').concat(_this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(_event.data)));return _this.scheduler.schedule((function(){_this.forward(_event);var nextState=_this._nextState(_event);_this.update(nextState,_event)})),_this._state},this.sendTo=function(event,to,immediate){var isParent=_this.parent&&(to===types.i.Parent||_this.parent.id===to),target=isParent?_this.parent:(0,utils.Kg)(to)?to===types.i.Internal?_this:_this.children.get(to)||registry_get(to):(0,utils._3)(to)?to:void 0;if(target)if("machine"in target){if(_this.status!==interpreter_InterpreterStatus.Stopped||_this.parent!==target||_this.state.done){var scxmlEvent=(0,_tslib.Cl)((0,_tslib.Cl)({},event),{name:event.name===actionTypes.z3?"".concat((0,actions.z3)(_this.id)):event.name,origin:_this.sessionId});!immediate&&_this.machine.config.predictableActionArguments?_this._outgoingQueue.push([target,scxmlEvent]):target.send(scxmlEvent)}}else!immediate&&_this.machine.config.predictableActionArguments?_this._outgoingQueue.push([target,event.data]):target.send(event.data);else{if(!isParent)throw new Error("Unable to send event to child '".concat(to,"' from service '").concat(_this.id,"'."));environment.p||(0,utils.R8)(!1,"Service '".concat(_this.id,"' has no parent: unable to send event ").concat(event.type))}},this._exec=function(action,context,_event,actionFunctionMap){void 0===actionFunctionMap&&(actionFunctionMap=_this.machine.options.actions);var actionOrExec=action.exec||(0,actions.H7)(action.type,actionFunctionMap),exec=(0,utils.Tn)(actionOrExec)?actionOrExec:actionOrExec?actionOrExec.exec:action.exec;if(exec)try{return exec(context,_event.data,_this.machine.config.predictableActionArguments?{action,_event}:{action,state:_this.state,_event})}catch(err){throw _this.parent&&_this.parent.send({type:"xstate.error",data:err}),err}switch(action.type){case actionTypes.xl:var sendAction_1=action;_this.defer(sendAction_1);break;case actionTypes.tN:var sendAction=action;if("number"==typeof sendAction.delay)return void _this.defer(sendAction);sendAction.to?_this.sendTo(sendAction._event,sendAction.to,_event===actions.zp):_this.send(sendAction._event);break;case actionTypes.ZT:_this.cancel(action.sendId);break;case actionTypes.ni:if(_this.status!==interpreter_InterpreterStatus.Running)return;var activity=action.activity;if(!_this.machine.config.predictableActionArguments&&!_this.state.activities[activity.id||activity.type])break;if(activity.type===types.Q.Invoke){var invokeSource=(0,utils.Xd)(activity.src),serviceCreator=_this.machine.options.services?_this.machine.options.services[invokeSource.type]:void 0,id=activity.id,data=activity.data;environment.p||(0,utils.R8)(!("forward"in activity),"`forward` property is deprecated (found in invocation of '".concat(activity.src,"' in in machine '").concat(_this.machine.id,"'). ")+"Please use `autoForward` instead.");var autoForward="autoForward"in activity?activity.autoForward:!!activity.forward;if(!serviceCreator)return void(environment.p||(0,utils.R8)(!1,"No service found for invocation '".concat(activity.src,"' in machine '").concat(_this.machine.id,"'.")));var resolvedData=data?(0,utils.A9)(data,context,_event):void 0;if("string"==typeof serviceCreator)return;var source=(0,utils.Tn)(serviceCreator)?serviceCreator(context,_event.data,{data:resolvedData,src:invokeSource,meta:activity.meta}):serviceCreator;if(!source)return;var options=void 0;(0,utils.Ai)(source)&&(source=resolvedData?source.withContext(resolvedData):source,options={autoForward}),_this.spawn(source,id,options)}else _this.spawnActivity(activity);break;case actionTypes.ds:_this.stopChild(action.activity.id);break;case actionTypes.Rm:var _a=action,label=_a.label,value=_a.value;label?_this.logger(label,value):_this.logger(value);break;default:environment.p||(0,utils.R8)(!1,"No implementation found for action type '".concat(action.type,"'"))}};var resolvedOptions=(0,_tslib.Cl)((0,_tslib.Cl)({},Interpreter.defaultOptions),options),clock=resolvedOptions.clock,logger=resolvedOptions.logger,parent=resolvedOptions.parent,id=resolvedOptions.id,resolvedId=void 0!==id?id:machine.id;this.id=resolvedId,this.logger=logger,this.clock=clock,this.parent=parent,this.options=resolvedOptions,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry_bookId()}return Object.defineProperty(Interpreter.prototype,"initialState",{get:function(){var _this=this;return this._initialState?this._initialState:(0,serviceScope.G)(this,(function(){return _this._initialState=_this.machine.initialState,_this._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(Interpreter.prototype,"state",{get:function(){return environment.p||(0,utils.R8)(this.status!==interpreter_InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),Interpreter.prototype.execute=function(state,actionsConfig){var e_1,_a;try{for(var _b=(0,_tslib.Ju)(state.actions),_c=_b.next();!_c.done;_c=_b.next()){var action=_c.value;this.exec(action,state,actionsConfig)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},Interpreter.prototype.update=function(state,_event){var e_2,_a,e_3,_b,e_4,_c,e_5,_d,_this=this;if(state._sessionid=this.sessionId,this._state=state,this.machine.config.predictableActionArguments&&_event!==actions.zp||!this.options.execute)for(var item=void 0;item=this._outgoingQueue.shift();)item[0].send(item[1]);else this.execute(this.state);if(this.children.forEach((function(child){_this.state.children[child.id]=child})),this.devTools&&this.devTools.send(_event.data,state),state.event)try{for(var _e=(0,_tslib.Ju)(this.eventListeners),_f=_e.next();!_f.done;_f=_e.next()){(0,_f.value)(state.event)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_a=_e.return)&&_a.call(_e)}finally{if(e_2)throw e_2.error}}try{for(var _g=(0,_tslib.Ju)(this.listeners),_h=_g.next();!_h.done;_h=_g.next()){(0,_h.value)(state,state.event)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_h&&!_h.done&&(_b=_g.return)&&_b.call(_g)}finally{if(e_3)throw e_3.error}}try{for(var _j=(0,_tslib.Ju)(this.contextListeners),_k=_j.next();!_k.done;_k=_j.next()){(0,_k.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_k&&!_k.done&&(_c=_j.return)&&_c.call(_j)}finally{if(e_4)throw e_4.error}}if(this.state.done){var finalChildStateNode=state.configuration.find((function(sn){return"final"===sn.type&&sn.parent===_this.machine})),doneData=finalChildStateNode&&finalChildStateNode.doneData?(0,utils.A9)(finalChildStateNode.doneData,state.context,_event):void 0;this._doneEvent=(0,actions.tS)(this.id,doneData);try{for(var _l=(0,_tslib.Ju)(this.doneListeners),_m=_l.next();!_m.done;_m=_l.next()){(0,_m.value)(this._doneEvent)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_m&&!_m.done&&(_d=_l.return)&&_d.call(_l)}finally{if(e_5)throw e_5.error}}this._stop(),this._stopChildren(),registry_free(this.sessionId)}},Interpreter.prototype.onTransition=function(listener){return this.listeners.add(listener),this.status===interpreter_InterpreterStatus.Running&&listener(this.state,this.state.event),this},Interpreter.prototype.subscribe=function(nextListenerOrObserver,_,completeListener){var _this=this,observer=(0,utils.WV)(nextListenerOrObserver,_,completeListener);this.listeners.add(observer.next),this.status!==interpreter_InterpreterStatus.NotStarted&&observer.next(this.state);var completeOnce=function(){_this.doneListeners.delete(completeOnce),_this.stopListeners.delete(completeOnce),observer.complete()};return this.status===interpreter_InterpreterStatus.Stopped?observer.complete():(this.onDone(completeOnce),this.onStop(completeOnce)),{unsubscribe:function(){_this.listeners.delete(observer.next),_this.doneListeners.delete(completeOnce),_this.stopListeners.delete(completeOnce)}}},Interpreter.prototype.onEvent=function(listener){return this.eventListeners.add(listener),this},Interpreter.prototype.onSend=function(listener){return this.sendListeners.add(listener),this},Interpreter.prototype.onChange=function(listener){return this.contextListeners.add(listener),this},Interpreter.prototype.onStop=function(listener){return this.stopListeners.add(listener),this},Interpreter.prototype.onDone=function(listener){return this.status===interpreter_InterpreterStatus.Stopped&&this._doneEvent?listener(this._doneEvent):this.doneListeners.add(listener),this},Interpreter.prototype.off=function(listener){return this.listeners.delete(listener),this.eventListeners.delete(listener),this.sendListeners.delete(listener),this.stopListeners.delete(listener),this.doneListeners.delete(listener),this.contextListeners.delete(listener),this},Interpreter.prototype.start=function(initialState){var _this=this;if(this.status===interpreter_InterpreterStatus.Running)return this;this.machine._init(),registry_register(this.sessionId,this),this.initialized=!0,this.status=interpreter_InterpreterStatus.Running;var resolvedState=void 0===initialState?this.initialState:(0,serviceScope.G)(this,(function(){return(0,es_State.OS)(initialState)?_this.machine.resolveState(initialState):_this.machine.resolveState(es_State.Uw.from(initialState,_this.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){_this.update(resolvedState,actions.zp)})),this},Interpreter.prototype._stopChildren=function(){this.children.forEach((function(child){(0,utils.Tn)(child.stop)&&child.stop()})),this.children.clear()},Interpreter.prototype._stop=function(){var e_6,_a,e_7,_b,e_8,_c,e_9,_d,e_10,_e;try{for(var _f=(0,_tslib.Ju)(this.listeners),_g=_f.next();!_g.done;_g=_f.next()){var listener=_g.value;this.listeners.delete(listener)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{_g&&!_g.done&&(_a=_f.return)&&_a.call(_f)}finally{if(e_6)throw e_6.error}}try{for(var _h=(0,_tslib.Ju)(this.stopListeners),_j=_h.next();!_j.done;_j=_h.next()){(listener=_j.value)(),this.stopListeners.delete(listener)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_j&&!_j.done&&(_b=_h.return)&&_b.call(_h)}finally{if(e_7)throw e_7.error}}try{for(var _k=(0,_tslib.Ju)(this.contextListeners),_l=_k.next();!_l.done;_l=_k.next()){listener=_l.value;this.contextListeners.delete(listener)}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_l&&!_l.done&&(_c=_k.return)&&_c.call(_k)}finally{if(e_8)throw e_8.error}}try{for(var _m=(0,_tslib.Ju)(this.doneListeners),_o=_m.next();!_o.done;_o=_m.next()){listener=_o.value;this.doneListeners.delete(listener)}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_o&&!_o.done&&(_d=_m.return)&&_d.call(_m)}finally{if(e_9)throw e_9.error}}if(!this.initialized)return this;this.initialized=!1,this.status=interpreter_InterpreterStatus.Stopped,this._initialState=void 0;try{for(var _p=(0,_tslib.Ju)(Object.keys(this.delayedEventsMap)),_q=_p.next();!_q.done;_q=_p.next()){var key=_q.value;this.clock.clearTimeout(this.delayedEventsMap[key])}}catch(e_10_1){e_10={error:e_10_1}}finally{try{_q&&!_q.done&&(_e=_p.return)&&_e.call(_p)}finally{if(e_10)throw e_10.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},Interpreter.prototype.stop=function(){var _this=this,scheduler=this.scheduler;return this._stop(),scheduler.schedule((function(){var _a;if(!(null===(_a=_this._state)||void 0===_a?void 0:_a.done)){var _event=(0,utils.ft)({type:"xstate.stop"}),nextState=(0,serviceScope.G)(_this,(function(){var exitActions=(0,utils.Bq)((0,_tslib.fX)([],(0,_tslib.zs)(_this.state.configuration),!1).sort((function(a,b){return b.order-a.order})).map((function(stateNode){return(0,actions.Um)(stateNode.onExit,_this.machine.options.actions)}))),_a=(0,_tslib.zs)((0,actions.AS)(_this.machine,_this.state,_this.state.context,_event,[{type:"exit",actions:exitActions}],_this.machine.config.predictableActionArguments?_this._exec:void 0,_this.machine.config.predictableActionArguments||_this.machine.config.preserveActionOrder),2),resolvedActions=_a[0],updatedContext=_a[1],newState=new es_State.Uw({value:_this.state.value,context:updatedContext,_event,_sessionid:_this.sessionId,historyValue:void 0,history:_this.state,actions:resolvedActions.filter((function(action){return!(0,utils.Gx)(action)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:_this.state.done,tags:_this.state.tags,machine:_this.machine});return newState.changed=!0,newState}));_this.update(nextState,_event),_this._stopChildren(),registry_free(_this.sessionId)}})),this},Interpreter.prototype.batch=function(events){var _this=this;if(this.status===interpreter_InterpreterStatus.NotStarted&&this.options.deferEvents)environment.p||(0,utils.R8)(!1,"".concat(events.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==interpreter_InterpreterStatus.Running)throw new Error("".concat(events.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(events.length){var exec=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule((function(){var e_11,_a,nextState=_this.state,batchChanged=!1,batchedActions=[],_loop_1=function(event_1){var _event=(0,utils.ft)(event_1);_this.forward(_event),nextState=(0,serviceScope.G)(_this,(function(){return _this.machine.transition(nextState,_event,void 0,exec||void 0)})),batchedActions.push.apply(batchedActions,(0,_tslib.fX)([],(0,_tslib.zs)(_this.machine.config.predictableActionArguments?nextState.actions:nextState.actions.map((function(a){return(0,es_State.Sv)(a,nextState)}))),!1)),batchChanged=batchChanged||!!nextState.changed};try{for(var events_1=(0,_tslib.Ju)(events),events_1_1=events_1.next();!events_1_1.done;events_1_1=events_1.next()){_loop_1(events_1_1.value)}}catch(e_11_1){e_11={error:e_11_1}}finally{try{events_1_1&&!events_1_1.done&&(_a=events_1.return)&&_a.call(events_1)}finally{if(e_11)throw e_11.error}}nextState.changed=batchChanged,nextState.actions=batchedActions,_this.update(nextState,(0,utils.ft)(events[events.length-1]))}))}},Interpreter.prototype.sender=function(event){return this.send.bind(this,event)},Interpreter.prototype._nextState=function(event,exec){var _this=this;void 0===exec&&(exec=!!this.machine.config.predictableActionArguments&&this._exec);var _event=(0,utils.ft)(event);if(0===_event.name.indexOf(actionTypes.O$)&&!this.state.nextEvents.some((function(nextEvent){return 0===nextEvent.indexOf(actionTypes.O$)})))throw _event.data.data;return(0,serviceScope.G)(this,(function(){return _this.machine.transition(_this.state,_event,void 0,exec||void 0)}))},Interpreter.prototype.nextState=function(event){return this._nextState(event,!1)},Interpreter.prototype.forward=function(event){var e_12,_a;try{for(var _b=(0,_tslib.Ju)(this.forwardTo),_c=_b.next();!_c.done;_c=_b.next()){var id=_c.value,child=this.children.get(id);if(!child)throw new Error("Unable to forward event '".concat(event,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(id,"'."));child.send(event)}}catch(e_12_1){e_12={error:e_12_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_12)throw e_12.error}}},Interpreter.prototype.defer=function(sendAction){var _this=this,timerId=this.clock.setTimeout((function(){"to"in sendAction&&sendAction.to?_this.sendTo(sendAction._event,sendAction.to,!0):_this.send(sendAction._event)}),sendAction.delay);sendAction.id&&(this.delayedEventsMap[sendAction.id]=timerId)},Interpreter.prototype.cancel=function(sendId){this.clock.clearTimeout(this.delayedEventsMap[sendId]),delete this.delayedEventsMap[sendId]},Interpreter.prototype.exec=function(action,state,actionFunctionMap){void 0===actionFunctionMap&&(actionFunctionMap=this.machine.options.actions),this._exec(action,state.context,state._event,actionFunctionMap)},Interpreter.prototype.removeChild=function(childId){var _a;this.children.delete(childId),this.forwardTo.delete(childId),null===(_a=this.state)||void 0===_a||delete _a.children[childId]},Interpreter.prototype.stopChild=function(childId){var child=this.children.get(childId);child&&(this.removeChild(childId),(0,utils.Tn)(child.stop)&&child.stop())},Interpreter.prototype.spawn=function(entity,name,options){if(this.status!==interpreter_InterpreterStatus.Running)return(0,Actor.Py)(entity,name);if((0,utils.$X)(entity))return this.spawnPromise(Promise.resolve(entity),name);if((0,utils.Tn)(entity))return this.spawnCallback(entity,name);if((0,Actor.gY)(entity))return this.spawnActor(entity,name);if((0,utils.AT)(entity))return this.spawnObservable(entity,name);if((0,utils.Ai)(entity))return this.spawnMachine(entity,(0,_tslib.Cl)((0,_tslib.Cl)({},options),{id:name}));if((0,utils.lx)(entity))return this.spawnBehavior(entity,name);throw new Error('Unable to spawn entity "'.concat(name,'" of type "').concat(typeof entity,'".'))},Interpreter.prototype.spawnMachine=function(machine,options){var _this=this;void 0===options&&(options={});var childService=new Interpreter(machine,(0,_tslib.Cl)((0,_tslib.Cl)({},this.options),{parent:this,id:options.id||machine.id})),resolvedOptions=(0,_tslib.Cl)((0,_tslib.Cl)({},DEFAULT_SPAWN_OPTIONS),options);resolvedOptions.sync&&childService.onTransition((function(state){_this.send(actionTypes.yo,{state,id:childService.id})}));var actor=childService;return this.children.set(childService.id,actor),resolvedOptions.autoForward&&this.forwardTo.add(childService.id),childService.onDone((function(doneEvent){_this.removeChild(childService.id),_this.send((0,utils.ft)(doneEvent,{origin:childService.id}))})).start(),actor},Interpreter.prototype.spawnBehavior=function(behavior,id){var actorRef=spawnBehavior(behavior,{id,parent:this});return this.children.set(id,actorRef),actorRef},Interpreter.prototype.spawnPromise=function(promise,id){var _a,resolvedData,_this=this,canceled=!1;promise.then((function(response){canceled||(resolvedData=response,_this.removeChild(id),_this.send((0,utils.ft)((0,actions.tS)(id,response),{origin:id})))}),(function(errorData){if(!canceled){_this.removeChild(id);var errorEvent=(0,actions.z3)(id,errorData);try{_this.send((0,utils.ft)(errorEvent,{origin:id}))}catch(error){(0,utils.En)(errorData,error,id),_this.devTools&&_this.devTools.send(errorEvent,_this.state),_this.machine.strict&&_this.stop()}}}));var actor=((_a={id,send:function(){},subscribe:function(next,handleError,complete){var observer=(0,utils.WV)(next,handleError,complete),unsubscribed=!1;return promise.then((function(response){unsubscribed||(observer.next(response),unsubscribed||observer.complete())}),(function(err){unsubscribed||observer.error(err)})),{unsubscribe:function(){return unsubscribed=!0}}},stop:function(){canceled=!0},toJSON:function(){return{id}},getSnapshot:function(){return resolvedData}})[utils.s7]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnCallback=function(callback,id){var _a,emitted,callbackStop,_this=this,canceled=!1,receivers=new Set,listeners=new Set;try{callbackStop=callback((function(e){emitted=e,listeners.forEach((function(listener){return listener(e)})),canceled||_this.send((0,utils.ft)(e,{origin:id}))}),(function(newListener){receivers.add(newListener)}))}catch(err){this.send((0,actions.z3)(id,err))}if((0,utils.$X)(callbackStop))return this.spawnPromise(callbackStop,id);var actor=((_a={id,send:function(event){return receivers.forEach((function(receiver){return receiver(event)}))},subscribe:function(next){var observer=(0,utils.WV)(next);return listeners.add(observer.next),{unsubscribe:function(){listeners.delete(observer.next)}}},stop:function(){canceled=!0,(0,utils.Tn)(callbackStop)&&callbackStop()},toJSON:function(){return{id}},getSnapshot:function(){return emitted}})[utils.s7]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnObservable=function(source,id){var _a,emitted,_this=this,subscription=source.subscribe((function(value){emitted=value,_this.send((0,utils.ft)(value,{origin:id}))}),(function(err){_this.removeChild(id),_this.send((0,utils.ft)((0,actions.z3)(id,err),{origin:id}))}),(function(){_this.removeChild(id),_this.send((0,utils.ft)((0,actions.tS)(id),{origin:id}))})),actor=((_a={id,send:function(){},subscribe:function(next,handleError,complete){return source.subscribe(next,handleError,complete)},stop:function(){return subscription.unsubscribe()},getSnapshot:function(){return emitted},toJSON:function(){return{id}}})[utils.s7]=function(){return this},_a);return this.children.set(id,actor),actor},Interpreter.prototype.spawnActor=function(actor,name){return this.children.set(name,actor),actor},Interpreter.prototype.spawnActivity=function(activity){var implementation=this.machine.options&&this.machine.options.activities?this.machine.options.activities[activity.type]:void 0;if(implementation){var dispose=implementation(this.state.context,activity);this.spawnEffect(activity.id,dispose)}else environment.p||(0,utils.R8)(!1,"No implementation found for activity '".concat(activity.type,"'"))},Interpreter.prototype.spawnEffect=function(id,dispose){var _a;this.children.set(id,((_a={id,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:dispose||void 0,getSnapshot:function(){},toJSON:function(){return{id}}})[utils.s7]=function(){return this},_a))},Interpreter.prototype.attachDev=function(){var global=getGlobal();if(this.options.devTools&&global){if(global.__REDUX_DEVTOOLS_EXTENSION__){var devToolsOptions="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=global.__REDUX_DEVTOOLS_EXTENSION__.connect((0,_tslib.Cl)((0,_tslib.Cl)({name:this.id,autoPause:!0,stateSanitizer:function(state){return{value:state.value,context:state.context,actions:state.actions}}},devToolsOptions),{features:(0,_tslib.Cl)({jump:!1,skip:!1},devToolsOptions?devToolsOptions.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},Interpreter.prototype.toJSON=function(){return{id:this.id}},Interpreter.prototype[utils.s7]=function(){return this},Interpreter.prototype.getSnapshot=function(){return this.status===interpreter_InterpreterStatus.NotStarted?this.initialState:this._state},Interpreter.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(fn,ms){return setTimeout(fn,ms)},clearTimeout:function(id){return clearTimeout(id)}},logger:interpreter_console.log.bind(interpreter_console),devTools:!1},Interpreter.interpret=interpret,Interpreter}();function interpret(machine,options){return new Interpreter(machine,options)}const use_isomorphic_layout_effect_browser_esm=react.useLayoutEffect;function useConstant(fn){var ref=react.useRef();return ref.current||(ref.current={v:fn()}),ref.current.v}var useInterpret_assign=function(){return useInterpret_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},useInterpret_assign.apply(this,arguments)},__rest=function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t};function useIdleInterpreter(getMachine,options){var machine=useConstant((function(){return"function"==typeof getMachine?getMachine():getMachine})),context=options.context,guards=options.guards,actions=options.actions,activities=options.activities,services=options.services,delays=options.delays,interpreterOptions=(options.state,__rest(options,["context","guards","actions","activities","services","delays","state"])),service=useConstant((function(){var machineConfig={context,guards,actions,activities,services,delays};return interpret(machine.withConfig(machineConfig,(function(){return useInterpret_assign(useInterpret_assign({},machine.context),context)})),interpreterOptions)}));return use_isomorphic_layout_effect_browser_esm((function(){Object.assign(service.machine.options.actions,actions),Object.assign(service.machine.options.guards,guards),Object.assign(service.machine.options.activities,activities),Object.assign(service.machine.options.services,services),Object.assign(service.machine.options.delays,delays)}),[actions,guards,activities,services,delays]),service}var useMachine_read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar};function identity(a){return a}function useMachine(getMachine){for(var _a=[],_i=1;_i<arguments.length;_i++)_a[_i-1]=arguments[_i];var _c=useMachine_read(_a,1)[0],options=void 0===_c?{}:_c,service=useIdleInterpreter(getMachine,options),getSnapshot=(0,react.useCallback)((function(){return service.status===interpreter_InterpreterStatus.NotStarted?options.state?es_State.Uw.create(options.state):service.machine.initialState:service.getSnapshot()}),[service]),isEqual=(0,react.useCallback)((function(prevState,nextState){return function isInterpreterStateEqual(service,prevState,nextState){if(service.status===interpreter_InterpreterStatus.NotStarted)return!0;var initialStateChanged=void 0===nextState.changed&&(Object.keys(nextState.children).length>0||"boolean"==typeof prevState.changed);return!(nextState.changed||initialStateChanged)}(service,prevState,nextState)}),[service]),subscribe=(0,react.useCallback)((function(handleStoreChange){return service.subscribe(handleStoreChange).unsubscribe}),[service]),storeSnapshot=(0,with_selector.useSyncExternalStoreWithSelector)(subscribe,getSnapshot,getSnapshot,identity,isEqual);return(0,react.useEffect)((function(){var rehydratedState=options.state;return service.start(rehydratedState?es_State.Uw.create(rehydratedState):void 0),function(){service.stop(),service.status=interpreter_InterpreterStatus.NotStarted}}),[]),[storeSnapshot,service.send,service]}},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var e=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");var k="function"==typeof Object.is?Object.is:function h(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function r(a){var b=a.getSnapshot;a=a.value;try{var d=b();return!k(a,d)}catch(f){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function t(a,b){return b()}:function q(a,b){var d=b(),f=l({inst:{value:d,getSnapshot:b}}),c=f[0].inst,g=f[1];return n((function(){c.value=d,c.getSnapshot=b,r(c)&&g({inst:c})}),[a,d,b]),m((function(){return r(c)&&g({inst:c}),a((function(){r(c)&&g({inst:c})}))}),[a]),p(d),d};exports.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u},"./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{var h=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),n=__webpack_require__("./node_modules/use-sync-external-store/shim/index.js");var q="function"==typeof Object.is?Object.is:function p(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},r=n.useSyncExternalStore,t=h.useRef,u=h.useEffect,v=h.useMemo,w=h.useDebugValue;exports.useSyncExternalStoreWithSelector=function(a,b,e,l,g){var c=t(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;c=v((function(){function a(a){if(!c){if(c=!0,d=a,a=l(a),void 0!==g&&f.hasValue){var b=f.value;if(g(b,a))return k=b}return k=a}if(b=k,q(d,a))return b;var e=l(a);return void 0!==g&&g(b,e)?b:(d=a,k=e)}var d,k,c=!1,m=void 0===e?null:e;return[function(){return a(b())},null===m?void 0:function(){return a(m())}]}),[b,e,l,g]);var d=r(a,c[0],c[1]);return u((function(){f.hasValue=!0,f.value=d}),[d]),w(d),d}},"./node_modules/use-sync-external-store/shim/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js")},"./node_modules/use-sync-external-store/shim/with-selector.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js")},"./node_modules/xstate/es/Actor.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Py:()=>createDeferredActor,gY:()=>isSpawnedActor,pz:()=>createInvocableActor,sk:()=>toActorRef});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/utils.js"),_serviceScope_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xstate/es/serviceScope.js");function createNullActor(id){var _a;return(_a={id,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id}}})[_utils_js__WEBPACK_IMPORTED_MODULE_0__.s7]=function(){return this},_a}function createInvocableActor(invokeDefinition,machine,context,_event){var _a,invokeSrc=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Xd)(invokeDefinition.src),serviceCreator=null===(_a=null==machine?void 0:machine.options.services)||void 0===_a?void 0:_a[invokeSrc.type],resolvedData=invokeDefinition.data?(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.A9)(invokeDefinition.data,context,_event):void 0,tempActor=serviceCreator?createDeferredActor(serviceCreator,invokeDefinition.id,resolvedData):createNullActor(invokeDefinition.id);return tempActor.meta=invokeDefinition,tempActor}function createDeferredActor(entity,id,data){var tempActor=createNullActor(id);if(tempActor.deferred=!0,(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Ai)(entity)){var initialState_1=tempActor.state=(0,_serviceScope_js__WEBPACK_IMPORTED_MODULE_1__.G)(void 0,(function(){return(data?entity.withContext(data):entity).initialState}));tempActor.getSnapshot=function(){return initialState_1}}return tempActor}function isSpawnedActor(item){return function isActor(item){try{return"function"==typeof item.send}catch(e){return!1}}(item)&&"id"in item}function toActorRef(actorRefLike){var _a;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)(((_a={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[_utils_js__WEBPACK_IMPORTED_MODULE_0__.s7]=function(){return this},_a),actorRefLike)}},"./node_modules/xstate/es/Machine.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>createMachine});var _tslib=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),utils=__webpack_require__("./node_modules/xstate/es/utils.js"),State=__webpack_require__("./node_modules/xstate/es/State.js"),actionTypes=__webpack_require__("./node_modules/xstate/es/actionTypes.js"),es_actions=__webpack_require__("./node_modules/xstate/es/actions.js"),environment=__webpack_require__("./node_modules/xstate/es/environment.js"),constants=__webpack_require__("./node_modules/xstate/es/constants.js"),stateUtils=__webpack_require__("./node_modules/xstate/es/stateUtils.js"),Actor=__webpack_require__("./node_modules/xstate/es/Actor.js");function toInvokeSource(src){if("string"==typeof src){var simpleSrc={type:src,toString:function(){return src}};return simpleSrc}return src}function toInvokeDefinition(invokeConfig){return(0,_tslib.Cl)((0,_tslib.Cl)({type:actionTypes.lA},invokeConfig),{toJSON:function(){invokeConfig.onDone,invokeConfig.onError;var invokeDef=(0,_tslib.Tt)(invokeConfig,["onDone","onError"]);return(0,_tslib.Cl)((0,_tslib.Cl)({},invokeDef),{type:actionTypes.lA,src:toInvokeSource(invokeConfig.src)})}})}var EMPTY_OBJECT={},isStateId=function(str){return"#"===str[0]},StateNode_StateNode=function(){function StateNode(config,options,_context,_stateInfo){void 0===_context&&(_context="context"in config?config.context:void 0);var _a,_this=this;this.config=config,this._context=_context,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},options),this.parent=null==_stateInfo?void 0:_stateInfo.parent,this.key=this.config.key||(null==_stateInfo?void 0:_stateInfo.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:constants.AD),this.id=this.config.id||(0,_tslib.fX)([this.machine.key],(0,_tslib.zs)(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(_a=this.config.schema)&&void 0!==_a?_a:{},this.description=this.config.description,environment.p||(0,utils.R8)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?(0,utils.LG)(this.config.states,(function(stateConfig,key){var _a,stateNode=new StateNode(stateConfig,{},void 0,{parent:_this,key});return Object.assign(_this.idMap,(0,_tslib.Cl)(((_a={})[stateNode.id]=stateNode,_a),stateNode.idMap)),stateNode})):EMPTY_OBJECT;var order=0;!function dfs(stateNode){var e_1,_a;stateNode.order=order++;try{for(var _b=(0,_tslib.Ju)((0,stateUtils.rz)(stateNode)),_c=_b.next();!_c.done;_c=_b.next()){dfs(_c.value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(_a){return""===_a.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=(0,utils.$r)(this.config.entry||this.config.onEntry).map((function(action){return(0,es_actions.Hf)(action)})),this.onExit=(0,utils.$r)(this.config.exit||this.config.onExit).map((function(action){return(0,es_actions.Hf)(action)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=(0,utils.$r)(this.config.invoke).map((function(invokeConfig,i){var _a,_b;if((0,utils.Ai)(invokeConfig)){var invokeId=(0,utils.cv)(_this.id,i);return _this.machine.options.services=(0,_tslib.Cl)(((_a={})[invokeId]=invokeConfig,_a),_this.machine.options.services),toInvokeDefinition({src:invokeId,id:invokeId})}if((0,utils.Kg)(invokeConfig.src)){invokeId=invokeConfig.id||(0,utils.cv)(_this.id,i);return toInvokeDefinition((0,_tslib.Cl)((0,_tslib.Cl)({},invokeConfig),{id:invokeId,src:invokeConfig.src}))}if((0,utils.Ai)(invokeConfig.src)||(0,utils.Tn)(invokeConfig.src)){invokeId=invokeConfig.id||(0,utils.cv)(_this.id,i);return _this.machine.options.services=(0,_tslib.Cl)(((_b={})[invokeId]=invokeConfig.src,_b),_this.machine.options.services),toInvokeDefinition((0,_tslib.Cl)((0,_tslib.Cl)({id:invokeId},invokeConfig),{src:invokeId}))}var invokeSource=invokeConfig.src;return toInvokeDefinition((0,_tslib.Cl)((0,_tslib.Cl)({id:(0,utils.cv)(_this.id,i)},invokeConfig),{src:invokeSource}))})),this.activities=(0,utils.$r)(this.config.activities).concat(this.invoke).map((function(activity){return(0,es_actions._4)(activity)})),this.transition=this.transition.bind(this),this.tags=(0,utils.$r)(this.config.tags)}return StateNode.prototype._init=function(){this.__cache.transitions||(0,stateUtils.Ki)(this).forEach((function(stateNode){return stateNode.on}))},StateNode.prototype.withConfig=function(options,context){var _a=this.options,actions=_a.actions,activities=_a.activities,guards=_a.guards,services=_a.services,delays=_a.delays;return new StateNode(this.config,{actions:(0,_tslib.Cl)((0,_tslib.Cl)({},actions),options.actions),activities:(0,_tslib.Cl)((0,_tslib.Cl)({},activities),options.activities),guards:(0,_tslib.Cl)((0,_tslib.Cl)({},guards),options.guards),services:(0,_tslib.Cl)((0,_tslib.Cl)({},services),options.services),delays:(0,_tslib.Cl)((0,_tslib.Cl)({},delays),options.delays)},null!=context?context:this.context)},StateNode.prototype.withContext=function(context){return new StateNode(this.config,this.options,context)},Object.defineProperty(StateNode.prototype,"context",{get:function(){return(0,utils.Tn)(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:(0,utils.LG)(this.states,(function(state){return state.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),StateNode.prototype.toJSON=function(){return this.definition},Object.defineProperty(StateNode.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var transitions=this.transitions;return this.__cache.on=transitions.reduce((function(map,transition){return map[transition.eventType]=map[transition.eventType]||[],map[transition.eventType].push(transition),map}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),StateNode.prototype.getCandidates=function(eventName){if(this.__cache.candidates[eventName])return this.__cache.candidates[eventName];var transient=""===eventName,candidates=this.transitions.filter((function(transition){var sameEventType=transition.eventType===eventName;return transient?sameEventType:sameEventType||"*"===transition.eventType}));return this.__cache.candidates[eventName]=candidates,candidates},StateNode.prototype.getDelayedTransitions=function(){var _this=this,afterConfig=this.config.after;if(!afterConfig)return[];var mutateEntryExit=function(delay,i){var delayRef=(0,utils.Tn)(delay)?"".concat(_this.id,":delay[").concat(i,"]"):delay,eventType=(0,es_actions.Pl)(delayRef,_this.id);return _this.onEntry.push((0,es_actions.tN)(eventType,{delay})),_this.onExit.push((0,es_actions.ZT)(eventType)),eventType};return((0,utils.cy)(afterConfig)?afterConfig.map((function(transition,i){var eventType=mutateEntryExit(transition.delay,i);return(0,_tslib.Cl)((0,_tslib.Cl)({},transition),{event:eventType})})):(0,utils.Bq)(Object.keys(afterConfig).map((function(delay,i){var configTransition=afterConfig[delay],resolvedTransition=(0,utils.Kg)(configTransition)?{target:configTransition}:configTransition,resolvedDelay=isNaN(+delay)?delay:+delay,eventType=mutateEntryExit(resolvedDelay,i);return(0,utils.$r)(resolvedTransition).map((function(transition){return(0,_tslib.Cl)((0,_tslib.Cl)({},transition),{event:eventType,delay:resolvedDelay})}))})))).map((function(delayedTransition){var delay=delayedTransition.delay;return(0,_tslib.Cl)((0,_tslib.Cl)({},_this.formatTransition(delayedTransition)),{delay})}))},StateNode.prototype.getStateNodes=function(state){var _a,_this=this;if(!state)return[];var stateValue=state instanceof State.Uw?state.value:(0,utils.at)(state,this.delimiter);if((0,utils.Kg)(stateValue)){var initialStateValue=this.getStateNode(stateValue).initial;return void 0!==initialStateValue?this.getStateNodes(((_a={})[stateValue]=initialStateValue,_a)):[this,this.states[stateValue]]}var subStateKeys=Object.keys(stateValue),subStateNodes=[this];return subStateNodes.push.apply(subStateNodes,(0,_tslib.fX)([],(0,_tslib.zs)((0,utils.Bq)(subStateKeys.map((function(subStateKey){return _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey])})))),!1)),subStateNodes},StateNode.prototype.handles=function(event){var eventType=(0,utils.vd)(event);return this.events.includes(eventType)},StateNode.prototype.resolveState=function(state){var stateFromConfig=state instanceof State.Uw?state:State.Uw.create(state),configuration=Array.from((0,stateUtils.D0)([],this.getStateNodes(stateFromConfig.value)));return new State.Uw((0,_tslib.Cl)((0,_tslib.Cl)({},stateFromConfig),{value:this.resolve(stateFromConfig.value),configuration,done:(0,stateUtils.BJ)(configuration,this),tags:(0,stateUtils.iU)(configuration),machine:this.machine}))},StateNode.prototype.transitionLeafNode=function(stateValue,state,_event){var next=this.getStateNode(stateValue).next(state,_event);return next&&next.transitions.length?next:this.next(state,_event)},StateNode.prototype.transitionCompoundNode=function(stateValue,state,_event){var subStateKeys=Object.keys(stateValue),next=this.getStateNode(subStateKeys[0])._transition(stateValue[subStateKeys[0]],state,_event);return next&&next.transitions.length?next:this.next(state,_event)},StateNode.prototype.transitionParallelNode=function(stateValue,state,_event){var e_2,_a,transitionMap={};try{for(var _b=(0,_tslib.Ju)(Object.keys(stateValue)),_c=_b.next();!_c.done;_c=_b.next()){var subStateKey=_c.value,subStateValue=stateValue[subStateKey];if(subStateValue){var next=this.getStateNode(subStateKey)._transition(subStateValue,state,_event);next&&(transitionMap[subStateKey]=next)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}var stateTransitions=Object.keys(transitionMap).map((function(key){return transitionMap[key]})),enabledTransitions=(0,utils.Bq)(stateTransitions.map((function(st){return st.transitions})));if(!stateTransitions.some((function(st){return st.transitions.length>0})))return this.next(state,_event);var configuration=(0,utils.Bq)(Object.keys(transitionMap).map((function(key){return transitionMap[key].configuration})));return{transitions:enabledTransitions,exitSet:(0,utils.Bq)(stateTransitions.map((function(t){return t.exitSet}))),configuration,source:state,actions:(0,utils.Bq)(Object.keys(transitionMap).map((function(key){return transitionMap[key].actions})))}},StateNode.prototype._transition=function(stateValue,state,_event){return(0,utils.Kg)(stateValue)?this.transitionLeafNode(stateValue,state,_event):1===Object.keys(stateValue).length?this.transitionCompoundNode(stateValue,state,_event):this.transitionParallelNode(stateValue,state,_event)},StateNode.prototype.getTransitionData=function(state,event){return this._transition(state.value,state,(0,utils.ft)(event))},StateNode.prototype.next=function(state,_event){var e_3,_a,selectedTransition,_this=this,eventName=_event.name,actions=[],nextStateNodes=[];try{for(var _b=(0,_tslib.Ju)(this.getCandidates(eventName)),_c=_b.next();!_c.done;_c=_b.next()){var candidate=_c.value,cond=candidate.cond,stateIn=candidate.in,resolvedContext=state.context,isInState=!stateIn||((0,utils.Kg)(stateIn)&&isStateId(stateIn)?state.matches((0,utils.at)(this.getStateNodeById(stateIn).path,this.delimiter)):(0,utils.HK)((0,utils.at)(stateIn,this.delimiter),(0,utils.Ae)(this.path.slice(0,-2))(state.value))),guardPassed=!1;try{guardPassed=!cond||(0,utils.re)(this.machine,cond,resolvedContext,_event,state)}catch(err){throw new Error("Unable to evaluate guard '".concat(cond.name||cond.type,"' in transition for event '").concat(eventName,"' in state node '").concat(this.id,"':\n").concat(err.message))}if(guardPassed&&isInState){void 0!==candidate.target&&(nextStateNodes=candidate.target),actions.push.apply(actions,(0,_tslib.fX)([],(0,_tslib.zs)(candidate.actions),!1)),selectedTransition=candidate;break}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_3)throw e_3.error}}if(selectedTransition){if(!nextStateNodes.length)return{transitions:[selectedTransition],exitSet:[],configuration:state.value?[this]:[],source:state,actions};var allNextStateNodes=(0,utils.Bq)(nextStateNodes.map((function(stateNode){return _this.getRelativeStateNodes(stateNode,state.historyValue)})));return{transitions:[selectedTransition],exitSet:!!selectedTransition.internal?[]:(0,utils.Bq)(nextStateNodes.map((function(targetNode){return _this.getPotentiallyReenteringNodes(targetNode)}))),configuration:allNextStateNodes,source:state,actions}}},StateNode.prototype.getPotentiallyReenteringNodes=function(targetNode){if(this.order<targetNode.order)return[this];for(var nodes=[],marker=this,possibleAncestor=targetNode;marker&&marker!==possibleAncestor;)nodes.push(marker),marker=marker.parent;return marker!==possibleAncestor?[]:(nodes.push(possibleAncestor),nodes)},StateNode.prototype.getActions=function(resolvedConfig,isDone,transition,currentContext,_event,prevState,predictableExec){var e_4,_a,e_5,_b,_this=this,prevConfig=prevState?(0,stateUtils.D0)([],this.getStateNodes(prevState.value)):[],entrySet=new Set;try{for(var _c=(0,_tslib.Ju)(Array.from(resolvedConfig).sort((function(a,b){return a.order-b.order}))),_d=_c.next();!_d.done;_d=_c.next()){var sn=_d.value;(!(0,stateUtils.zy)(prevConfig,sn)||(0,stateUtils.zy)(transition.exitSet,sn)||sn.parent&&entrySet.has(sn.parent))&&entrySet.add(sn)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_4)throw e_4.error}}try{for(var prevConfig_1=(0,_tslib.Ju)(prevConfig),prevConfig_1_1=prevConfig_1.next();!prevConfig_1_1.done;prevConfig_1_1=prevConfig_1.next()){sn=prevConfig_1_1.value;(0,stateUtils.zy)(resolvedConfig,sn)&&!(0,stateUtils.zy)(transition.exitSet,sn.parent)||transition.exitSet.push(sn)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{prevConfig_1_1&&!prevConfig_1_1.done&&(_b=prevConfig_1.return)&&_b.call(prevConfig_1)}finally{if(e_5)throw e_5.error}}transition.exitSet.sort((function(a,b){return b.order-a.order}));var entryStates=Array.from(entrySet).sort((function(a,b){return a.order-b.order})),exitStates=new Set(transition.exitSet),doneEvents=(0,utils.Bq)(entryStates.map((function(sn){var events=[];if("final"!==sn.type)return events;var parent=sn.parent;if(!parent.parent)return events;events.push((0,es_actions.Vw)(sn.id,sn.doneData),(0,es_actions.Vw)(parent.id,sn.doneData?(0,utils.A9)(sn.doneData,currentContext,_event):void 0));var grandparent=parent.parent;return"parallel"===grandparent.type&&(0,stateUtils.i0)(grandparent).every((function(parentNode){return(0,stateUtils.BJ)(transition.configuration,parentNode)}))&&events.push((0,es_actions.Vw)(grandparent.id)),events}))),entryActions=entryStates.map((function(stateNode){var entryActions=stateNode.onEntry,invokeActions=stateNode.activities.map((function(activity){return(0,es_actions.ni)(activity)}));return{type:"entry",actions:(0,es_actions.Um)(predictableExec?(0,_tslib.fX)((0,_tslib.fX)([],(0,_tslib.zs)(entryActions),!1),(0,_tslib.zs)(invokeActions),!1):(0,_tslib.fX)((0,_tslib.fX)([],(0,_tslib.zs)(invokeActions),!1),(0,_tslib.zs)(entryActions),!1),_this.machine.options.actions)}})).concat({type:"state_done",actions:doneEvents.map((function(event){return(0,es_actions.xl)(event)}))}),actions=Array.from(exitStates).map((function(stateNode){return{type:"exit",actions:(0,es_actions.Um)((0,_tslib.fX)((0,_tslib.fX)([],(0,_tslib.zs)(stateNode.onExit),!1),(0,_tslib.zs)(stateNode.activities.map((function(activity){return(0,es_actions.ds)(activity)}))),!1),_this.machine.options.actions)}})).concat({type:"transition",actions:(0,es_actions.Um)(transition.actions,this.machine.options.actions)}).concat(entryActions);if(isDone){var stopActions=(0,es_actions.Um)((0,utils.Bq)((0,_tslib.fX)([],(0,_tslib.zs)(resolvedConfig),!1).sort((function(a,b){return b.order-a.order})).map((function(stateNode){return stateNode.onExit}))),this.machine.options.actions).filter((function(action){return!(0,utils.Gx)(action)}));return actions.concat({type:"stop",actions:stopActions})}return actions},StateNode.prototype.transition=function(state,event,context,exec){void 0===state&&(state=this.initialState);var currentState,_event=(0,utils.ft)(event);if(state instanceof State.Uw)currentState=void 0===context?state:this.resolveState(State.Uw.from(state,context));else{var resolvedStateValue=(0,utils.Kg)(state)?this.resolve((0,utils.zr)(this.getResolvedPath(state))):this.resolve(state),resolvedContext=null!=context?context:this.machine.context;currentState=this.resolveState(State.Uw.from(resolvedStateValue,resolvedContext))}if(!environment.p&&"*"===_event.name)throw new Error("An event cannot have the wildcard type ('".concat("*","')"));if(this.strict&&!this.events.includes(_event.name)&&!(0,utils.M7)(_event.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(_event.name,"'"));var stateTransition=this._transition(currentState.value,currentState,_event)||{transitions:[],configuration:[],exitSet:[],source:currentState,actions:[]},prevConfig=(0,stateUtils.D0)([],this.getStateNodes(currentState.value)),resolvedConfig=stateTransition.configuration.length?(0,stateUtils.D0)(prevConfig,stateTransition.configuration):prevConfig;return stateTransition.configuration=(0,_tslib.fX)([],(0,_tslib.zs)(resolvedConfig),!1),this.resolveTransition(stateTransition,currentState,currentState.context,exec,_event)},StateNode.prototype.resolveRaisedTransition=function(state,_event,originalEvent,predictableExec){var _a,currentActions=state.actions;return(state=this.transition(state,_event,void 0,predictableExec))._event=originalEvent,state.event=originalEvent.data,(_a=state.actions).unshift.apply(_a,(0,_tslib.fX)([],(0,_tslib.zs)(currentActions),!1)),state},StateNode.prototype.resolveTransition=function(stateTransition,currentState,context,predictableExec,_event){var e_6,_a,e_7,_b,_this=this;void 0===_event&&(_event=es_actions.zp);var configuration=stateTransition.configuration,willTransition=!currentState||stateTransition.transitions.length>0,resolvedConfiguration=willTransition?stateTransition.configuration:currentState?currentState.configuration:[],isDone=(0,stateUtils.BJ)(resolvedConfiguration,this),resolvedStateValue=willTransition?(0,stateUtils._W)(this.machine,configuration):void 0,historyValue=currentState?currentState.historyValue?currentState.historyValue:stateTransition.source?this.machine.historyValue(currentState.value):void 0:void 0,actionBlocks=this.getActions(new Set(resolvedConfiguration),isDone,stateTransition,context,_event,currentState,predictableExec),activities=currentState?(0,_tslib.Cl)({},currentState.activities):{};try{for(var actionBlocks_1=(0,_tslib.Ju)(actionBlocks),actionBlocks_1_1=actionBlocks_1.next();!actionBlocks_1_1.done;actionBlocks_1_1=actionBlocks_1.next()){var block=actionBlocks_1_1.value;try{for(var _c=(e_7=void 0,(0,_tslib.Ju)(block.actions)),_d=_c.next();!_d.done;_d=_c.next()){var action=_d.value;action.type===actionTypes.ni?activities[action.activity.id||action.activity.type]=action:action.type===actionTypes.ds&&(activities[action.activity.id||action.activity.type]=!1)}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_7)throw e_7.error}}}}catch(e_6_1){e_6={error:e_6_1}}finally{try{actionBlocks_1_1&&!actionBlocks_1_1.done&&(_a=actionBlocks_1.return)&&_a.call(actionBlocks_1)}finally{if(e_6)throw e_6.error}}var _e=(0,_tslib.zs)((0,es_actions.AS)(this,currentState,context,_event,actionBlocks,predictableExec,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),resolvedActions=_e[0],updatedContext=_e[1],_f=(0,_tslib.zs)((0,utils.jB)(resolvedActions,utils.Gx),2),raisedEvents=_f[0],nonRaisedActions=_f[1],invokeActions=resolvedActions.filter((function(action){var _a;return action.type===actionTypes.ni&&(null===(_a=action.activity)||void 0===_a?void 0:_a.type)===actionTypes.lA})),children=invokeActions.reduce((function(acc,action){return acc[action.activity.id]=(0,Actor.pz)(action.activity,_this.machine,updatedContext,_event),acc}),currentState?(0,_tslib.Cl)({},currentState.children):{}),nextState=new State.Uw({value:resolvedStateValue||currentState.value,context:updatedContext,_event,_sessionid:currentState?currentState._sessionid:null,historyValue:resolvedStateValue?historyValue?(0,utils.BY)(historyValue,resolvedStateValue):void 0:currentState?currentState.historyValue:void 0,history:!resolvedStateValue||stateTransition.source?currentState:void 0,actions:resolvedStateValue?nonRaisedActions:[],activities:resolvedStateValue?activities:currentState?currentState.activities:{},events:[],configuration:resolvedConfiguration,transitions:stateTransition.transitions,children,done:isDone,tags:(0,stateUtils.iU)(resolvedConfiguration),machine:this}),didUpdateContext=context!==updatedContext;nextState.changed=_event.name===actionTypes.yo||didUpdateContext;var history=nextState.history;history&&delete history.history;var hasAlwaysTransitions=!isDone&&(this._transient||configuration.some((function(stateNode){return stateNode._transient})));if(!(willTransition||hasAlwaysTransitions&&""!==_event.name))return nextState;var maybeNextState=nextState;if(!isDone)for(hasAlwaysTransitions&&(maybeNextState=this.resolveRaisedTransition(maybeNextState,{type:actionTypes.kx},_event,predictableExec));raisedEvents.length;){var raisedEvent=raisedEvents.shift();maybeNextState=this.resolveRaisedTransition(maybeNextState,raisedEvent._event,_event,predictableExec)}var changed=maybeNextState.changed||(history?!!maybeNextState.actions.length||didUpdateContext||typeof history.value!=typeof maybeNextState.value||!(0,State.iE)(maybeNextState.value,history.value):void 0);return maybeNextState.changed=changed,maybeNextState.history=history,maybeNextState},StateNode.prototype.getStateNode=function(stateKey){if(isStateId(stateKey))return this.machine.getStateNodeById(stateKey);if(!this.states)throw new Error("Unable to retrieve child state '".concat(stateKey,"' from '").concat(this.id,"'; no child states exist."));var result=this.states[stateKey];if(!result)throw new Error("Child state '".concat(stateKey,"' does not exist on '").concat(this.id,"'"));return result},StateNode.prototype.getStateNodeById=function(stateId){var resolvedStateId=isStateId(stateId)?stateId.slice(1):stateId;if(resolvedStateId===this.id)return this;var stateNode=this.machine.idMap[resolvedStateId];if(!stateNode)throw new Error("Child state node '#".concat(resolvedStateId,"' does not exist on machine '").concat(this.id,"'"));return stateNode},StateNode.prototype.getStateNodeByPath=function(statePath){if("string"==typeof statePath&&isStateId(statePath))try{return this.getStateNodeById(statePath.slice(1))}catch(e){}for(var arrayStatePath=(0,utils._J)(statePath,this.delimiter).slice(),currentStateNode=this;arrayStatePath.length;){var key=arrayStatePath.shift();if(!key.length)break;currentStateNode=currentStateNode.getStateNode(key)}return currentStateNode},StateNode.prototype.resolve=function(stateValue){var _a,_this=this;if(!stateValue)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return(0,utils.LG)(this.initialStateValue,(function(subStateValue,subStateKey){return subStateValue?_this.getStateNode(subStateKey).resolve(stateValue[subStateKey]||subStateValue):EMPTY_OBJECT}));case"compound":if((0,utils.Kg)(stateValue)){var subStateNode=this.getStateNode(stateValue);return"parallel"===subStateNode.type||"compound"===subStateNode.type?((_a={})[stateValue]=subStateNode.initialStateValue,_a):stateValue}return Object.keys(stateValue).length?(0,utils.LG)(stateValue,(function(subStateValue,subStateKey){return subStateValue?_this.getStateNode(subStateKey).resolve(subStateValue):EMPTY_OBJECT})):this.initialStateValue||{};default:return stateValue||EMPTY_OBJECT}},StateNode.prototype.getResolvedPath=function(stateIdentifier){if(isStateId(stateIdentifier)){var stateNode=this.machine.idMap[stateIdentifier.slice(1)];if(!stateNode)throw new Error("Unable to find state node '".concat(stateIdentifier,"'"));return stateNode.path}return(0,utils._J)(stateIdentifier,this.delimiter)},Object.defineProperty(StateNode.prototype,"initialStateValue",{get:function(){var _a,initialStateValue;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)initialStateValue=(0,utils.rp)(this.states,(function(state){return state.initialStateValue||EMPTY_OBJECT}),(function(stateNode){return!("history"===stateNode.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));initialStateValue=(0,stateUtils.d2)(this.states[this.initial])?this.initial:((_a={})[this.initial]=this.states[this.initial].initialStateValue,_a)}else initialStateValue={};return this.__cache.initialStateValue=initialStateValue,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),StateNode.prototype.getInitialState=function(stateValue,context){this._init();var configuration=this.getStateNodes(stateValue);return this.resolveTransition({configuration,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=context?context:this.machine.context,void 0)},Object.defineProperty(StateNode.prototype,"initialState",{get:function(){var initialStateValue=this.initialStateValue;if(!initialStateValue)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(initialStateValue)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"target",{get:function(){var target;if("history"===this.type){var historyConfig=this.config;target=(0,utils.Kg)(historyConfig.target)&&isStateId(historyConfig.target)?(0,utils.zr)(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length-1)):historyConfig.target}return target},enumerable:!1,configurable:!0}),StateNode.prototype.getRelativeStateNodes=function(relativeStateId,historyValue,resolve){return void 0===resolve&&(resolve=!0),resolve?"history"===relativeStateId.type?relativeStateId.resolveHistory(historyValue):relativeStateId.initialStateNodes:[relativeStateId]},Object.defineProperty(StateNode.prototype,"initialStateNodes",{get:function(){var _this=this;if((0,stateUtils.d2)(this))return[this];if("compound"===this.type&&!this.initial)return environment.p||(0,utils.R8)(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var initialStateNodePaths=(0,utils.bm)(this.initialStateValue);return(0,utils.Bq)(initialStateNodePaths.map((function(initialPath){return _this.getFromRelativePath(initialPath)})))},enumerable:!1,configurable:!0}),StateNode.prototype.getFromRelativePath=function(relativePath){if(!relativePath.length)return[this];var _a=(0,_tslib.zs)(relativePath),stateKey=_a[0],childStatePath=_a.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(stateKey,"' from node with no states"));var childStateNode=this.getStateNode(stateKey);if("history"===childStateNode.type)return childStateNode.resolveHistory();if(!this.states[stateKey])throw new Error("Child state '".concat(stateKey,"' does not exist on '").concat(this.id,"'"));return this.states[stateKey].getFromRelativePath(childStatePath)},StateNode.prototype.historyValue=function(relativeStateValue){if(Object.keys(this.states).length)return{current:relativeStateValue||this.initialStateValue,states:(0,utils.rp)(this.states,(function(stateNode,key){if(!relativeStateValue)return stateNode.historyValue();var subStateValue=(0,utils.Kg)(relativeStateValue)?void 0:relativeStateValue[key];return stateNode.historyValue(subStateValue||stateNode.initialStateValue)}),(function(stateNode){return!stateNode.history}))}},StateNode.prototype.resolveHistory=function(historyValue){var _this=this;if("history"!==this.type)return[this];var parent=this.parent;if(!historyValue){var historyTarget=this.target;return historyTarget?(0,utils.Bq)((0,utils.bm)(historyTarget).map((function(relativeChildPath){return parent.getFromRelativePath(relativeChildPath)}))):parent.initialStateNodes}var subHistoryValue=(0,utils.VQ)(parent.path,"states")(historyValue).current;return(0,utils.Kg)(subHistoryValue)?[parent.getStateNode(subHistoryValue)]:(0,utils.Bq)((0,utils.bm)(subHistoryValue).map((function(subStatePath){return"deep"===_this.history?parent.getFromRelativePath(subStatePath):[parent.states[subStatePath[0]]]})))},Object.defineProperty(StateNode.prototype,"stateIds",{get:function(){var _this=this,childStateIds=(0,utils.Bq)(Object.keys(this.states).map((function(stateKey){return _this.states[stateKey].stateIds})));return[this.id].concat(childStateIds)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"events",{get:function(){var e_8,_a,e_9,_b;if(this.__cache.events)return this.__cache.events;var states=this.states,events=new Set(this.ownEvents);if(states)try{for(var _c=(0,_tslib.Ju)(Object.keys(states)),_d=_c.next();!_d.done;_d=_c.next()){var state=states[_d.value];if(state.states)try{for(var _e=(e_9=void 0,(0,_tslib.Ju)(state.events)),_f=_e.next();!_f.done;_f=_e.next()){var event_1=_f.value;events.add("".concat(event_1))}}catch(e_9_1){e_9={error:e_9_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_9)throw e_9.error}}}}catch(e_8_1){e_8={error:e_8_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_8)throw e_8.error}}return this.__cache.events=Array.from(events)},enumerable:!1,configurable:!0}),Object.defineProperty(StateNode.prototype,"ownEvents",{get:function(){var events=new Set(this.transitions.filter((function(transition){return!(!transition.target&&!transition.actions.length&&transition.internal)})).map((function(transition){return transition.eventType})));return Array.from(events)},enumerable:!1,configurable:!0}),StateNode.prototype.resolveTarget=function(_target){var _this=this;if(void 0!==_target)return _target.map((function(target){if(!(0,utils.Kg)(target))return target;var isInternalTarget=target[0]===_this.delimiter;if(isInternalTarget&&!_this.parent)return _this.getStateNodeByPath(target.slice(1));var resolvedTarget=isInternalTarget?_this.key+target:target;if(!_this.parent)return _this.getStateNodeByPath(resolvedTarget);try{return _this.parent.getStateNodeByPath(resolvedTarget)}catch(err){throw new Error("Invalid transition definition for state node '".concat(_this.id,"':\n").concat(err.message))}}))},StateNode.prototype.formatTransition=function(transitionConfig){var _this=this,normalizedTarget=(0,utils.R_)(transitionConfig.target),internal="internal"in transitionConfig?transitionConfig.internal:!normalizedTarget||normalizedTarget.some((function(_target){return(0,utils.Kg)(_target)&&_target[0]===_this.delimiter})),guards=this.machine.options.guards,target=this.resolveTarget(normalizedTarget),transition=(0,_tslib.Cl)((0,_tslib.Cl)({},transitionConfig),{actions:(0,es_actions.Um)((0,utils.$r)(transitionConfig.actions)),cond:(0,utils.Z8)(transitionConfig.cond,guards),target,source:this,internal,eventType:transitionConfig.event,toJSON:function(){return(0,_tslib.Cl)((0,_tslib.Cl)({},transition),{target:transition.target?transition.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(_this.id)})}});return transition},StateNode.prototype.formatTransitions=function(){var e_10,_a,onConfig,_this=this;if(this.config.on)if(Array.isArray(this.config.on))onConfig=this.config.on;else{var _b=this.config.on,_d=_b["*"],wildcardConfigs=void 0===_d?[]:_d,strictTransitionConfigs_1=(0,_tslib.Tt)(_b,["*"]);onConfig=(0,utils.Bq)(Object.keys(strictTransitionConfigs_1).map((function(key){environment.p||""!==key||(0,utils.R8)(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(_this.id,'".'));var transitionConfigArray=(0,utils.oc)(key,strictTransitionConfigs_1[key]);return environment.p||function(stateNode,event,transitions){var hasNonLastUnguardedTarget=transitions.slice(0,-1).some((function(transition){return!("cond"in transition)&&!("in"in transition)&&((0,utils.Kg)(transition.target)||(0,utils.Ai)(transition.target))})),eventText=""===event?"the transient event":"event '".concat(event,"'");(0,utils.R8)(!hasNonLastUnguardedTarget,"One or more transitions for ".concat(eventText," on state '").concat(stateNode.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(_this,key,transitionConfigArray),transitionConfigArray})).concat((0,utils.oc)("*",wildcardConfigs)))}else onConfig=[];var eventlessConfig=this.config.always?(0,utils.oc)("",this.config.always):[],doneConfig=this.config.onDone?(0,utils.oc)(String((0,es_actions.Vw)(this.id)),this.config.onDone):[];environment.p||(0,utils.R8)(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var invokeConfig=(0,utils.Bq)(this.invoke.map((function(invokeDef){var settleTransitions=[];return invokeDef.onDone&&settleTransitions.push.apply(settleTransitions,(0,_tslib.fX)([],(0,_tslib.zs)((0,utils.oc)(String((0,es_actions.tS)(invokeDef.id)),invokeDef.onDone)),!1)),invokeDef.onError&&settleTransitions.push.apply(settleTransitions,(0,_tslib.fX)([],(0,_tslib.zs)((0,utils.oc)(String((0,es_actions.z3)(invokeDef.id)),invokeDef.onError)),!1)),settleTransitions}))),delayedTransitions=this.after,formattedTransitions=(0,utils.Bq)((0,_tslib.fX)((0,_tslib.fX)((0,_tslib.fX)((0,_tslib.fX)([],(0,_tslib.zs)(doneConfig),!1),(0,_tslib.zs)(invokeConfig),!1),(0,_tslib.zs)(onConfig),!1),(0,_tslib.zs)(eventlessConfig),!1).map((function(transitionConfig){return(0,utils.$r)(transitionConfig).map((function(transition){return _this.formatTransition(transition)}))})));try{for(var delayedTransitions_1=(0,_tslib.Ju)(delayedTransitions),delayedTransitions_1_1=delayedTransitions_1.next();!delayedTransitions_1_1.done;delayedTransitions_1_1=delayedTransitions_1.next()){var delayedTransition=delayedTransitions_1_1.value;formattedTransitions.push(delayedTransition)}}catch(e_10_1){e_10={error:e_10_1}}finally{try{delayedTransitions_1_1&&!delayedTransitions_1_1.done&&(_a=delayedTransitions_1.return)&&_a.call(delayedTransitions_1)}finally{if(e_10)throw e_10.error}}return formattedTransitions},StateNode}(),console=__webpack_require__("./node_modules/console-browserify/index.js"),warned=!1;function createMachine(config,options){return environment.p||"predictableActionArguments"in config||warned||(warned=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new StateNode_StateNode(config,options)}},"./node_modules/xstate/es/State.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{OS:()=>isStateConfig,Sv:()=>bindActionToState,Uw:()=>State,iE:()=>stateValuesEqual});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),_constants_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/xstate/es/constants.js"),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/utils.js"),_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/xstate/es/stateUtils.js"),_actions_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/xstate/es/actions.js"),_environment_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/xstate/es/environment.js");function stateValuesEqual(a,b){if(a===b)return!0;if(void 0===a||void 0===b)return!1;if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(a)||(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(b))return a===b;var aKeys=Object.keys(a),bKeys=Object.keys(b);return aKeys.length===bKeys.length&&aKeys.every((function(key){return stateValuesEqual(a[key],b[key])}))}function isStateConfig(state){return"object"==typeof state&&null!==state&&("value"in state&&"_event"in state)}function bindActionToState(action,state){var exec=action.exec;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)({},action),{exec:void 0!==exec?function(){return exec(state.context,state.event,{action,state,_event:state._event})}:void 0})}var State=function(){function State(config){var _a,_this=this;this.actions=[],this.activities=_constants_js__WEBPACK_IMPORTED_MODULE_2__.xP,this.meta={},this.events=[],this.value=config.value,this.context=config.context,this._event=config._event,this._sessionid=config._sessionid,this.event=this._event.data,this.historyValue=config.historyValue,this.history=config.history,this.actions=config.actions||[],this.activities=config.activities||_constants_js__WEBPACK_IMPORTED_MODULE_2__.xP,this.meta=(0,_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__.IQ)(config.configuration),this.events=config.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=config.configuration,this.transitions=config.transitions,this.children=config.children,this.done=!!config.done,this.tags=null!==(_a=Array.isArray(config.tags)?new Set(config.tags):config.tags)&&void 0!==_a?_a:new Set,this.machine=config.machine,Object.defineProperty(this,"nextEvents",{get:function(){return(0,_stateUtils_js__WEBPACK_IMPORTED_MODULE_3__.Xh)(_this.configuration)}})}return State.from=function(stateValue,context){return stateValue instanceof State?stateValue.context!==context?new State({value:stateValue.value,context,_event:stateValue._event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,actions:[],activities:stateValue.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):stateValue:new State({value:stateValue,context,_event:_actions_js__WEBPACK_IMPORTED_MODULE_4__.zp,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},State.create=function(config){return new State(config)},State.inert=function(stateValue,context){if(stateValue instanceof State){if(!stateValue.actions.length)return stateValue;var _event=_actions_js__WEBPACK_IMPORTED_MODULE_4__.zp;return new State({value:stateValue.value,context,_event,_sessionid:null,historyValue:stateValue.historyValue,history:stateValue.history,activities:stateValue.activities,configuration:stateValue.configuration,transitions:[],children:{}})}return State.from(stateValue,context)},State.prototype.toStrings=function(stateValue,delimiter){var _this=this;if(void 0===stateValue&&(stateValue=this.value),void 0===delimiter&&(delimiter="."),(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(stateValue))return[stateValue];var valueKeys=Object.keys(stateValue);return valueKeys.concat.apply(valueKeys,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.fX)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.zs)(valueKeys.map((function(key){return _this.toStrings(stateValue[key],delimiter).map((function(s){return key+delimiter+s}))}))),!1))},State.prototype.toJSON=function(){var _a=this;_a.configuration,_a.transitions;var tags=_a.tags;_a.machine;var jsonValues=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Tt)(_a,["configuration","transitions","tags","machine"]);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)({},jsonValues),{tags:Array.from(tags)})},State.prototype.matches=function(parentStateValue){return(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.HK)(parentStateValue,this.value)},State.prototype.hasTag=function(tag){return this.tags.has(tag)},State.prototype.can=function(event){var _a;_environment_js__WEBPACK_IMPORTED_MODULE_5__.p&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.R8)(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var transitionData=null===(_a=this.machine)||void 0===_a?void 0:_a.getTransitionData(this,event);return!!(null==transitionData?void 0:transitionData.transitions.length)&&transitionData.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},State}()},"./node_modules/xstate/es/_virtual/_tslib.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Cl:()=>__assign,Ju:()=>__values,Tt:()=>__rest,fX:()=>__spreadArray,zs:()=>__read});var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __values(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}},"./node_modules/xstate/es/actionTypes.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LM:()=>pure,O$:()=>errorPlatform,Rm:()=>log,Sw:()=>choose,Ts:()=>init,ZT:()=>cancel,ds:()=>stop,kp:()=>assign,kx:()=>nullEvent,lA:()=>invoke,ni:()=>start,tN:()=>send,xl:()=>raise,yo:()=>update,z3:()=>error});var _types_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/types.js"),start=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Start,stop=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Stop,raise=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Raise,send=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Send,cancel=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Cancel,nullEvent=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.NullEvent,assign=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Assign,log=(_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.After,_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.DoneState,_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Log),init=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Init,invoke=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Invoke,errorPlatform=(_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.ErrorExecution,_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.ErrorPlatform),error=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.ErrorCustom,update=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Update,choose=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Choose,pure=_types_js__WEBPACK_IMPORTED_MODULE_0__.Q.Pure},"./node_modules/xstate/es/actions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AS:()=>resolveActions,H7:()=>getActionFunction,Hf:()=>toActionObject,Pl:()=>after,Um:()=>toActionObjects,Vw:()=>done,ZT:()=>cancel,_4:()=>toActivityDefinition,ds:()=>stop,ni:()=>start,tN:()=>send,tS:()=>doneInvoke,xl:()=>raise,z3:()=>error,zp:()=>initEvent});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),_types_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/xstate/es/types.js"),_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xstate/es/actionTypes.js"),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/utils.js"),_environment_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/xstate/es/environment.js"),initEvent=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.ft)({type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.Ts});function getActionFunction(actionType,actionFunctionMap){return actionFunctionMap&&actionFunctionMap[actionType]||void 0}function toActionObject(action,actionFunctionMap){var actionObject;if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(action)||"number"==typeof action){var exec=getActionFunction(action,actionFunctionMap);actionObject=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(exec)?{type:action,exec}:exec||{type:action,exec:void 0}}else if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action))actionObject={type:action.name||action.toString(),exec:action};else{exec=getActionFunction(action.type,actionFunctionMap);if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(exec))actionObject=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},action),{exec});else if(exec){var actionType=exec.type||action.type;actionObject=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},exec),action),{type:actionType})}else actionObject=action}return actionObject}var toActionObjects=function(action,actionFunctionMap){return action?((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.cy)(action)?action:[action]).map((function(subAction){return toActionObject(subAction,actionFunctionMap)})):[]};function toActivityDefinition(action){var actionObject=toActionObject(action);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({id:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(action)?action:actionObject.id},actionObject),{type:actionObject.type})}function raise(event,options){return{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.xl,event:"function"==typeof event?event:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.jK)(event),delay:options?options.delay:void 0,id:null==options?void 0:options.id}}function send(event,options){return{to:options?options.to:void 0,type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.tN,event:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(event)?event:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.jK)(event),delay:options?options.delay:void 0,id:options&&void 0!==options.id?options.id:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(event)?event.name:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.vd)(event)}}var resolveLog=function(action,ctx,_event){return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},action),{value:(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(action.expr)?action.expr:action.expr(ctx,_event.data,{_event})})},cancel=function(sendId){return{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.ZT,sendId}};function start(activity){var activityDef=toActivityDefinition(activity);return{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.Start,activity:activityDef,exec:void 0}}function stop(actorRef){var activity=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(actorRef)?actorRef:toActivityDefinition(actorRef);return{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.Stop,activity,exec:void 0}}function after(delayRef,id){var idSuffix=id?"#".concat(id):"";return"".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.After,"(").concat(delayRef,")").concat(idSuffix)}function done(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.DoneState,".").concat(id),eventObject={type,data,toString:function(){return type}};return eventObject}function doneInvoke(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.DoneInvoke,".").concat(id),eventObject={type,data,toString:function(){return type}};return eventObject}function error(id,data){var type="".concat(_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.ErrorPlatform,".").concat(id),eventObject={type,data,toString:function(){return type}};return eventObject}var pluckAssigns=function(actionBlocks){var e_1,_a,assignActions=[];try{for(var actionBlocks_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Ju)(actionBlocks),actionBlocks_1_1=actionBlocks_1.next();!actionBlocks_1_1.done;actionBlocks_1_1=actionBlocks_1.next())for(var block=actionBlocks_1_1.value,i=0;i<block.actions.length;)block.actions[i].type!==_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.kp?i++:(assignActions.push(block.actions[i]),block.actions.splice(i,1))}catch(e_1_1){e_1={error:e_1_1}}finally{try{actionBlocks_1_1&&!actionBlocks_1_1.done&&(_a=actionBlocks_1.return)&&_a.call(actionBlocks_1)}finally{if(e_1)throw e_1.error}}return assignActions};function resolveActions(machine,currentState,currentContext,_event,actionBlocks,predictableExec,preserveActionOrder){void 0===preserveActionOrder&&(preserveActionOrder=!1);var assignActions=preserveActionOrder?[]:pluckAssigns(actionBlocks),updatedContext=assignActions.length?(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.r_)(currentContext,_event,assignActions,currentState):currentContext,preservedContexts=preserveActionOrder?[currentContext]:void 0,deferredToBlockEnd=[];function handleAction(blockType,actionObject){var _a;switch(actionObject.type){case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.xl:var raisedAction=function resolveRaise(action,ctx,_event,delaysMap){var resolvedDelay,meta={_event},resolvedEvent=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.ft)((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.event)?action.event(ctx,_event.data,meta):action.event);if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(action.delay)){var configDelay=delaysMap&&delaysMap[action.delay];resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(configDelay)?configDelay(ctx,_event.data,meta):configDelay}else resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.delay)?action.delay(ctx,_event.data,meta):action.delay;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},action),{type:_actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.xl,_event:resolvedEvent,delay:resolvedDelay})}(actionObject,updatedContext,_event,machine.options.delays);return predictableExec&&"number"==typeof raisedAction.delay&&predictableExec(raisedAction,updatedContext,_event),raisedAction;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.tN:var sendAction=function resolveSend(action,ctx,_event,delaysMap){var resolvedDelay,meta={_event},resolvedEvent=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.ft)((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.event)?action.event(ctx,_event.data,meta):action.event);if((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(action.delay)){var configDelay=delaysMap&&delaysMap[action.delay];resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(configDelay)?configDelay(ctx,_event.data,meta):configDelay}else resolvedDelay=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.delay)?action.delay(ctx,_event.data,meta):action.delay;var resolvedTarget=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.to)?action.to(ctx,_event.data,meta):action.to;return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},action),{to:resolvedTarget,_event:resolvedEvent,event:resolvedEvent.data,delay:resolvedDelay})}(actionObject,updatedContext,_event,machine.options.delays);if(!_environment_js__WEBPACK_IMPORTED_MODULE_4__.p){var configuredDelay=actionObject.delay;(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.R8)(!(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Kg)(configuredDelay)||"number"==typeof sendAction.delay,"No delay reference for delay expression '".concat(configuredDelay,"' was found on machine '").concat(machine.id,"'"))}return predictableExec&&sendAction.to!==_types_js__WEBPACK_IMPORTED_MODULE_3__.i.Internal&&("entry"===blockType?deferredToBlockEnd.push(sendAction):predictableExec(sendAction,updatedContext,_event)),sendAction;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.Rm:var resolved=resolveLog(actionObject,updatedContext,_event);return null==predictableExec||predictableExec(resolved,updatedContext,_event),resolved;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.Sw:if(!(matchedActions=null===(_a=actionObject.conds.find((function(condition){var guard=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Z8)(condition.cond,machine.options.guards);return!guard||(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.re)(machine,guard,updatedContext,_event,predictableExec?void 0:currentState)})))||void 0===_a?void 0:_a.actions))return[];var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.zs)(resolveActions(machine,currentState,updatedContext,_event,[{type:blockType,actions:toActionObjects((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.$r)(matchedActions),machine.options.actions)}],predictableExec,preserveActionOrder),2),resolvedActionsFromChoose=_b[0],resolvedContextFromChoose=_b[1];return updatedContext=resolvedContextFromChoose,null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromChoose;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.LM:var matchedActions;if(!(matchedActions=actionObject.get(updatedContext,_event.data)))return[];var _c=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.zs)(resolveActions(machine,currentState,updatedContext,_event,[{type:blockType,actions:toActionObjects((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.$r)(matchedActions),machine.options.actions)}],predictableExec,preserveActionOrder),2),resolvedActionsFromPure=_c[0],resolvedContext=_c[1];return updatedContext=resolvedContext,null==preservedContexts||preservedContexts.push(updatedContext),resolvedActionsFromPure;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.ds:resolved=function resolveStop(action,context,_event){var actorRefOrString=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Tn)(action.activity)?action.activity(context,_event.data):action.activity,resolvedActorRef="string"==typeof actorRefOrString?{id:actorRefOrString}:actorRefOrString;return{type:_types_js__WEBPACK_IMPORTED_MODULE_3__.Q.Stop,activity:resolvedActorRef}}(actionObject,updatedContext,_event);return null==predictableExec||predictableExec(resolved,currentContext,_event),resolved;case _actionTypes_js__WEBPACK_IMPORTED_MODULE_1__.kp:updatedContext=(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.r_)(updatedContext,_event,[actionObject],predictableExec?void 0:currentState),null==preservedContexts||preservedContexts.push(updatedContext);break;default:var resolvedActionObject=toActionObject(actionObject,machine.options.actions),exec_1=resolvedActionObject.exec;if(predictableExec)predictableExec(resolvedActionObject,updatedContext,_event);else if(exec_1&&preservedContexts){var contextIndex_1=preservedContexts.length-1,wrapped=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Cl)({},resolvedActionObject),{exec:function(_ctx){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];exec_1.apply(void 0,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.fX)([preservedContexts[contextIndex_1]],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.zs)(args),!1))}});resolvedActionObject=wrapped}return resolvedActionObject}}return[(0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Bq)(actionBlocks.map((function processBlock(block){var e_2,_a,resolvedActions=[];try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_2__.Ju)(block.actions),_c=_b.next();!_c.done;_c=_b.next()){var action=_c.value,resolved=handleAction(block.type,action);resolved&&(resolvedActions=resolvedActions.concat(resolved))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return deferredToBlockEnd.forEach((function(action){predictableExec(action,updatedContext,_event)})),deferredToBlockEnd.length=0,resolvedActions}))),updatedContext]}},"./node_modules/xstate/es/constants.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$D:()=>TARGETLESS_KEY,AD:()=>STATE_DELIMITER,hS:()=>DEFAULT_GUARD_TYPE,xP:()=>EMPTY_ACTIVITY_MAP});var STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY=""},"./node_modules/xstate/es/environment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>IS_PRODUCTION});var IS_PRODUCTION=!0},"./node_modules/xstate/es/serviceScope.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>provide});var serviceStack=[],provide=function(service,fn){serviceStack.push(service);var result=fn(service);return serviceStack.pop(),result}},"./node_modules/xstate/es/stateUtils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BJ:()=>isInFinalState,D0:()=>getConfiguration,IQ:()=>getMeta,Ki:()=>getAllStateNodes,Xh:()=>nextEvents,_W:()=>getValue,d2:()=>isLeafNode,i0:()=>getChildren,iU:()=>getTagsFromConfiguration,rz:()=>getAllChildren,zy:()=>has});var _virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),_utils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/utils.js"),isLeafNode=function(stateNode){return"atomic"===stateNode.type||"final"===stateNode.type};function getAllChildren(stateNode){return Object.keys(stateNode.states).map((function(key){return stateNode.states[key]}))}function getChildren(stateNode){return getAllChildren(stateNode).filter((function(sn){return"history"!==sn.type}))}function getAllStateNodes(stateNode){var stateNodes=[stateNode];return isLeafNode(stateNode)?stateNodes:stateNodes.concat((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Bq)(getChildren(stateNode).map(getAllStateNodes)))}function getConfiguration(prevStateNodes,stateNodes){var e_1,_a,e_2,_b,e_3,_c,e_4,_d,prevAdjList=getAdjList(new Set(prevStateNodes)),configuration=new Set(stateNodes);try{for(var configuration_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(configuration),configuration_1_1=configuration_1.next();!configuration_1_1.done;configuration_1_1=configuration_1.next())for(var m=(s=configuration_1_1.value).parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}catch(e_1_1){e_1={error:e_1_1}}finally{try{configuration_1_1&&!configuration_1_1.done&&(_a=configuration_1.return)&&_a.call(configuration_1)}finally{if(e_1)throw e_1.error}}var adjList=getAdjList(configuration);try{for(var configuration_2=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(configuration),configuration_2_1=configuration_2.next();!configuration_2_1.done;configuration_2_1=configuration_2.next()){if("compound"!==(s=configuration_2_1.value).type||adjList.get(s)&&adjList.get(s).length){if("parallel"===s.type)try{for(var _e=(e_3=void 0,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(getChildren(s))),_f=_e.next();!_f.done;_f=_e.next()){var child=_f.value;configuration.has(child)||(configuration.add(child),prevAdjList.get(child)?prevAdjList.get(child).forEach((function(sn){return configuration.add(sn)})):child.initialStateNodes.forEach((function(sn){return configuration.add(sn)})))}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_f&&!_f.done&&(_c=_e.return)&&_c.call(_e)}finally{if(e_3)throw e_3.error}}}else prevAdjList.get(s)?prevAdjList.get(s).forEach((function(sn){return configuration.add(sn)})):s.initialStateNodes.forEach((function(sn){return configuration.add(sn)}))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{configuration_2_1&&!configuration_2_1.done&&(_b=configuration_2.return)&&_b.call(configuration_2)}finally{if(e_2)throw e_2.error}}try{for(var configuration_3=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(configuration),configuration_3_1=configuration_3.next();!configuration_3_1.done;configuration_3_1=configuration_3.next()){var s;for(m=(s=configuration_3_1.value).parent;m&&!configuration.has(m);)configuration.add(m),m=m.parent}}catch(e_4_1){e_4={error:e_4_1}}finally{try{configuration_3_1&&!configuration_3_1.done&&(_d=configuration_3.return)&&_d.call(configuration_3)}finally{if(e_4)throw e_4.error}}return configuration}function getValueFromAdj(baseNode,adjList){var childStateNodes=adjList.get(baseNode);if(!childStateNodes)return{};if("compound"===baseNode.type){var childStateNode=childStateNodes[0];if(!childStateNode)return{};if(isLeafNode(childStateNode))return childStateNode.key}var stateValue={};return childStateNodes.forEach((function(csn){stateValue[csn.key]=getValueFromAdj(csn,adjList)})),stateValue}function getAdjList(configuration){var e_5,_a,adjList=new Map;try{for(var configuration_4=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(configuration),configuration_4_1=configuration_4.next();!configuration_4_1.done;configuration_4_1=configuration_4.next()){var s=configuration_4_1.value;adjList.has(s)||adjList.set(s,[]),s.parent&&(adjList.has(s.parent)||adjList.set(s.parent,[]),adjList.get(s.parent).push(s))}}catch(e_5_1){e_5={error:e_5_1}}finally{try{configuration_4_1&&!configuration_4_1.done&&(_a=configuration_4.return)&&_a.call(configuration_4)}finally{if(e_5)throw e_5.error}}return adjList}function getValue(rootNode,configuration){return getValueFromAdj(rootNode,getAdjList(getConfiguration([rootNode],configuration)))}function has(iterable,item){return Array.isArray(iterable)?iterable.some((function(member){return member===item})):iterable instanceof Set&&iterable.has(item)}function nextEvents(configuration){return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.fX)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.zs)(new Set((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Bq)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.fX)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.zs)(configuration.map((function(sn){return sn.ownEvents}))),!1)))),!1)}function isInFinalState(configuration,stateNode){return"compound"===stateNode.type?getChildren(stateNode).some((function(s){return"final"===s.type&&has(configuration,s)})):"parallel"===stateNode.type&&getChildren(stateNode).every((function(sn){return isInFinalState(configuration,sn)}))}function getMeta(configuration){return void 0===configuration&&(configuration=[]),configuration.reduce((function(acc,stateNode){return void 0!==stateNode.meta&&(acc[stateNode.id]=stateNode.meta),acc}),{})}function getTagsFromConfiguration(configuration){return new Set((0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.Bq)(configuration.map((function(sn){return sn.tags}))))}},"./node_modules/xstate/es/types.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var ActionTypes,SpecialTargets;__webpack_require__.d(__webpack_exports__,{Q:()=>ActionTypes,i:()=>SpecialTargets}),function(ActionTypes){ActionTypes.Start="xstate.start",ActionTypes.Stop="xstate.stop",ActionTypes.Raise="xstate.raise",ActionTypes.Send="xstate.send",ActionTypes.Cancel="xstate.cancel",ActionTypes.NullEvent="",ActionTypes.Assign="xstate.assign",ActionTypes.After="xstate.after",ActionTypes.DoneState="done.state",ActionTypes.DoneInvoke="done.invoke",ActionTypes.Log="xstate.log",ActionTypes.Init="xstate.init",ActionTypes.Invoke="xstate.invoke",ActionTypes.ErrorExecution="error.execution",ActionTypes.ErrorCommunication="error.communication",ActionTypes.ErrorPlatform="error.platform",ActionTypes.ErrorCustom="xstate.error",ActionTypes.Update="xstate.update",ActionTypes.Pure="xstate.pure",ActionTypes.Choose="xstate.choose"}(ActionTypes||(ActionTypes={})),function(SpecialTargets){SpecialTargets.Parent="#_parent",SpecialTargets.Internal="#_internal"}(SpecialTargets||(SpecialTargets={}))},"./node_modules/xstate/es/utils.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$X:()=>isPromiseLike,$r:()=>toArray,A9:()=>mapContext,AT:()=>isObservable,Ae:()=>path,Ai:()=>isMachine,BY:()=>updateHistoryValue,Bq:()=>flatten,En:()=>reportUnhandledExceptionOnInvocation,Gx:()=>isRaisableAction,HK:()=>matchesState,Kg:()=>isString,LG:()=>mapValues,M7:()=>isBuiltInEvent,R8:()=>warn,R_:()=>normalizeTarget,Tn:()=>isFunction,VQ:()=>nestedPath,WV:()=>toObserver,Xd:()=>toInvokeSource,Z8:()=>toGuard,_3:()=>isActor,_J:()=>toStatePath,at:()=>toStateValue,bm:()=>toStatePaths,cv:()=>createInvokeId,cy:()=>isArray,ft:()=>toSCXMLEvent,jB:()=>partition,jK:()=>toEventObject,lx:()=>isBehavior,oc:()=>toTransitionConfigArray,r_:()=>updateContext,re:()=>evaluateGuard,rp:()=>mapFilterValues,s7:()=>symbolObservable,vd:()=>getEventType,zr:()=>pathToStateValue});var _a,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/xstate/es/_virtual/_tslib.js"),_types_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/xstate/es/types.js"),_actionTypes_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/xstate/es/actionTypes.js"),_constants_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/xstate/es/constants.js"),_environment_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/xstate/es/environment.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function matchesState(parentStateId,childStateId,delimiter){void 0===delimiter&&(delimiter=_constants_js__WEBPACK_IMPORTED_MODULE_0__.AD);var parentStateValue=toStateValue(parentStateId,delimiter),childStateValue=toStateValue(childStateId,delimiter);return isString(childStateValue)?!!isString(parentStateValue)&&childStateValue===parentStateValue:isString(parentStateValue)?parentStateValue in childStateValue:Object.keys(parentStateValue).every((function(key){return key in childStateValue&&matchesState(parentStateValue[key],childStateValue[key])}))}function getEventType(event){try{return isString(event)||"number"==typeof event?"".concat(event):event.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(stateId,delimiter){try{return isArray(stateId)?stateId:stateId.toString().split(delimiter)}catch(e){throw new Error("'".concat(stateId,"' is not a valid state path."))}}function toStateValue(stateValue,delimiter){return function isStateLike(state){return"object"==typeof state&&"value"in state&&"context"in state&&"event"in state&&"_event"in state}(stateValue)?stateValue.value:isArray(stateValue)?pathToStateValue(stateValue):"string"!=typeof stateValue?stateValue:pathToStateValue(toStatePath(stateValue,delimiter))}function pathToStateValue(statePath){if(1===statePath.length)return statePath[0];for(var value={},marker=value,i=0;i<statePath.length-1;i++)i===statePath.length-2?marker[statePath[i]]=statePath[i+1]:(marker[statePath[i]]={},marker=marker[statePath[i]]);return value}function mapValues(collection,iteratee){for(var result={},collectionKeys=Object.keys(collection),i=0;i<collectionKeys.length;i++){var key=collectionKeys[i];result[key]=iteratee(collection[key],key,collection,i)}return result}function mapFilterValues(collection,iteratee,predicate){var e_1,_a,result={};try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(Object.keys(collection)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,item=collection[key];predicate(item)&&(result[key]=iteratee(item,key,collection))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return result}var path=function(props){return function(object){var e_2,_a,result=object;try{for(var props_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(props),props_1_1=props_1.next();!props_1_1.done;props_1_1=props_1.next()){result=result[props_1_1.value]}}catch(e_2_1){e_2={error:e_2_1}}finally{try{props_1_1&&!props_1_1.done&&(_a=props_1.return)&&_a.call(props_1)}finally{if(e_2)throw e_2.error}}return result}};function nestedPath(props,accessorProp){return function(object){var e_3,_a,result=object;try{for(var props_2=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(props),props_2_1=props_2.next();!props_2_1.done;props_2_1=props_2.next()){var prop=props_2_1.value;result=result[accessorProp][prop]}}catch(e_3_1){e_3={error:e_3_1}}finally{try{props_2_1&&!props_2_1.done&&(_a=props_2.return)&&_a.call(props_2)}finally{if(e_3)throw e_3.error}}return result}}function toStatePaths(stateValue){return stateValue?isString(stateValue)?[[stateValue]]:flatten(Object.keys(stateValue).map((function(key){var subStateValue=stateValue[key];return"string"==typeof subStateValue||subStateValue&&Object.keys(subStateValue).length?toStatePaths(stateValue[key]).map((function(subPath){return[key].concat(subPath)})):[[key]]}))):[[]]}function flatten(array){var _a;return(_a=[]).concat.apply(_a,(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.fX)([],(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.zs)(array),!1))}function toArrayStrict(value){return isArray(value)?value:[value]}function toArray(value){return void 0===value?[]:toArrayStrict(value)}function mapContext(mapper,context,_event){var e_5,_a;if(isFunction(mapper))return mapper(context,_event.data);var result={};try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(Object.keys(mapper)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,subMapper=mapper[key];isFunction(subMapper)?result[key]=subMapper(context,_event.data):result[key]=subMapper}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}return result}function isBuiltInEvent(eventType){return/^(done|error)\./.test(eventType)}function isPromiseLike(value){return value instanceof Promise||!(null===value||!isFunction(value)&&"object"!=typeof value||!isFunction(value.then))}function isBehavior(value){return null!==value&&"object"==typeof value&&"transition"in value&&"function"==typeof value.transition}function partition(items,predicate){var e_6,_a,_b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.zs)([[],[]],2),truthy=_b[0],falsy=_b[1];try{for(var items_1=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(items),items_1_1=items_1.next();!items_1_1.done;items_1_1=items_1.next()){var item=items_1_1.value;predicate(item)?truthy.push(item):falsy.push(item)}}catch(e_6_1){e_6={error:e_6_1}}finally{try{items_1_1&&!items_1_1.done&&(_a=items_1.return)&&_a.call(items_1)}finally{if(e_6)throw e_6.error}}return[truthy,falsy]}function updateHistoryStates(hist,stateValue){return mapValues(hist.states,(function(subHist,key){if(subHist){var subStateValue=(isString(stateValue)?void 0:stateValue[key])||(subHist?subHist.current:void 0);if(subStateValue)return{current:subStateValue,states:updateHistoryStates(subHist,subStateValue)}}}))}function updateHistoryValue(hist,stateValue){return{current:stateValue,states:updateHistoryStates(hist,stateValue)}}function updateContext(context,_event,assignActions,state){_environment_js__WEBPACK_IMPORTED_MODULE_2__.p||warn(!!context,"Attempting to update undefined context");var updatedContext=context?assignActions.reduce((function(acc,assignAction){var e_7,_a,assignment=assignAction.assignment,meta={state,action:assignAction,_event},partialUpdate={};if(isFunction(assignment))partialUpdate=assignment(acc,_event.data,meta);else try{for(var _b=(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Ju)(Object.keys(assignment)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value,propAssignment=assignment[key];partialUpdate[key]=isFunction(propAssignment)?propAssignment(acc,_event.data,meta):propAssignment}}catch(e_7_1){e_7={error:e_7_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_7)throw e_7.error}}return Object.assign({},acc,partialUpdate)}),context):context;return updatedContext}var warn=function(){};function isArray(value){return Array.isArray(value)}function isFunction(value){return"function"==typeof value}function isString(value){return"string"==typeof value}function toGuard(condition,guardMap){if(condition)return isString(condition)?{type:_constants_js__WEBPACK_IMPORTED_MODULE_0__.hS,name:condition,predicate:guardMap?guardMap[condition]:void 0}:isFunction(condition)?{type:_constants_js__WEBPACK_IMPORTED_MODULE_0__.hS,name:condition.name,predicate:condition}:condition}function isObservable(value){try{return"subscribe"in value&&isFunction(value.subscribe)}catch(e){return!1}}_environment_js__WEBPACK_IMPORTED_MODULE_2__.p||(warn=function(condition,message){var error=condition instanceof Error?condition:void 0;if((error||!condition)&&void 0!==console){var args=["Warning: ".concat(message)];error&&args.push(error),console.warn.apply(console,args)}});var symbolObservable=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();(_a={})[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};function isMachine(value){return!!value&&"__xstatenode"in value}function isActor(value){return!!value&&"function"==typeof value.send}function toEventObject(event,payload){return isString(event)||"number"==typeof event?(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)({type:event},payload):event}function toSCXMLEvent(event,scxmlEvent){if(!isString(event)&&"$$type"in event&&"scxml"===event.$$type)return event;var eventObject=toEventObject(event);return(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)({name:eventObject.type,data:eventObject,$$type:"scxml",type:"external"},scxmlEvent)}function toTransitionConfigArray(event,configLike){return toArrayStrict(configLike).map((function(transitionLike){return void 0===transitionLike||"string"==typeof transitionLike||isMachine(transitionLike)?{target:transitionLike,event}:(0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)((0,_virtual_tslib_js__WEBPACK_IMPORTED_MODULE_1__.Cl)({},transitionLike),{event})}))}function normalizeTarget(target){if(void 0!==target&&target!==_constants_js__WEBPACK_IMPORTED_MODULE_0__.$D)return toArray(target)}function reportUnhandledExceptionOnInvocation(originalError,currentError,id){if(!_environment_js__WEBPACK_IMPORTED_MODULE_2__.p){var originalStackTrace=originalError.stack?" Stacktrace was '".concat(originalError.stack,"'"):"";if(originalError===currentError)console.error("Missing onError handler for invocation '".concat(id,"', error was '").concat(originalError,"'.").concat(originalStackTrace));else{var stackTrace=currentError.stack?" Stacktrace was '".concat(currentError.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(id,"'. ")+"Original error: '".concat(originalError,"'. ").concat(originalStackTrace," Current error is '").concat(currentError,"'.").concat(stackTrace))}}}function evaluateGuard(machine,guard,context,_event,state){var guards=machine.options.guards,guardMeta={state,cond:guard,_event};if(guard.type===_constants_js__WEBPACK_IMPORTED_MODULE_0__.hS)return((null==guards?void 0:guards[guard.name])||guard.predicate)(context,_event.data,guardMeta);var condFn=null==guards?void 0:guards[guard.type];if(!condFn)throw new Error("Guard '".concat(guard.type,"' is not implemented on machine '").concat(machine.id,"'."));return condFn(context,_event.data,guardMeta)}function toInvokeSource(src){return"string"==typeof src?{type:src}:src}function toObserver(nextHandler,errorHandler,completionHandler){var noop=function(){},isObserver="object"==typeof nextHandler,self=isObserver?nextHandler:null;return{next:((isObserver?nextHandler.next:nextHandler)||noop).bind(self),error:((isObserver?nextHandler.error:errorHandler)||noop).bind(self),complete:((isObserver?nextHandler.complete:completionHandler)||noop).bind(self)}}function createInvokeId(stateNodeId,index){return"".concat(stateNodeId,":invocation[").concat(index,"]")}function isRaisableAction(action){return(action.type===_actionTypes_js__WEBPACK_IMPORTED_MODULE_3__.xl||action.type===_actionTypes_js__WEBPACK_IMPORTED_MODULE_3__.tN&&action.to===_types_js__WEBPACK_IMPORTED_MODULE_4__.i.Internal)&&"number"!=typeof action.delay}}}]);