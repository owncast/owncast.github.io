"use strict";(self.webpackChunkowncast_docusaurus=self.webpackChunkowncast_docusaurus||[]).push([[8991],{28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>l});var n=s(96540);const i={},r=n.createContext(i);function a(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:t},e.children)}},50953:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"api/apis","title":"APIs & Access Tokens","description":"Learn about access tokens and APIs","source":"@site/docs/api/apis.md","sourceDirName":"api","slug":"/api/apis","permalink":"/docs/api/apis","draft":false,"unlisted":false,"editUrl":"https://github.com/owncast/owncast.github.io/edit/main/docs/api/apis.md","tags":[],"version":"current","sidebarPosition":48,"frontMatter":{"title":"APIs & Access Tokens","description":"Learn about access tokens and APIs","sidebar_position":48,"date":"2020-11-17T19:11:42.000Z"},"sidebar":"docs","previous":{"title":"HAProxy","permalink":"/docs/sslproxies/haproxy"},"next":{"title":"Webhooks","permalink":"/docs/api/webhooks"}}');var i=s(74848),r=s(28453);const a={title:"APIs & Access Tokens",description:"Learn about access tokens and APIs",sidebar_position:48,date:new Date("2020-11-17T19:11:42.000Z")},l=void 0,c={},o=[{value:"Your code",id:"your-code",level:3},{value:"Test sending chat messages",id:"test-sending-chat-messages",level:3}];function d(e){const t={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"We currently support the following actions you can make via requests from your code."}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Event"}),(0,i.jsx)(t.th,{style:{textAlign:"center"},children:"Endpoint"}),(0,i.jsx)(t.th,{style:{textAlign:"right"},children:"Scope"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"System chat message"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1streamtitle/post",children:"/api/integrations/chat/system"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Standard chat message"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1send/post",children:"/api/integrations/chat/send"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"CAN_SEND_MESSAGES"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Chat action"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1user/post",children:"/api/integrations/chat/action"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Remove chat message"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1updatemessagevisibility/post",children:"/api/integrations/chat/messagevisibility"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Get chat history"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat/get",children:"/api/integrations/chat"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Get connected clients"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1clients/get",children:"/api/integrations/clients"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Set stream title"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1streamtitle/post",children:"/api/integrations/streamtitle"})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"system message to client"}),(0,i.jsx)(t.td,{style:{textAlign:"center"},children:(0,i.jsxs)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1system~1client~1{clientId}/post",children:["/api/integrations/chat/system/client/",(0,i.jsx)(t.code,{children:"{clientId}"})]})}),(0,i.jsx)(t.td,{style:{textAlign:"right"},children:(0,i.jsx)(t.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"Visit the API documentation for each endpoint to learn more about what values are expected or will be returned."}),(0,i.jsx)(t.td,{style:{textAlign:"center"}}),(0,i.jsx)(t.td,{style:{textAlign:"right"}})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"Your Owncast server will only accept actions from requests with a valid Access Token. Follow the below steps to create an access token."}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["visit ",(0,i.jsx)(t.code,{children:"/admin/access-tokens"})," on your owncast server."]}),"\n",(0,i.jsxs)(t.li,{children:["Click ",(0,i.jsx)(t.code,{children:"Create Access Token"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"Select the scope of permissions you want to give this token."}),"\n",(0,i.jsx)(t.li,{children:"Save this access token."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"your-code",children:"Your code"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Create a new request in your code."}),"\n",(0,i.jsxs)(t.li,{children:["This request should send headers with ",(0,i.jsx)(t.code,{children:"Authorization: Bearer"})," and your access token."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Example request:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:'{\n    headers: {\n        "Content-Type": "application/json",\n        "Authorization": "Bearer " + YOUR_ACCESS_TOKEN\n    },\n    body: JSON.stringify({ body: "this is a system chat message" })\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"test-sending-chat-messages",children:"Test sending chat messages"}),"\n",(0,i.jsxs)(t.p,{children:["Change the following ",(0,i.jsx)(t.code,{children:"curl"}),' command to point to your server URL and use your auth token with "system message" access. It will send a system message to your chat.']}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer YOURAUTHTOKEN" -d \'{"body": "I am a system message!"}\' http://YOUR.OWNCAST.SERVER/api/integrations/chat/system\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);