"use strict";(self.webpackChunkowncast_docusaurus=self.webpackChunkowncast_docusaurus||[]).push([[2006],{25240:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"sslproxies/caddy","title":"Caddy","description":"Caddy is possibly the fastest way to setup a SSL proxy.","source":"@site/docs/sslproxies/caddy.md","sourceDirName":"sslproxies","slug":"/sslproxies/caddy","permalink":"/docs/sslproxies/caddy","draft":false,"unlisted":false,"editUrl":"https://github.com/owncast/owncast.github.io/edit/main/docs/sslproxies/caddy.md","tags":[],"version":"current","sidebarPosition":70,"frontMatter":{"title":"Caddy","description":"Caddy is possibly the fastest way to setup a SSL proxy.","sidebar_position":70},"sidebar":"docs","previous":{"title":"Content Delivery Networks (CDNs)","permalink":"/docs/cdns"},"next":{"title":"NGINX","permalink":"/docs/sslproxies/nginx"}}');var n=t(74848),o=t(28453);const a={title:"Caddy",description:"Caddy is possibly the fastest way to setup a SSL proxy.",sidebar_position:70},i=void 0,d={},c=[{value:"1. Make sure you don&#39;t have other web servers running.",id:"1-make-sure-you-dont-have-other-web-servers-running",level:2},{value:"2. Install Caddy",id:"2-install-caddy",level:2},{value:"3. Run Caddy as a reverse proxy",id:"3-run-caddy-as-a-reverse-proxy",level:2},{value:"4. Run Owncast normally",id:"4-run-owncast-normally",level:2},{value:"5. Access Owncast through the proxy",id:"5-access-owncast-through-the-proxy",level:2}];function l(e){const s={a:"a",code:"code",em:"em",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components},{Details:t}=s;return t||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://caddyserver.com/",children:"Caddy"})," is the fastest way to setup a SSL reverse proxy with a free certificate from ",(0,n.jsx)(s.a,{href:"https://letsencrypt.org/",children:"Let's Encrypt"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["While we will try to walk you through some installation steps ",(0,n.jsxs)(s.strong,{children:["it is highly suggested you follow Caddy's ",(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/install",children:"Install options"})," and ",(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/quick-starts/reverse-proxy",children:"Reverse Proxy Quickstart"})," for more documentation, examples and detailed information"]}),". Caddy is a well documented quality piece of software that you should get familiar with if you need to run a SSL reverse proxy."]}),"\n",(0,n.jsx)(s.h2,{id:"1-make-sure-you-dont-have-other-web-servers-running",children:"1. Make sure you don't have other web servers running."}),"\n",(0,n.jsx)(s.p,{children:"If you are running other pieces of web server software such as Apache or NGINX using port 80 or 443 then you won't be able to continue with this Caddy install. Either remove the other pieces of software or read up on how to make them live in harmony."}),"\n",(0,n.jsx)(s.h2,{id:"2-install-caddy",children:"2. Install Caddy"}),"\n",(0,n.jsx)(s.p,{children:"Depending on your system there may be different options on installing. Using APT is suggested if it's supported on your machine."}),"\n",(0,n.jsxs)(t,{children:[(0,n.jsx)("summary",{children:"Using APT (recommended) "}),(0,n.jsx)(s.p,{children:"Installing this package automatically starts and runs Caddy for you as a systemd service so it will automatically run Caddy each time you start your machine."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list\nsudo apt update\nsudo apt install caddy\n"})}),(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/install#debian-ubuntu-raspbian",children:"Read the Caddy install steps for using apt"})," for more details."]})]}),"\n",(0,n.jsxs)(t,{children:[(0,n.jsx)("summary",{children:"Download manually"}),(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.a,{href:"https://github.com/caddyserver/caddy/releases",children:"Visit the releases page"}),' and expand the "assets" section.']}),"\n",(0,n.jsx)(s.li,{children:"Find the version for your platform and operating system."}),"\n",(0,n.jsxs)(s.li,{children:["Unarchive the file: ",(0,n.jsx)(s.code,{children:"tar -xvzf caddy_2.3.0_linux_amd64.tar.gz"})]}),"\n",(0,n.jsxs)(s.li,{children:["You're likely to want to setup Caddy as a system service to auatomatically start in the background.  ",(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/install#linux-service",children:"Learn how to do this"}),".\n",(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/install#static-binaries",children:"Read the Caddy download page for more details."})]}),"\n"]})]}),"\n",(0,n.jsx)(s.h2,{id:"3-run-caddy-as-a-reverse-proxy",children:"3. Run Caddy as a reverse proxy"}),"\n",(0,n.jsxs)(t,{children:[(0,n.jsx)("summary",{children:"Single command line"}),(0,n.jsx)(s.p,{children:"It offers automatic configuration of HTTPS with a single command."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"caddy reverse-proxy --from owncast.mydomain.com --to 127.0.0.1:8080\n"})}),(0,n.jsxs)(s.p,{children:["Replace ",(0,n.jsx)(s.code,{children:"owncast.mydomain.com"})," with the public hostname of your Owncast server like ",(0,n.jsx)(s.code,{children:"watch.owncast.online"})," for example."]}),(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/quick-starts/reverse-proxy",children:"Read the Caddy reverse proxy documentation for more details."})})]}),"\n",(0,n.jsxs)(t,{children:[(0,n.jsx)("summary",{children:"Caddyfile"}),(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.a,{href:"https://caddyserver.com/docs/caddyfile",children:"Caddyfile"})," is Caddy's config file."]}),(0,n.jsx)(s.p,{children:"Add to your Caddyfile:"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"owncast.mydomain.com {\n  encode gzip\n  reverse_proxy 127.0.0.1:8080\n  tls webmaster@mydomain.com\n}\n"})}),(0,n.jsxs)(s.p,{children:["Replace ",(0,n.jsx)(s.code,{children:"owncast.mydomain.com"})," with the public hostname of your Owncast server like ",(0,n.jsx)(s.code,{children:"watch.owncast.online"})," for example."]})]}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.p,{children:["If you specify ",(0,n.jsx)(s.code,{children:"owncast.mydomain.com"})," without a protocol or a port, it will attempt to use the default ",(0,n.jsx)(s.code,{children:"http"})," and ",(0,n.jsx)(s.code,{children:"https"})," ports (80 and 443). Since these are ",(0,n.jsx)(s.a,{href:"https://www.w3.org/Daemon/User/Installation/PrivilegedPorts.html#:~:text=Priviliged%20ports,has%20put%20up%20for%20you.",children:(0,n.jsx)(s.em,{children:"privileged ports"})}),", you will need to run caddy with ",(0,n.jsx)(s.code,{children:"sudo"})," or as ",(0,n.jsx)(s.code,{children:"root"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"4-run-owncast-normally",children:"4. Run Owncast normally"}),"\n",(0,n.jsx)(s.p,{children:"Continue to run Owncast on port 8080."}),"\n",(0,n.jsx)(s.h2,{id:"5-access-owncast-through-the-proxy",children:"5. Access Owncast through the proxy"}),"\n",(0,n.jsx)(s.hr,{}),"\n",(0,n.jsxs)(s.p,{children:["You should now be able to access your Owncast server by visiting ",(0,n.jsx)(s.a,{href:"https://owncast.mydomain.com",children:"https://owncast.mydomain.com"})," instead of ",(0,n.jsx)(s.a,{href:"http://owncast.mydomain.com:8080",children:"http://owncast.mydomain.com:8080"}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Replace ",(0,n.jsx)(s.code,{children:"owncast.mydomain.com"})," with the public hostname of your Owncast server like ",(0,n.jsx)(s.code,{children:"watch.owncast.online"})," for example."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>i});var r=t(96540);const n={},o=r.createContext(n);function a(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);