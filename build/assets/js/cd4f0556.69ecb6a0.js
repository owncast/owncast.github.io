"use strict";(self.webpackChunkowncast_docusaurus=self.webpackChunkowncast_docusaurus||[]).push([[5684],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var o=t(96540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}},84499:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"sslproxies/nginx","title":"NGINX","description":"NGINX is a very popular solution for SSL proxying.","source":"@site/docs/sslproxies/nginx.md","sourceDirName":"sslproxies","slug":"/sslproxies/nginx","permalink":"/docs/sslproxies/nginx","draft":false,"unlisted":false,"editUrl":"https://github.com/owncast/owncast.github.io/edit/main/docs/sslproxies/nginx.md","tags":[],"version":"current","sidebarPosition":80,"frontMatter":{"title":"NGINX","description":"NGINX is a very popular solution for SSL proxying.","sidebar_position":80},"sidebar":"docs","previous":{"title":"Caddy","permalink":"/docs/sslproxies/caddy"},"next":{"title":"Apache","permalink":"/docs/sslproxies/apache"}}');var s=t(74848),r=t(28453);const i={title:"NGINX",description:"NGINX is a very popular solution for SSL proxying.",sidebar_position:80},a=void 0,c={},d=[{value:"Websockets",id:"websockets",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["NGINX is a popular web server used as a reverse proxy with free Let's Encrypt certificates. Visit the ",(0,s.jsx)(n.a,{href:"https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/",children:"official documentation"})," for detailed instructions."]}),"\n",(0,s.jsx)(n.h2,{id:"websockets",children:"Websockets"}),"\n",(0,s.jsxs)(n.p,{children:["People often look over the need to tell NGINX to proxy websockets correctly, leading to chat being disabled. Please read the quick ",(0,s.jsx)(n.a,{href:"https://nginx.org/en/docs/http/websocket.html",children:"documentation by nginx around websocket support"})," to make sure you're doing it properly."]}),"\n",(0,s.jsxs)(n.p,{children:["Essentially, you'll need to edit ",(0,s.jsx)(n.code,{children:"/etc/nginx/nginx.conf"})," to add the following map block to the http section"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",children:"http {\n  ...\n  map $http_upgrade $connection_upgrade {\n      default upgrade;\n      ''      close;\n  }\n  ...\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You'll end up with a configuration that looks somewhat like the following when you're done setting up NGINX. The below should be added to ",(0,s.jsx)(n.code,{children:"/etc/nginx/sites-available/my.site.com.conf"})," and enabled with ",(0,s.jsx)(n.code,{children:"ln /etc/nginx/sites-available/my.site.com.conf /etc/nginx/sites-enabled/my.site.com.conf"})," and tested with ",(0,s.jsx)(n.code,{children:"sudo nginx -t"}),", then restarted ",(0,s.jsx)(n.code,{children:"sudo service nginx restart"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-nginx",children:"server {\n    server_name owncast.yourdomain.com;\n    listen 443 ssl;\n    ssl_certificate /etc/letsencrypt/live/yourdomain.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/yourdomain.com/privkey.pem;\n    include /etc/letsencrypt/options-ssl-nginx.conf;\n    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;\n\n    location / {\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-Host $host;\n        proxy_set_header X-Forwarded-Server $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_set_header  Authorization $http_authorization;\n        proxy_pass_header Authorization;\n        proxy_pass http://127.0.0.1:8080;\n    }\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);