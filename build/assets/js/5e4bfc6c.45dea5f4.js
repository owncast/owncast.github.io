"use strict";(self.webpackChunkowncast_docusaurus=self.webpackChunkowncast_docusaurus||[]).push([[8783],{28453:(t,e,s)=>{s.d(e,{R:()=>a,x:()=>l});var n=s(96540);const i={},r=n.createContext(i);function a(t){const e=n.useContext(r);return n.useMemo(function(){return"function"==typeof t?t(e):{...e,...t}},[e,t])}function l(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:a(t.components),n.createElement(r.Provider,{value:e},t.children)}},41202:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"thirdparty/apis","title":"APIs & Access Tokens","description":"Learn about access tokens and APIs","source":"@site/docs/thirdparty/apis.md","sourceDirName":"thirdparty","slug":"/thirdparty/apis","permalink":"/docs/thirdparty/apis","draft":false,"unlisted":false,"editUrl":"https://github.com/owncast/owncast.github.io/edit/main/docs/thirdparty/apis.md","tags":[],"version":"current","frontMatter":{"title":"APIs & Access Tokens","description":"Learn about access tokens and APIs","date":"2020-11-17T19:11:42.000Z","lastmod":"2020-11-17T19:11:42.000Z","draft":false,"images":[],"weight":48,"toc":true,"type":"subpages"}}');var i=s(74848),r=s(28453);const a={title:"APIs & Access Tokens",description:"Learn about access tokens and APIs",date:new Date("2020-11-17T19:11:42.000Z"),lastmod:new Date("2020-11-17T19:11:42.000Z"),draft:!1,images:[],weight:48,toc:!0,type:"subpages"},l=void 0,c={},d=[{value:"Your code",id:"your-code",level:3},{value:"Test sending chat messages",id:"test-sending-chat-messages",level:3}];function o(t){const e={code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"We currently support the following actions you can make via requests from your code."}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{style:{textAlign:"left"},children:"Event"}),(0,i.jsx)(e.th,{style:{textAlign:"center"},children:"Endpoint"}),(0,i.jsx)(e.th,{style:{textAlign:"right"},children:"Scope"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"System chat message"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1streamtitle/post",children:"/api/integrations/chat/system"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Standard chat message"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1send/post",children:"/api/integrations/chat/send"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"CAN_SEND_MESSAGES"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Chat action"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1user/post",children:"/api/integrations/chat/action"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Remove chat message"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1updatemessagevisibility/post",children:"/api/integrations/chat/messagevisibility"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Get chat history"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat/get",children:"/api/integrations/chat"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Get connected clients"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1clients/get",children:"/api/integrations/clients"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Set stream title"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsx)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1streamtitle/post",children:"/api/integrations/streamtitle"})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"HAS_ADMIN_ACCESS"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"system message to client"}),(0,i.jsx)(e.td,{style:{textAlign:"center"},children:(0,i.jsxs)("a",{href:"/api/latest/#tag/Integrations/paths/~1api~1integrations~1chat~1system~1client~1{'{'}clientId{'}'}/post",children:["/api/integrations/chat/system/client/","{","clientId","}"]})}),(0,i.jsx)(e.td,{style:{textAlign:"right"},children:(0,i.jsx)(e.code,{children:"CAN_SEND_SYSTEM_MESSAGES"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{style:{textAlign:"left"},children:"Visit the API documentation for each endpoint to learn more about what values are expected or will be returned."}),(0,i.jsx)(e.td,{style:{textAlign:"center"}}),(0,i.jsx)(e.td,{style:{textAlign:"right"}})]})]})]}),"\n",(0,i.jsx)(e.p,{children:"Your Owncast server will only accept actions from requests with a valid Access Token. Follow the below steps to create an access token."}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["visit ",(0,i.jsx)(e.code,{children:"/admin/access-tokens"})," on your owncast server."]}),"\n",(0,i.jsxs)(e.li,{children:["Click ",(0,i.jsx)(e.code,{children:"Create Access Token"}),"."]}),"\n",(0,i.jsx)(e.li,{children:"Select the scope of permissions you want to give this token."}),"\n",(0,i.jsx)(e.li,{children:"Save this access token."}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"your-code",children:"Your code"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Create a new request in your code."}),"\n",(0,i.jsxs)(e.li,{children:["This request should send headers with ",(0,i.jsx)(e.code,{children:"Authorization: Bearer"})," and your access token."]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Example request:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'{\n    headers: {\n        Content-Type: "application/json",\n        Authorization: "Bearer " + YOUR_ACCESS_TOKEN\n    },\n    { body: "this is a system chat message" }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"test-sending-chat-messages",children:"Test sending chat messages"}),"\n",(0,i.jsxs)(e.p,{children:["Change the following ",(0,i.jsx)(e.code,{children:"curl"}),' command to point to your server URL and use your auth token with "system message" access. It will send a system message to your chat.']}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:'curl -X POST -H "Content-Type: application/json" -H "Authorization: Bearer YOURAUTHTOKEN" -d \'{"body": "I am a system message!"}\' http://YOUR.OWNCAST.SERVER/api/integrations/chat/system\n\n'})})]})}function h(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(o,{...t})}):o(t)}}}]);