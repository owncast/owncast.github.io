@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('./variables.css');

/* Root brand tokens (adjust to your brand) */
:root {
  /* Brand accent used for actions (buttons, highlights) */
  --theme-color-action: var(--color-owncast-palette-7); /* example purple accent */

  /* Brand foreground and background for light mode */
  --theme-color-foreground: var(--color-owncast-palette-0); /* primary text color (dark) */
  --theme-color-background: var(--color-owncast-palette-14);  /* page background (light) */

  /* Spacing and radius tokens (optional) */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;

  /* Tailwind/shadcn CSS variables for light mode (Owncast theme) */
  --background: 218 33% 96%;        /* #f0f3f8 - palette-14 light background */
  --foreground: 218 23% 9%;         /* #12161d - palette-0 dark primary */
  --card: 0 0% 100%;                /* white */
  --card-foreground: 218 23% 9%;    /* #12161d */
  --popover: 0 0% 100%;
  --popover-foreground: 218 23% 9%;
  --muted: 214 32% 91%;             /* #e2e8f0 - palette-3 */
  --muted-foreground: 235 10% 41%;  /* #5d5f72 - palette-10 neutral gray */
  --accent: 252 79% 95%;            /* Light purple tint */
  --accent-foreground: 252 79% 59%; /* #6544e9 - palette-6 purple */
  --destructive: 5 100% 61%;        /* #ff4b39 - error */
  --destructive-foreground: 0 0% 100%;
  --border: 214 32% 91%;            /* #e2e8f0 */
  --input: 214 32% 91%;
  --ring: 252 79% 59%;              /* #6544e9 - palette-6 purple */

  /* --ifm-menu-link-padding-vertical: 10px; */
}

/* Dark mode Tailwind/shadcn CSS variables (Owncast theme) */
[data-theme='dark'] {
  --background: 218 23% 9%;         /* #12161d - palette-0 dark primary */
  --foreground: 214 32% 91%;        /* #e2e8f0 - palette-3 light text */
  --card: 218 23% 23%;              /* #2D3748 - palette-1 dark secondary */
  --card-foreground: 214 32% 91%;   /* #e2e8f0 */
  --popover: 218 23% 23%;           /* #2D3748 */
  --popover-foreground: 214 32% 91%;
  --muted: 218 23% 23%;             /* #2D3748 */
  --muted-foreground: 214 20% 69%;  /* Lighter gray for muted text */
  --accent: 252 79% 20%;            /* Dark purple tint */
  --accent-foreground: 254 85% 66%; /* #7a5cf3 - palette-7 */
  --destructive: 5 70% 45%;         /* Darker error for dark mode */
  --destructive-foreground: 0 0% 100%;
  --border: 218 20% 20%;            /* Subtle border */
  --input: 218 20% 20%;
  --ring: 254 85% 66%;              /* #7a5cf3 - palette-7 */
}

/* Light mode overrides */
[data-theme='light'] {
  /* Primary color should be high-contrast on light backgrounds */
  --ifm-color-primary: var(--theme-color-foreground); /* darker shade for links/headings */
  --ifm-color-primary-dark: #111111;
  --ifm-color-primary-darker: #0c0c0c;
  --ifm-color-primary-light: #2a2a2a;
  --ifm-color-primary-lighter: #3a3a3a;

  /* Body and headings */
  --ifm-font-color-base: #222222;
  --ifm-heading-color: #111111;
  --ifm-link-color: var(--color-owncast-palette-6);

  /* Backgrounds */
  --ifm-background-color: var(--theme-color-background);
  --ifm-background-surface-color: #f7f7f9; /* subtle surface for cards */

  /* Navbar */
  --ifm-navbar-background-color: var(--color-owncast-palette-7);
  --ifm-navbar-link-color: var(--color-owncast-palette-3);
  --ifm-navbar-link-hover-color: var(--ifm-color-primary);

  /* Menus and sidebars */
  --ifm-menu-color: var(--theme-color-foreground);
  --ifm-menu-color-active: var(--ifm-color-primary);

  /* Buttons: keep action accent but ensure readable text */
  --ifm-button-color: #ffffff;
  --ifm-button-background-color: var(--theme-color-action);
  --ifm-button-hover-background-color: #6e3eff;

  /* Code blocks */
  --prism-background-color: #f5f7fa;
  --prism-color: #1a1a1a;
}

/* Dark mode overrides */
[data-theme='dark'] {
  /* Strong foreground text */
  --ifm-font-color-base: #e8eaed;
  --ifm-heading-color: #f5f7fa;

  /* Accessible accent for links/buttons on dark backgrounds */
  /* Replace with your brand’s dark-mode accent that meets contrast */
  --ifm-color-primary: #8ab4f8;
  --ifm-color-primary-dark: #6fa0f6;
  --ifm-color-primary-darker: #5a8cf2;
  --ifm-color-primary-light: #a5c6fb;
  --ifm-color-primary-lighter: #c4d8fd;

  /* Dark backgrounds */
  --ifm-background-color: #0f1115;
  --ifm-background-surface-color: #121417;

  /* Navbar and sidebar */
  --ifm-navbar-background-color: var(--color-owncast-palette-1);
  --ifm-navbar-link-color: var(--ifm-font-color-base);
  --ifm-navbar-link-hover-color: var(--ifm-color-primary);
  --ifm-menu-color: var(--ifm-font-color-base);
  --ifm-menu-color-active: var(--ifm-color-primary);

  /* Buttons */
  --ifm-button-color: #0b0d12;
  --ifm-button-background-color: var(--ifm-color-primary);
  --ifm-button-hover-background-color: var(--ifm-color-primary-dark);

  /* Code blocks */
  --prism-background-color: #0b0d12;
  --prism-color: #e8eaed;
}

/* Global resets to avoid “washed out” look in dark mode due to overlays/opacity/blur */
html[data-theme='dark'] .main-wrapper,
html[data-theme='dark'] .container,
html[data-theme='dark'] .theme-doc-markdown,
html[data-theme='dark'] .theme-doc-sidebar-container,
html[data-theme='dark'] .theme-doc-toc-desktop,
html[data-theme='dark'] .markdown {
  opacity: 1 !important;
  filter: none !important;
}

html[data-theme='dark'] .overlay,
html[data-theme='dark'] .backdrop,
html[data-theme='dark'] .glass,
html[data-theme='dark'] .blur,
html[data-theme='dark'] [class*='overlay'],
html[data-theme='dark'] [class*='backdrop'],
html[data-theme='dark'] [class*='glass'],
html[data-theme='dark'] [class*='blur'] {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: transparent !important;
  opacity: 1 !important;
}

/* Ensure base text color applies if something overrides body color */
html[data-theme='dark'] body {
  color: var(--ifm-font-color-base) !important;
}

/* Optional: ensure content surfaces don’t introduce unintended lightness in dark mode */
html[data-theme='dark'] .theme-doc-markdown,
html[data-theme='dark'] .card,
/* html[data-theme='dark'] .navbar, */
html[data-theme='dark'] .sidebar,
html[data-theme='dark'] .menu,
html[data-theme='dark'] .docMainWrapper {
  background-color: transparent !important;
}

/* Spacing/radius examples (optional) */
.button {
  border-radius: var(--radius-md);
}
.card {
  border-radius: var(--radius-lg);
}

/* GitHub icon in navbar */
.header-github-link::before {
  content: '';
  width: 24px;
  height: 24px;
  display: flex;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23ffffff' d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E")
    no-repeat;
}

[data-theme='dark'] .header-github-link::before {
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%23e8eaed' d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/%3E%3C/svg%3E")
    no-repeat;
}

/* Chat icon in navbar */
.header-chat-link::before {
  content: '';
  width: 24px;
  height: 24px;
  display: flex;
  background: url('/img/chat.svg') no-repeat center;
  background-size: contain;
  filter: brightness(0) invert(1);
}

[data-theme='dark'] .header-chat-link::before {
  filter: brightness(0) invert(0.9);
}

/* Hide Kapa.ai widget on mobile */
@media (max-width: 768px) {
  #kapa-widget-container {
    display: none !important;
  }
}

.theme-doc-sidebar-item-category-level-1 {
  padding-top: 4px;
}

/* Make top-level category names bold */
.theme-doc-sidebar-item-category-level-1 > .menu__list-item-collapsible > .menu__link {
  font-weight: 600;
  padding-top: 10px;
}

.menu__link {
  transition: padding 0.2s ease-in-out;
  font-weight: 400;
}

.menu__link--active {
  padding-top: 12px;
  padding-bottom: 12px;
  font-weight: bold;
  /* text-transform: uppercase; */
}