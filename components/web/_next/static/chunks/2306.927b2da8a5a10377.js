(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2306],{2306:function(e,t,n){"use strict";n.r(t),n.d(t,{UserDropdown:function(){return P}});var l=n(85893),o=n(70449),r=n(56469),i=n(93967),a=n.n(i),s=n(4480),u=n(67294),c=n(20927),d=n(5152),p=n.n(d),h=n(4511),f=n(28049),m=n(29223),v=n.n(m),y=n(69583);let b=p()(()=>Promise.all([n.e(3247),n.e(9036)]).then(n.t.bind(n,9036,23)),{loadableGenerated:{webpack:()=>[9036]},ssr:!1}),w=p()(()=>Promise.all([n.e(3247),n.e(3181)]).then(n.t.bind(n,93181,23)),{loadableGenerated:{webpack:()=>[93181]},ssr:!1}),g=p()(()=>Promise.all([n.e(3247),n.e(9712)]).then(n.t.bind(n,49712,23)),{loadableGenerated:{webpack:()=>[49712]},ssr:!1}),k=p()(()=>Promise.all([n.e(3247),n.e(795)]).then(n.t.bind(n,30795,23)),{loadableGenerated:{webpack:()=>[30795]},ssr:!1}),E=p()(()=>Promise.all([n.e(3247),n.e(3632)]).then(n.t.bind(n,43632,23)),{loadableGenerated:{webpack:()=>[43632]},ssr:!1}),L=p()(()=>Promise.all([n.e(3247),n.e(604)]).then(n.t.bind(n,50604,23)),{loadableGenerated:{webpack:()=>[50604]},ssr:!1}),C=p()(()=>Promise.all([n.e(3247),n.e(6681)]).then(n.t.bind(n,96681,23)),{loadableGenerated:{webpack:()=>[96681]},ssr:!1}),S=p()(()=>Promise.all([n.e(9675),n.e(1287),n.e(7786),n.e(4955)]).then(n.bind(n,4955)).then(e=>e.Modal),{loadableGenerated:{webpack:()=>[4955]},ssr:!1}),_=p()(()=>Promise.all([n.e(7561),n.e(83),n.e(1287),n.e(9904),n.e(7528),n.e(9023)]).then(n.bind(n,90666)).then(e=>e.NameChangeModal),{loadableGenerated:{webpack:()=>[90666]},ssr:!1}),x=p()(()=>Promise.all([n.e(6030),n.e(83),n.e(1287),n.e(3657),n.e(9307),n.e(9671),n.e(5042)]).then(n.bind(n,65042)).then(e=>e.AuthModal),{loadableGenerated:{webpack:()=>[65042]},ssr:!1}),P=e=>{let{id:t,username:n,hideTitleOnMobile:i=!1,showToggleChatOption:d=!0}=e,[p,m]=(0,u.useState)(!1),[P,j]=(0,u.useState)(!1),[G,D]=(0,s.FV)(f.vZ),[I,K]=(0,u.useState)(null),A=(0,s.sJ)(f.Q),N=()=>{d&&D(G===f.gG.VISIBLE?f.gG.HIDDEN:f.gG.VISIBLE)},O=()=>{m(!1)},T=()=>{I&&I.close(),K(null),D(f.gG.VISIBLE)},M=d&&A.chatAvailable&&(G===f.gG.HIDDEN||G===f.gG.VISIBLE),R=d&&A.chatAvailable&&(G===f.gG.HIDDEN||G===f.gG.VISIBLE||G===f.gG.POPPED_OUT);(0,c.y1)("c",N,{enableOnContentEditable:!1},[G===f.gG.VISIBLE]);let U=(0,s.sJ)(f.db);if(!U)return null;let{displayName:V}=U,q=[{key:0,icon:(0,l.jsx)(w,{}),label:"Change name",onClick:()=>{m(!0)}},{key:1,icon:(0,l.jsx)(g,{}),label:"Authenticate",onClick:()=>j(!0)}];return M&&q.push({key:3,"aria-expanded":G===f.gG.VISIBLE,className:v().chatToggle,icon:(0,l.jsx)(L,{}),label:G===f.gG.VISIBLE?"Hide Chat (c)":"Show Chat (c)",onClick:N}),R&&q.push({key:4,icon:I?(0,l.jsx)(k,{}):(0,l.jsx)(E,{}),label:I?"Put chat back":"Pop out chat",onClick:I?T:()=>{T();let e=window.open("/embed/chat/readwrite","_blank","popup");e.addEventListener("beforeunload",T),K(e),D(f.gG.POPPED_OUT)}}),(0,l.jsx)(h.SV,{fallbackRender:e=>{let{error:t,resetErrorBoundary:n}=e;return(0,l.jsx)(y.A,{componentName:"UserDropdown",message:t.message,retryFunction:n})},children:(0,l.jsxs)("div",{className:v().root,children:[(0,l.jsx)(o.Z,{menu:{items:q},trigger:["click"],children:(0,l.jsxs)(r.Z,{id:t,type:"primary",icon:(0,l.jsx)(C,{className:v().userIcon}),children:[(0,l.jsx)("span",{className:a()([v().username,i&&v().hideTitleOnMobile]),children:n||V}),(0,l.jsx)(b,{})]})}),(0,l.jsx)(S,{title:"Change Chat Display Name",open:p,handleCancel:O,children:(0,l.jsx)(_,{closeModal:O})}),(0,l.jsx)(S,{title:"Authenticate",open:P,handleCancel:()=>j(!1),children:(0,l.jsx)(x,{})})]})})}},29223:function(e){e.exports={root:"UserDropdown_root__XCKtE","ant-space":"UserDropdown_ant-space__NT8a9","ant-space-item":"UserDropdown_ant-space-item__D6AUQ",username:"UserDropdown_username__1vJf_",hideTitleOnMobile:"UserDropdown_hideTitleOnMobile__Nd7fp",chatToggle:"UserDropdown_chatToggle__MEP4e"}},20927:function(e,t,n){"use strict";n.d(t,{y1:function(){return E}});var l=n(67294);n(85893);let o=["shift","alt","meta","mod","ctrl","control"],r={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function i(e){return(r[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function a(e){return o.includes(e)}function s(e,t=","){return e.toLowerCase().split(t)}function u(e,t="+",n=">",l=!1,r){let a=[],s=!1;e.includes(n)?(s=!0,a=e.toLocaleLowerCase().split(n).map(e=>i(e))):a=e.toLocaleLowerCase().split(t).map(e=>i(e));let u={alt:a.includes("alt"),ctrl:a.includes("ctrl")||a.includes("control"),shift:a.includes("shift"),meta:a.includes("meta"),mod:a.includes("mod"),useKey:l},c=a.filter(e=>!o.includes(e));return{...u,keys:c,description:r,isSequence:s}}"u">typeof document&&(document.addEventListener("keydown",e=>{void 0!==e.code&&p([i(e.code)])}),document.addEventListener("keyup",e=>{void 0!==e.code&&h([i(e.code)])})),"u">typeof window&&(window.addEventListener("blur",()=>{c.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{c.clear()},0)}));let c=new Set;function d(e){return Array.isArray(e)}function p(e){let t=Array.isArray(e)?e:[e];c.has("meta")&&c.forEach(e=>!a(e)&&c.delete(e.toLowerCase())),t.forEach(e=>c.add(e.toLowerCase()))}function h(e){let t=Array.isArray(e)?e:[e];"meta"===e?c.clear():t.forEach(e=>c.delete(e.toLowerCase()))}function f(e,t=!1){let n;let{target:l,composed:o}=e;return n=l.tagName&&!l.tagName.startsWith("-")&&l.tagName.includes("-")&&o?e.composedPath()[0]&&e.composedPath()[0].tagName:l&&l.tagName,d(t)?!!(n&&t&&t.some(e=>e.toLowerCase()===n.toLowerCase())):!!(n&&t&&t)}let m=(e,t,n=!1)=>{let{alt:l,meta:o,mod:r,shift:a,ctrl:s,keys:u,useKey:p}=t,{code:h,key:f,ctrlKey:m,metaKey:v,shiftKey:y,altKey:b}=e,w=i(h);if(p&&(null==u?void 0:u.length)===1&&u.includes(f))return!0;if(!(null!=u&&u.includes(w))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(w))return!1;if(!n){if(l!==b&&"alt"!==w||a!==y&&"shift"!==w)return!1;if(r){if(!v&&!m)return!1}else if(o!==v&&"meta"!==w&&"os"!==w||s!==m&&"ctrl"!==w&&"control"!==w)return!1}return!!(u&&1===u.length&&u.includes(w))||(u?function(e,t=","){return(d(e)?e:e.split(t)).every(e=>c.has(e.trim().toLowerCase()))}(u):!u)},v=(0,l.createContext)(void 0),y=()=>(0,l.useContext)(v),b=(0,l.createContext)({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),w=()=>(0,l.useContext)(b),g=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},k="u">typeof window?l.useLayoutEffect:l.useEffect;function E(e,t,n,o){let r=(0,l.useRef)(null),c=(0,l.useRef)(!1),v=n instanceof Array?o instanceof Array?void 0:o:n,b=d(e)?e.join(null==v?void 0:v.delimiter):e,E=n instanceof Array?n:o instanceof Array?o:void 0,L=(0,l.useCallback)(t,E??[]),C=(0,l.useRef)(L);E?C.current=L:C.current=t;let S=function(e){let t=(0,l.useRef)(void 0);return function e(t,n){return t&&n&&"object"==typeof t&&"object"==typeof n?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce((l,o)=>l&&e(t[o],n[o]),!0):t===n}(t.current,e)||(t.current=e),t.current}(v),{activeScopes:_}=w(),x=y();return k(()=>{var e;if((null==S?void 0:S.enabled)===!1||(e=null==S?void 0:S.scopes,0===_.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!1):!(!e||_.some(t=>e.includes(t))||_.includes("*"))))return;let t=[],n,l=(e,l=!1)=>{var o;if(!(f(e,["input","textarea","select"])&&!f(e,null==S?void 0:S.enableOnFormTags))){if(null!==r.current){let t=r.current.getRootNode();if((t instanceof Document||t instanceof ShadowRoot)&&t.activeElement!==r.current&&!r.current.contains(t.activeElement)){g(e);return}}null!=(o=e.target)&&o.isContentEditable&&!(null!=S&&S.enableOnContentEditable)||s(b,null==S?void 0:S.delimiter).forEach(o=>{var r,s,d,p,h,f;if(o.includes((null==S?void 0:S.splitKey)??"+")&&o.includes((null==S?void 0:S.sequenceSplitKey)??">")){console.warn(`Hotkey ${o} contains both ${(null==S?void 0:S.splitKey)??"+"} and ${(null==S?void 0:S.sequenceSplitKey)??">"} which is not supported.`);return}let v=u(o,null==S?void 0:S.splitKey,null==S?void 0:S.sequenceSplitKey,null==S?void 0:S.useKey,null==S?void 0:S.description);if(v.isSequence){n=setTimeout(()=>{t=[]},(null==S?void 0:S.sequenceTimeoutMs)??1e3);let l=v.useKey?e.key:i(e.code);if(a(l.toLowerCase()))return;if(t.push(l),l!==(null==(r=v.keys)?void 0:r[t.length-1])){t=[],n&&clearTimeout(n);return}t.length===(null==(s=v.keys)?void 0:s.length)&&(C.current(e,v),n&&clearTimeout(n),t=[])}else if(m(e,v,null==S?void 0:S.ignoreModifiers)||null!=(d=v.keys)&&d.includes("*")){if(null!=(p=null==S?void 0:S.ignoreEventWhen)&&p.call(S,e)||l&&c.current)return;if(("function"==typeof(h=null==S?void 0:S.preventDefault)&&h(e,v)||!0===h)&&e.preventDefault(),"function"==typeof(f=null==S?void 0:S.enabled)?!f(e,v):!0!==f&&void 0!==f){g(e);return}C.current(e,v),l||(c.current=!0)}})}},o=e=>{void 0!==e.code&&(p(i(e.code)),((null==S?void 0:S.keydown)===void 0&&(null==S?void 0:S.keyup)!==!0||null!=S&&S.keydown)&&l(e))},d=e=>{void 0!==e.code&&(h(i(e.code)),c.current=!1,null!=S&&S.keyup&&l(e,!0))},y=r.current||(null==v?void 0:v.document)||document;return y.addEventListener("keyup",d,null==v?void 0:v.eventListenerOptions),y.addEventListener("keydown",o,null==v?void 0:v.eventListenerOptions),x&&s(b,null==S?void 0:S.delimiter).forEach(e=>x.addHotkey(u(e,null==S?void 0:S.splitKey,null==S?void 0:S.sequenceSplitKey,null==S?void 0:S.useKey,null==S?void 0:S.description))),()=>{y.removeEventListener("keyup",d,null==v?void 0:v.eventListenerOptions),y.removeEventListener("keydown",o,null==v?void 0:v.eventListenerOptions),x&&s(b,null==S?void 0:S.delimiter).forEach(e=>x.removeHotkey(u(e,null==S?void 0:S.splitKey,null==S?void 0:S.sequenceSplitKey,null==S?void 0:S.useKey,null==S?void 0:S.description))),t=[],n&&clearTimeout(n)}},[b,S,_]),r}}}]);