(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9882],{26562:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/access-tokens",function(){return t(38126)}])},64773:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(97685),s=t(67294);function c(){var e=s.useReducer(function(e){return e+1},0);return(0,r.Z)(e,2)[1]}},78021:function(e,n,t){"use strict";var r=t(78235);n.Z=r.Z},23061:function(e,n,t){"use strict";var r=t(67294),s=t(64773),c=t(98947);n.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=(0,r.useRef)({}),t=(0,s.Z)();return(0,r.useEffect)(function(){var r=c.ZP.subscribe(function(r){n.current=r,e&&t()});return function(){return c.ZP.unsubscribe(r)}},[]),n.current}},10227:function(e,n,t){"use strict";var r=t(79338);n.Z=r.Z},91624:function(e,n,t){"use strict";t.d(n,{Z:function(){return x}});var r=t(4942),s=t(87462),c=t(97685),o=t(69156),a=t(93967),l=t.n(a),i=t(97485),u=t(67294),d=t(17399),f=t(22781),p=t(51964),h=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>n.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>n.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(t[r[s]]=e[r[s]]);return t},m=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>n.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>n.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(t[r[s]]=e[r[s]]);return t},y=new RegExp("^(".concat(f.Y.join("|"),")(-inverse)?$")),b=new RegExp("^(".concat(f.E.join("|"),")$")),k=u.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,f=e.style,h=e.children,k=e.icon,x=e.color,v=e.onClose,j=e.closeIcon,g=e.closable,C=m(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),Z=u.useContext(d.E_),w=Z.getPrefixCls,E=Z.direction,S=u.useState(!0),O=(0,c.Z)(S,2),N=O[0],_=O[1];u.useEffect(function(){"visible"in C&&_(C.visible)},[C.visible]);var P=function(){return!!x&&(y.test(x)||b.test(x))},T=(0,s.Z)({backgroundColor:x&&!P()?x:void 0},f),A=P(),I=w("tag",t),R=l()(I,(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},"".concat(I,"-").concat(x),A),"".concat(I,"-has-color"),x&&!A),"".concat(I,"-hidden"),!N),"".concat(I,"-rtl"),"rtl"===E),a),U=function(e){e.stopPropagation(),null==v||v(e),!e.defaultPrevented&&("visible"in C||_(!1))},D="onClick"in C||h&&"a"===h.type,G=(0,i.Z)(C,["visible"]),M=k||null,Q=M?u.createElement(u.Fragment,null,M,u.createElement("span",null,h)):h,z=u.createElement("span",(0,s.Z)({},G,{ref:n,className:R,style:T}),Q,void 0!==g&&g?j?u.createElement("span",{className:"".concat(I,"-close-icon"),onClick:U},j):u.createElement(o.Z,{className:"".concat(I,"-close-icon"),onClick:U}):null);return D?u.createElement(p.Z,null,z):z});k.CheckableTag=function(e){var n=e.prefixCls,t=e.className,c=e.checked,o=e.onChange,a=e.onClick,i=h(e,["prefixCls","className","checked","onChange","onClick"]),f=(0,u.useContext(d.E_).getPrefixCls)("tag",n),p=l()(f,(0,r.Z)((0,r.Z)({},"".concat(f,"-checkable"),!0),"".concat(f,"-checkable-checked"),c),t);return u.createElement("span",(0,s.Z)({},i,{className:p,onClick:function(e){null==o||o(!c),null==a||a(e)}}))};var x=k},38126:function(e,n,t){"use strict";t.r(n);var r=t(85893),s=t(67294),c=t(23657),o=t(8968),a=t(91624),l=t(78021),i=t(72370),u=t(77786),d=t(20133),f=t(10227),p=t(56469),h=t(4116),m=t(27043),y=t(12642),b=t(5152),k=t.n(b),x=t(11992),v=t(25889);let{Title:j,Paragraph:g}=c.default,C=k()(()=>Promise.all([t.e(3247),t.e(1506)]).then(t.t.bind(t,81506,23)),{loadableGenerated:{webpack:()=>[81506]},ssr:!1}),Z={CAN_SEND_SYSTEM_MESSAGES:{name:"System messages",description:"Can send official messages on behalf of the system.",color:"purple"},CAN_SEND_MESSAGES:{name:"User chat messages",description:"Can send chat messages on behalf of the owner of this token.",color:"green"},HAS_ADMIN_ACCESS:{name:"Has admin access",description:"Can perform administrative actions such as moderation, get server statuses, etc.",color:"red"}},w=e=>{let{onOk:n,onCancel:t,open:c}=e,[o,a]=(0,s.useState)([]),[h,m]=(0,s.useState)(""),y=Object.keys(Z).map(e=>({value:e,label:Z[e].description})),b={disabled:0===o.length||""===h},k=y.map(e=>(0,r.jsx)(l.Z,{span:8,children:(0,r.jsx)(i.Z,{value:e.value,children:e.label})},e.value));return(0,r.jsxs)(u.default,{title:"Create New Access token",open:c,onOk:function(){n(h,o),a([]),m("")},onCancel:t,okButtonProps:b,children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("p",{children:"The name will be displayed as the chat user when sending messages with this access token."}),(0,r.jsx)(d.default,{value:h,placeholder:"Name of bot, service, or integration",onChange:e=>m(e.currentTarget.value)})]}),(0,r.jsx)("p",{children:"Select the permissions this access token will have. It cannot be edited after it's created."}),(0,r.jsx)(i.Z.Group,{style:{width:"100%"},value:o,onChange:function(e){a(e)},children:(0,r.jsx)(f.Z,{children:k})}),(0,r.jsx)("p",{children:(0,r.jsx)(p.Z,{type:"primary",onClick:function(){a(Object.keys(Z))},children:"Select all"})})]})},E=()=>{let[e,n]=(0,s.useState)([]),[t,c]=(0,s.useState)(!1);function l(e){console.error("error",e)}async function i(){try{let e=await (0,x.rQ)(x.ms);n(e)}catch(e){l(e)}}async function u(e){try{await (0,x.rQ)(x.Wr,{method:"POST",data:{token:e}}),i()}catch(e){l(e)}}async function f(t,r){try{let s=await (0,x.rQ)(x.IO,{method:"POST",data:{name:t,scopes:r}});n(e.concat(s))}catch(e){l(e)}}(0,s.useEffect)(()=>{i()},[]);let b=[{title:"",key:"delete",render:(e,n)=>(0,r.jsx)(h.Z,{size:"middle",children:(0,r.jsx)(p.Z,{onClick:()=>u(n.accessToken),icon:(0,r.jsx)(C,{})})})},{title:"Name",dataIndex:"displayName",key:"displayName"},{title:"Token",dataIndex:"accessToken",key:"accessToken",render:e=>(0,r.jsx)(d.default.Password,{size:"small",bordered:!1,value:e})},{title:"Scopes",dataIndex:"scopes",key:"scopes",render:e=>(0,r.jsx)(r.Fragment,{children:e.map(e=>(function(e){if(!e||!Z[e])return null;let n=Z[e];return(0,r.jsx)(o.Z,{title:n.description,children:(0,r.jsx)(a.Z,{color:n.color,children:n.name})},e)})(e))})},{title:"Last Used",dataIndex:"lastUsed",key:"lastUsed",render:e=>{if(!e)return"Never";let n=new Date(e);return(0,y.WU)(n,"P p")}}];return(0,r.jsxs)("div",{children:[(0,r.jsx)(j,{children:"Access Tokens"}),(0,r.jsx)(g,{children:"Access tokens are used to allow external, 3rd party tools to perform specific actions on your Owncast server. They should be kept secure and never included in client code, instead they should be kept on a server that you control."}),(0,r.jsxs)(g,{children:["Read more about how to use these tokens, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/docs/integrations/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(m.Z,{rowKey:"token",columns:b,dataSource:e,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(p.Z,{type:"primary",onClick:()=>{c(!0)},children:"Create Access Token"}),(0,r.jsx)(w,{open:t,onOk:(e,n)=>{c(!1),f(e,n)},onCancel:()=>{c(!1)}})]})};E.getLayout=function(e){return(0,r.jsx)(v.l,{page:e})},n.default=E}},function(e){e.O(0,[83,1287,8920,7786,443,9904,3657,2502,3093,7528,9532,449,7043,4065,2642,5889,2888,9774,179],function(){return e(e.s=26562)}),_N_E=e.O()}]);