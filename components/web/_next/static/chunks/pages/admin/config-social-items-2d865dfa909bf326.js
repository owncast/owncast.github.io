(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{27561:function(e,t,n){var a=n(67990),r=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(r,""):e}},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var a=n(13218),r=n(7771),c=n(14841),o=Math.max,i=Math.min;e.exports=function(e,t,n){var s,l,u,f,d,m,p=0,h=!1,v=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function N(t){var n=s,a=l;return s=l=void 0,p=t,f=e.apply(a,n)}function j(e){var n=e-m,a=e-p;return void 0===m||n>=t||n<0||v&&a>=u}function b(){var e,n,a,c=r();if(j(c))return g(c);d=setTimeout(b,(e=c-m,n=c-p,a=t-e,v?i(a,u-n):a))}function g(e){return(d=void 0,x&&s)?N(e):(s=l=void 0,f)}function y(){var e,n=r(),a=j(n);if(s=arguments,l=this,m=n,a){if(void 0===d)return p=e=m,d=setTimeout(b,t),h?N(e):f;if(v)return clearTimeout(d),d=setTimeout(b,t),N(m)}return void 0===d&&(d=setTimeout(b,t)),f}return t=c(t)||0,a(n)&&(h=!!n.leading,u=(v="maxWait"in n)?o(c(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),y.cancel=function(){void 0!==d&&clearTimeout(d),p=0,s=m=l=d=void 0},y.flush=function(){return void 0===d?f:g(r())},y}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7771:function(e,t,n){var a=n(55639);e.exports=function(){return a.Date.now()}},14841:function(e,t,n){var a=n(27561),r=n(13218),c=n(33448),o=0/0,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(c(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=s.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):i.test(e)?o:+e}},81009:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return n(35688)}])},31512:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var a=n(85893),r=n(67294),c=n(23657),o=n(56469),i=n(20133),s=n(27043),l=n(77786),u=n(5152),f=n.n(u),d=n(87528),m=n(70869);let p=e=>{let{iconList:t,selectedOption:n,onSelected:r}=e,c=""===n?null:n;return(0,a.jsxs)("div",{className:"social-dropdown-container",children:[(0,a.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,a.jsxs)("div",{className:"formfield-container",children:[(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsxs)(d.default,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:c,value:c,onSelect:e=>{r&&r(e)},children:[t.map(e=>{let{platform:t,icon:n,key:r}=e;return(0,a.jsxs)(d.default.Option,{className:"social-option",value:r,children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:n,alt:"",className:"option-icon"})}),(0,a.jsx)("span",{className:"option-label",children:t})]},"platform-".concat(r))}),(0,a.jsx)(d.default.Option,{className:"social-option",value:m.z_,children:"Other..."},"platform-".concat(m.z_))]})})]})]})};var h=n(11992),v=n(4481),x=n(11),N=n(25510),j=n(28700),b=n(17586);let{Title:g}=c.default,y=f()(()=>Promise.all([n.e(3247),n.e(9036)]).then(n.t.bind(n,9036,23)),{loadableGenerated:{webpack:()=>[9036]},ssr:!1}),w=f()(()=>Promise.all([n.e(3247),n.e(3061)]).then(n.t.bind(n,93061,23)),{loadableGenerated:{webpack:()=>[93061]},ssr:!1}),k=f()(()=>Promise.all([n.e(3247),n.e(1506)]).then(n.t.bind(n,81506,23)),{loadableGenerated:{webpack:()=>[81506]},ssr:!1});function E(){var e,t;let[n,c]=(0,r.useState)([]),[u,f]=(0,r.useState)([]),[d,E]=(0,r.useState)(!1),[Z,_]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[O,T]=(0,r.useState)(-1),[P,I]=(0,r.useState)(m.wC),[z,A]=(0,r.useState)(null),{serverConfig:G,setFieldInConfigState:$}=(0,r.useContext)(v.a)||{},{instanceDetails:M}=G,{socialHandles:B}=M,L=async()=>{try{let e=await (0,h.rQ)(h.$i,{auth:!1}),t=Object.keys(e).map(t=>({key:t,...e[t]}));c(t)}catch(e){console.log(e)}},R=e=>n.find(t=>t.key===e)||!1,U=""!==P.platform&&!n.find(e=>e.key===P.platform);(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{M.socialHandles&&f(B)},[M]);let H=()=>{A(null),clearTimeout(null)},W=()=>{E(!1),T(-1),_(!1),S(!1),I({...m.wC})},D=()=>{W()},K=(e,t)=>{I({...P,[e]:t})},Q=async e=>{d||A((0,j.kg)(j.Jk)),await (0,m.Si)({apiPath:m.c9,data:{value:e},onSuccess:()=>{$({fieldName:"socialHandles",value:e,path:"instanceDetails"}),S(!1),D(),A((0,j.kg)(j.zv)),setTimeout(H,m.sI)},onError:e=>{A((0,j.kg)(j.Un,"There was an error: ".concat(e))),S(!1),setTimeout(H,m.sI)}})},X=e=>{let t=[...u];t.splice(e,1),Q(t)},J=e=>{if(e<=0||e>=u.length)return;let t=[...u],n=t[e-1];t[e-1]=t[e],t[e]=n,Q(t)},V=e=>{if(e<0||e>=u.length-1)return;let t=[...u],n=t[e+1];t[e+1]=t[e],t[e]=n,Q(t)},Y=[{title:"Social Link",dataIndex:"",key:"combo",render:(e,t)=>{let{platform:n,url:r}=t,c=R(n);if(!c)return(0,a.jsx)("div",{className:"social-handle-cell",children:(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:n}),(0,a.jsx)("span",{className:"handle-url",title:r,children:r})]})});let{icon:o,platform:i}=c;return(0,a.jsxs)("div",{className:"social-handle-cell",children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:o,alt:"",className:"option-icon"})}),(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:i}),(0,a.jsx)("span",{className:"handle-url",title:r,children:r})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,t,n)=>(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsx)(o.Z,{size:"small",onClick:()=>{let e=u[n];T(n),I({...e}),E(!0),R(e.platform)||_(!0)},children:"Edit"}),(0,a.jsx)(o.Z,{icon:(0,a.jsx)(w,{}),size:"small",hidden:0===n,onClick:()=>J(n)}),(0,a.jsx)(o.Z,{icon:(0,a.jsx)(y,{}),size:"small",hidden:n===u.length-1,onClick:()=>V(n)}),(0,a.jsx)(o.Z,{className:"delete-button",icon:(0,a.jsx)(k,{}),size:"small",onClick:()=>X(n)})]})}],q={disabled:(e=P.url,!(""!==(t=P.platform)&&("xmpp"===t?(0,x.Kf)(e,"xmpp"):(0,x.jv)(e))))},F=(0,a.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,a.jsx)("div",{className:"label-side"}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsx)(i.default,{placeholder:"Other platform name",defaultValue:P.platform,onChange:e=>{let{value:t}=e.target;K("platform",t)}})})]});return(0,a.jsxs)("div",{className:"social-links-edit-container",children:[(0,a.jsx)(g,{level:3,className:"section-title",children:"Your Social Handles"}),(0,a.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,a.jsx)(b.E,{status:z}),(0,a.jsx)(s.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:Y,dataSource:u}),(0,a.jsx)(l.default,{title:"Edit Social Handle",open:d,onOk:()=>{S(!0);let e=u.length?[...u]:[];-1===O?e.push(P):e.splice(O,1,P),Q(e)},onCancel:D,confirmLoading:C,okButtonProps:q,children:(0,a.jsxs)("div",{className:"social-handle-modal-content",children:[(0,a.jsx)(p,{iconList:n,selectedOption:U?m.z_:P.platform,onSelected:e=>{e===m.z_?(_(!0),K("platform","")):(_(!1),K("platform",e))}}),Z&&F,(0,a.jsx)("br",{}),(0,a.jsx)(N.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[P.platform]||"Url to page",value:P.url,onChange:e=>{let{value:t}=e;K("url",t)},useTrim:!0,type:"url",pattern:x.ax}),(0,a.jsx)(b.E,{status:z})]})}),(0,a.jsx)("br",{}),(0,a.jsx)(o.Z,{type:"primary",onClick:()=>{W(),E(!0)},children:"Add a new social link"})]})}},64773:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var a=n(97685),r=n(67294);function c(){var e=r.useReducer(function(e){return e+1},0);return(0,a.Z)(e,2)[1]}},23061:function(e,t,n){"use strict";var a=n(67294),r=n(64773),c=n(98947);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,a.useRef)({}),n=(0,r.Z)();return(0,a.useEffect)(function(){var a=c.ZP.subscribe(function(a){t.current=a,e&&n()});return function(){return c.ZP.unsubscribe(a)}},[]),t.current}},93879:function(e,t,n){"use strict";var a=n(87462),r=n(4942),c=n(97685),o=n(93967),i=n.n(o),s=n(23279),l=n.n(s),u=n(97485),f=n(67294),d=n(17399),m=n(84476),p=n(3227),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)0>t.indexOf(a[r])&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};(0,p.b)("small","default","large");var v=null,x=function(e){var t=e.spinPrefixCls,n=e.spinning,o=void 0===n||n,s=e.delay,p=e.className,x=e.size,N=void 0===x?"default":x,j=e.tip,b=e.wrapperClassName,g=e.style,y=e.children,w=h(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),k=f.useState(function(){return o&&(!o||!s||!!isNaN(Number(s)))}),E=(0,c.Z)(k,2),Z=E[0],_=E[1];return f.useEffect(function(){var e=l()(function(){_(o)},s);return e(),function(){var t;null===(t=null==e?void 0:e.cancel)||void 0===t||t.call(e)}},[s,o]),f.createElement(d.C,null,function(n){var c,o,s=n.direction,l=i()(t,(0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},"".concat(t,"-sm"),"small"===N),"".concat(t,"-lg"),"large"===N),"".concat(t,"-spinning"),Z),"".concat(t,"-show-text"),!!j),"".concat(t,"-rtl"),"rtl"===s),p),d=(0,u.Z)(w,["indicator","prefixCls"]),h=f.createElement("div",(0,a.Z)({},d,{style:g,className:l,"aria-live":"polite","aria-busy":Z}),(c=e.indicator,o="".concat(t,"-dot"),null===c?null:(0,m.l$)(c)?(0,m.Tm)(c,{className:i()(c.props.className,o)}):(0,m.l$)(v)?(0,m.Tm)(v,{className:i()(v.props.className,o)}):f.createElement("span",{className:i()(o,"".concat(t,"-dot-spin"))},f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}),f.createElement("i",{className:"".concat(t,"-dot-item")}))),j?f.createElement("div",{className:"".concat(t,"-text")},j):null);if(void 0!==y){var x=i()("".concat(t,"-container"),(0,r.Z)({},"".concat(t,"-blur"),Z));return f.createElement("div",(0,a.Z)({},d,{className:i()("".concat(t,"-nested-loading"),b)}),Z&&f.createElement("div",{key:"loading"},h),f.createElement("div",{className:x,key:"container"},y))}return h})},N=function(e){var t=e.prefixCls,n=(0,f.useContext(d.E_).getPrefixCls)("spin",t),r=(0,a.Z)((0,a.Z)({},e),{spinPrefixCls:n});return f.createElement(x,(0,a.Z)({},r))};N.setDefaultIndicator=function(e){v=e},t.Z=N},35688:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var a=n(85893);n(67294);var r=n(23657),c=n(31512),o=n(25889);let{Title:i}=r.default;function s(){return(0,a.jsxs)("div",{className:"config-social-items",children:[(0,a.jsx)(i,{children:"Social Items"}),(0,a.jsx)(c.Z,{})]})}s.getLayout=function(e){return(0,a.jsx)(o.l,{page:e})}},11992:function(e,t,n){"use strict";n.d(t,{$i:function(){return A},$l:function(){return K},Bu:function(){return N},E8:function(){return M},Ff:function(){return C},GC:function(){return g},GR:function(){return J},HP:function(){return $},IO:function(){return T},Kp:function(){return h},Kt:function(){return X},M_:function(){return I},N$:function(){return U},NE:function(){return l},NM:function(){return x},Q_:function(){return u},Qc:function(){return _},RB:function(){return j},UJ:function(){return W},WB:function(){return i},WE:function(){return E},WQ:function(){return k},Wr:function(){return O},XA:function(){return P},Y9:function(){return B},a_:function(){return p},ao:function(){return d},bl:function(){return f},e_:function(){return G},hn:function(){return Z},iG:function(){return z},iV:function(){return m},jr:function(){return b},kb:function(){return L},kg:function(){return Q},ms:function(){return S},nx:function(){return y},op:function(){return R},qk:function(){return v},rQ:function(){return D},sG:function(){return w},um:function(){return H}});var a=n(34155);let r=n(71312),c=a.env.NEXT_PUBLIC_ADMIN_USERNAME,o=a.env.NEXT_PUBLIC_ADMIN_STREAMKEY,i="/",s="".concat(i,"api/admin/"),l=15e3,u="".concat(s,"status"),f="".concat(s,"serverconfig"),d="".concat(s,"config"),m="".concat(s,"viewersOverTime"),p="".concat(s,"viewers"),h="".concat(s,"chat/clients"),v="".concat(s,"chat/users/disabled"),x="".concat(s,"chat/users/setenabled"),N="".concat(s,"chat/users/ipbans"),j="".concat(s,"chat/users/ipbans/remove"),b="".concat(s,"chat/users/setmoderator"),g="".concat(s,"chat/users/moderators"),y="".concat(s,"hardwarestats"),w="".concat(s,"logs"),k="".concat(s,"logs/warnings"),E="".concat(s,"chat/messages"),Z="/api/admin/chat/messagevisibility",_="".concat(s,"emoji/upload"),C="".concat(s,"emoji/delete"),S="".concat(s,"accesstokens"),O="".concat(s,"accesstokens/delete"),T="".concat(s,"accesstokens/create"),P="".concat(s,"webhooks"),I="".concat(s,"webhooks/delete"),z="".concat(s,"webhooks/create"),A="".concat(i,"api/socialplatforms"),G="".concat(s,"federation/send"),$="".concat(s,"followers"),M="".concat(s,"followers/pending"),B="".concat(s,"followers/blocked"),L="".concat(s,"followers/approve"),R="".concat(s,"federation/actions"),U="".concat(s,"metrics/video"),H="".concat(s,"config/streamkeys"),W="".concat(s,"yp/reset");async function D(e,t){let{data:n,method:a="GET",auth:r=!0}=t||{},i={method:a};if(n&&(i.body=JSON.stringify(n)),r&&c&&o){let e=btoa("".concat(c,":").concat(o));i.headers={Authorization:"Basic ".concat(e)},i.mode="cors",i.credentials="include"}let s=await fetch(e,i),l=await s.json();if(!s.ok)throw Error(l.message||"An error has occurred: ".concat(s.status));return l}async function K(e,t){return D(e,{method:"GET",auth:!1,...t})}async function Q(e){try{let t=await fetch(e,{referrerPolicy:"no-referrer",referrer:""});if(!t.ok){let e="An error has occured: ".concat(t.status);throw Error(e)}return await t.json()}catch(e){console.log(e)}return{}}async function X(){return Q("https://api.github.com/repos/owncast/owncast/releases/latest")}async function J(e){let t=(await X()).tag_name;return("v"===t.substr(0,1)&&(t=t.substr(1)),r(t,e))?t:null}}},function(e){e.O(0,[83,1287,8920,7786,443,9904,3657,2502,3093,7528,9532,449,7043,5889,2888,9774,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);