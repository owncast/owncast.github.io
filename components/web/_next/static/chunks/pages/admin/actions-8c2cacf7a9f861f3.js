(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{54005:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return t(49783)}])},11660:function(e,o,t){"use strict";t.d(o,{W:function(){return r}});var n=t(85893);t(67294);var i=t(37039);let r=e=>{let o,{translationKey:t,vars:r,className:a,id:s,defaultText:l,count:d}=e,{t:c}=(0,i.$G)(),m=void 0!==d?{...r,count:d}:r;if(void 0!==d){if(1===d){let e="".concat(t,"_one");(o=c(e,m))===e&&(o=c(t,m))}else o=c(t,m)}else o=c(t,m);if(o===t&&l)for(let[e,t]of(o=l,Object.entries(m||{}))){let n=RegExp("{{\\s*".concat(e,"\\s*}}"),"g");o=o.replace(n,String(t))}return(0,n.jsx)("span",{className:a,id:s,dangerouslySetInnerHTML:{__html:o}})};o.Z=r},49783:function(e,o,t){"use strict";t.r(o);var n=t(85893),i=t(23657),r=t(77786),a=t(73211),s=t(87528),l=t(20133),d=t(72370),c=t(4116),m=t(56469),u=t(27043),A=t(19208),p=t(58909),f=t(82261),h=t(5152),g=t.n(h),w=t(67294),y=t(37039),F=t(17586),b=t(70869),T=t(28700),x=t(4481),M=t(11),v=t(53278),k=t(11660),j=t(25889);let{Title:C,Paragraph:N}=i.default,S=g()(()=>Promise.all([t.e(3247),t.e(1506)]).then(t.t.bind(t,81506,23)),{loadableGenerated:{webpack:()=>[81506]},ssr:!1}),B=g()(()=>Promise.all([t.e(3247),t.e(3181)]).then(t.t.bind(t,93181,23)),{loadableGenerated:{webpack:()=>[93181]},ssr:!1}),E=e=>{let{onOk:o,onCancel:t,open:i,action:c}=e,{t:m}=(0,y.$G)(),[u,h]=(0,w.useState)("url"),[g,F]=(0,w.useState)(""),[b,T]=(0,w.useState)(""),[x,j]=(0,w.useState)(""),[C,N]=(0,w.useState)(""),[S,B]=(0,w.useState)(""),[E,H]=(0,w.useState)(""),[W,I]=(0,w.useState)(!1);(0,w.useEffect)(()=>{var e;h(((null==c?void 0:null===(e=c.html)||void 0===e?void 0:e.length)||0)>0?"html":"url"),F((null==c?void 0:c.url)||""),T((null==c?void 0:c.html)||""),j((null==c?void 0:c.title)||""),N((null==c?void 0:c.description)||""),B((null==c?void 0:c.icon)||""),H((null==c?void 0:c.color)||""),I((null==c?void 0:c.openExternally)||!1)},[c]);let V={disabled:!("html"===u?""!==b&&""!==x:(0,M.jv)(g,["https:"])&&""!==x)};return(0,n.jsx)(r.default,{destroyOnClose:!0,title:m(null==c?v.W.Admin.Actions.createNewActionTitle:v.W.Admin.Actions.editActionTitle),open:i,onOk:function(){o(c,e.index,"html"===u?"":g,"html"===u?b:"",x,C,S,E,W),F(""),T(""),j(""),N(""),B(""),H(""),I(!1)},onCancel:t,okButtonProps:V,children:(0,n.jsxs)(a.default,{initialValues:c,children:[(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.modalDescription})," ",(0,n.jsx)("strong",{children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.onlyHttpsSupported})}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.readMoreAboutActions})})}),(0,n.jsx)(a.default.Item,{children:(0,n.jsx)(s.default,{value:u,onChange:h,placeholder:m(v.W.Admin.Actions.selectActionType),options:[{label:m(v.W.Admin.Actions.linkOrEmbedUrl),value:"url"},{label:m(v.W.Admin.Actions.customHtml),value:"html"}]})}),"html"===u?(0,n.jsx)(a.default.Item,{name:"html",children:(0,n.jsx)(A.ZP,{value:b,placeholder:m(v.W.Admin.Actions.htmlEmbedPlaceholder),theme:p.FZ,height:"200px",extensions:[(0,f.html)()],onChange:e=>{T(e)}})}):(0,n.jsx)(a.default.Item,{name:"url",children:(0,n.jsx)(l.default,{required:!0,placeholder:m(v.W.Admin.Actions.urlPlaceholder),onChange:e=>F(e.currentTarget.value.trim()),type:"url",pattern:M.ax})}),(0,n.jsx)(a.default.Item,{name:"title",children:(0,n.jsx)(l.default,{value:x,required:!0,placeholder:m(v.W.Admin.Actions.titlePlaceholder),onChange:e=>j(e.currentTarget.value)})}),(0,n.jsx)(a.default.Item,{name:"description",children:(0,n.jsx)(l.default,{value:C,placeholder:m(v.W.Admin.Actions.descriptionPlaceholder),onChange:e=>N(e.currentTarget.value)})}),(0,n.jsx)(a.default.Item,{name:"icon",children:(0,n.jsx)(l.default,{value:S,placeholder:m(v.W.Admin.Actions.iconPlaceholder),onChange:e=>B(e.currentTarget.value)})}),(0,n.jsxs)("div",{children:[(0,n.jsx)(a.default.Item,{name:"color",style:{marginBottom:"0px"},children:(0,n.jsx)(l.default,{type:"color",value:E,onChange:e=>H(e.currentTarget.value)})}),(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.optionalBackgroundColor})]}),"html"===u?null:(0,n.jsx)(a.default.Item,{name:"openExternally",children:(0,n.jsx)(d.Z,{checked:W,defaultChecked:W,onChange:e=>{I(e.target.checked)},children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.openExternally})})})]})})},H=()=>{let{t:e}=(0,y.$G)(),{serverConfig:o,setFieldInConfigState:t}=(0,w.useContext)(x.a)||{},{externalActions:i}=o,[r,a]=(0,w.useState)(null),[s,l]=(0,w.useState)(!1),[d,A]=(0,w.useState)(null),[p,f]=(0,w.useState)(null),[h,g]=(0,w.useState)(-1),M=()=>{A(null),clearTimeout(null)};async function j(o){await (0,b.Si)({apiPath:b.os,data:{value:o},onSuccess:()=>{t({fieldName:"externalActions",value:o,path:""}),A((0,T.kg)(T.zv,e(v.W.Admin.StatusMessages.updated))),setTimeout(M,b.sI)},onError:e=>{console.log(e),A((0,T.kg)(T.Un,e)),setTimeout(M,b.sI)}})}async function H(e){let o=[...r];o.splice(e,1);try{await j(o)}catch(e){console.error(e)}}async function W(e,o,t,n,i,a,s,l,d){try{let e=[...r],c={url:t,html:n,title:i,description:a,icon:s,color:l,openExternally:d};o>=0?e[o]=c:e.push(c),await j(e)}catch(e){console.error(e)}}async function I(e,o){g(o),f(e),l(!0)}(0,w.useEffect)(()=>{a(i||[])},[i]);let V=[{title:"",key:"delete-edit",render:(e,o,t)=>(0,n.jsxs)(c.Z,{size:"middle",children:[(0,n.jsx)(m.Z,{onClick:()=>H(t),icon:(0,n.jsx)(S,{})}),(0,n.jsx)(m.Z,{onClick:()=>I(o,t),icon:(0,n.jsx)(B,{})})]})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL / Embed",key:"url",dataIndex:"url",render:(e,o)=>o.html?"HTML embed":o.url},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,n.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,n.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",key:"openExternally",dataIndex:"openExternally",render:(e,o)=>!e||o.html?"In the same tab":"In a new tab"}];return(0,n.jsxs)("div",{children:[(0,n.jsx)(C,{children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.title})}),(0,n.jsx)(N,{children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.description})}),(0,n.jsxs)(N,{children:[(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.readMoreLink})," ",(0,n.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,n.jsx)(u.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:V,dataSource:r,pagination:!1}),(0,n.jsx)("br",{}),(0,n.jsx)(m.Z,{type:"primary",onClick:()=>{f(null),g(-1),l(!0)},children:(0,n.jsx)(k.W,{translationKey:v.W.Admin.Actions.createNewAction})}),(0,n.jsx)(F.E,{status:d}),(0,n.jsx)(E,{action:p,index:h,open:s,onOk:(e,o,t,n,i,r,a,s,d)=>{l(!1),W(e,o,t,n,i,r,a,s,d),f(null),g(-1)},onCancel:()=>{l(!1)}})]})};H.getLayout=function(e){return(0,n.jsx)(j.l,{page:e})},o.default=H},53278:function(e,o,t){"use strict";t.d(o,{W:function(){return n}});let n={Frontend:{chatOffline:"Chat is offline",chatDisabled:"Chat is disabled",chatWillBeAvailable:"Chat will be available when the stream is live",lastLiveAgo:"Last live {{timeAgo}} ago",currentViewers:"Current viewers",maxViewers:"Max viewers this stream",noStreamActive:"No stream is active",healthyStream:"Healthy Stream",playbackHealth:"Playback Health",notify:"Notify",follow:"Follow",connected:"Connected",skipToPlayer:"Skip to player",skipToContent:"Skip to page content",skipToFooter:"Skip to footer",stayUpdated:"Stay updated!",fediverse:"Add your Owncast instance to the Fediverse",owncastDirectory:"Find an audience on the Owncast Directory",useBroadcastingSoftware:"Use your broadcasting software",embedVideo:"Embed your video onto other sites",helloWorld:"Frontend.helloWorld",complexMessage:"Frontend.complexMessage",componentError:"Frontend.componentError",BrowserNotifyModal:{unsupported:"Frontend.BrowserNotifyModal.unsupported",unsupportedLocal:"Frontend.BrowserNotifyModal.unsupportedLocal",iosTitle:"Frontend.BrowserNotifyModal.iosTitle",iosDescription:"Frontend.BrowserNotifyModal.iosDescription",iosShareButton:"Frontend.BrowserNotifyModal.iosShareButton",iosAddToHomeScreen:"Frontend.BrowserNotifyModal.iosAddToHomeScreen",iosAddButton:"Frontend.BrowserNotifyModal.iosAddButton",iosNameAndTap:"Frontend.BrowserNotifyModal.iosNameAndTap",iosComeBack:"Frontend.BrowserNotifyModal.iosComeBack",iosAllowPrompt:"Frontend.BrowserNotifyModal.iosAllowPrompt",permissionWantsTo:"Frontend.BrowserNotifyModal.permissionWantsTo",showNotifications:"Frontend.BrowserNotifyModal.showNotifications",allowButton:"Frontend.BrowserNotifyModal.allowButton",blockButton:"Frontend.BrowserNotifyModal.blockButton",enabledTitle:"Frontend.BrowserNotifyModal.enabledTitle",enabledDescription:"Frontend.BrowserNotifyModal.enabledDescription",deniedTitle:"Frontend.BrowserNotifyModal.deniedTitle",deniedDescription:"Frontend.BrowserNotifyModal.deniedDescription",mainDescription:"Frontend.BrowserNotifyModal.mainDescription",learnMoreAboutNotifications:"Frontend.BrowserNotifyModal.learnMoreAboutNotifications",errorTitle:"Frontend.BrowserNotifyModal.errorTitle",errorMessage:"Frontend.BrowserNotifyModal.errorMessage"},NameChangeModal:{description:"Frontend.NameChangeModal.description",placeholder:"Frontend.NameChangeModal.placeholder",buttonText:"Frontend.NameChangeModal.buttonText",colorLabel:"Frontend.NameChangeModal.colorLabel",authInfo:"Frontend.NameChangeModal.authInfo",overLimit:"Frontend.NameChangeModal.overLimit"},Header:{skipToPlayer:"Frontend.Header.skipToPlayer",skipToOfflineMessage:"Frontend.Header.skipToOfflineMessage",skipToContent:"Frontend.Header.skipToContent",skipToFooter:"Frontend.Header.skipToFooter",chatWillBeAvailable:"Frontend.Header.chatWillBeAvailable",chatOffline:"Frontend.Header.chatOffline"},Footer:{documentation:"Frontend.Footer.documentation",contribute:"Frontend.Footer.contribute",source:"Frontend.Footer.source"},Chat:{userJoined:"Frontend.Chat.userJoined",userLeft:"Frontend.Chat.userLeft",nameChangeText:"Frontend.Chat.nameChangeText",moderatorNotification:"Frontend.Chat.moderatorNotification",authenticateToChat:"Frontend.Chat.authenticateToChat"},FollowModal:{description:"Frontend.FollowModal.description",learnFediverse:"Frontend.FollowModal.learnFediverse",newToYou:"Frontend.FollowModal.newToYou",instructions:"Frontend.FollowModal.instructions",placeholder:"Frontend.FollowModal.placeholder",redirectMessage:"Frontend.FollowModal.redirectMessage",joinFediverse:"Frontend.FollowModal.joinFediverse",followButton:"Frontend.FollowModal.followButton",followError:"Frontend.FollowModal.followError",unableToFollow:"Frontend.FollowModal.unableToFollow"},offlineBasic:"Frontend.offlineBasic",offlineNotifyOnly:"Frontend.offlineNotifyOnly",offlineFediverseOnly:"Frontend.offlineFediverseOnly",offlineNotifyAndFediverse:"Frontend.offlineNotifyAndFediverse"},Admin:{emojis:"Admin.emojis",emojiPageDescription:"Admin.emojiPageDescription",emojiUploadBulkGuide:"Admin.emojiUploadBulkGuide",uploadNewEmoji:"Admin.uploadNewEmoji",deleteEmoji:"Admin.deleteEmoji",settings:"Admin.settings",overriddenViaCommandLine:"Admin.overriddenViaCommandLine",Chat:{moderationMessagesSent:"Admin.Chat.moderationMessagesSent",moderationMessagesSent_one:"Admin.Chat.moderationMessagesSent_one"},EditInstanceDetails:{offlineMessageDescription:"Admin.EditInstanceDetails.offlineMessageDescription",directoryDescription:"Admin.EditInstanceDetails.directoryDescription",serverUrlRequiredForDirectory:"Admin.EditInstanceDetails.serverUrlRequiredForDirectory"},EditFavicon:{label:"Admin.EditFavicon.label",tip:"Admin.EditFavicon.tip",resetButton:"Admin.EditFavicon.resetButton",resetConfirmTitle:"Admin.EditFavicon.resetConfirmTitle",resetConfirmOk:"Admin.EditFavicon.resetConfirmOk",resetConfirmCancel:"Admin.EditFavicon.resetConfirmCancel"},VideoVariantForm:{bitrateDisabledPassthrough:"Admin.VideoVariantForm.bitrateDisabledPassthrough",bitrateValueKbps:"Admin.VideoVariantForm.bitrateValueKbps",bitrateGoodForSlow:"Admin.VideoVariantForm.bitrateGoodForSlow",bitrateGoodForMost:"Admin.VideoVariantForm.bitrateGoodForMost",bitrateGoodForHigh:"Admin.VideoVariantForm.bitrateGoodForHigh"},HardwareInfo:{title:"Admin.HardwareInfo.title",pleaseWait:"Admin.HardwareInfo.pleaseWait",noDetails:"Admin.HardwareInfo.noDetails",cpu:"Admin.HardwareInfo.cpu",memory:"Admin.HardwareInfo.memory",disk:"Admin.HardwareInfo.disk",used:"Admin.HardwareInfo.used"},Help:{title:"Admin.Help.title",configureInstance:"Admin.Help.configureInstance",learnMore:"Admin.Help.learnMore",configureBroadcasting:"Admin.Help.configureBroadcasting",embedStream:"Admin.Help.embedStream",customizeWebsite:"Admin.Help.customizeWebsite",tweakVideo:"Admin.Help.tweakVideo",useStorage:"Admin.Help.useStorage",foundBug:"Admin.Help.foundBug",bugPlease:"Admin.Help.bugPlease",letUsKnow:"Admin.Help.letUsKnow",generalQuestion:"Admin.Help.generalQuestion",generalAnswered:"Admin.Help.generalAnswered",faq:"Admin.Help.faq",orExist:"Admin.Help.orExist",discussions:"Admin.Help.discussions",buildAddons:"Admin.Help.buildAddons",buildTools:"Admin.Help.buildTools",developerApis:"Admin.Help.developerApis",troubleshooting:"Admin.Help.troubleshooting",fixProblems:"Admin.Help.fixProblems",documentation:"Admin.Help.documentation",readDocs:"Admin.Help.readDocs",commonTasks:"Admin.Help.commonTasks",other:"Admin.Help.other"},LogTable:{level:"Admin.LogTable.level",info:"Admin.LogTable.info",warning:"Admin.LogTable.warning",error:"Admin.LogTable.error",timestamp:"Admin.LogTable.timestamp",message:"Admin.LogTable.message",logs:"Admin.LogTable.logs"},NewsFeed:{link:"Admin.NewsFeed.link",noNews:"Admin.NewsFeed.noNews",title:"Admin.NewsFeed.title"},ViewerInfo:{title:"Admin.ViewerInfo.title",currentStream:"Admin.ViewerInfo.currentStream",last12Hours:"Admin.ViewerInfo.last12Hours",last24Hours:"Admin.ViewerInfo.last24Hours",last7Days:"Admin.ViewerInfo.last7Days",last30Days:"Admin.ViewerInfo.last30Days",last3Months:"Admin.ViewerInfo.last3Months",last6Months:"Admin.ViewerInfo.last6Months",currentViewers:"Admin.ViewerInfo.currentViewers",maxViewersThisStream:"Admin.ViewerInfo.maxViewersThisStream",maxViewersLastStream:"Admin.ViewerInfo.maxViewersLastStream",maxViewers:"Admin.ViewerInfo.maxViewers",pleaseWait:"Admin.ViewerInfo.pleaseWait",noData:"Admin.ViewerInfo.noData",viewers:"Admin.ViewerInfo.viewers"},info:"Admin.info",warning:"Admin.warning",error:"Admin.error",level:"Admin.level",timestamp:"Admin.timestamp",message:"Admin.message",logs:"Admin.logs",StatusMessages:{updated:"Admin.StatusMessages.updated",tagsUpdated:"Admin.StatusMessages.tagsUpdated",variantsUpdated:"Admin.StatusMessages.variantsUpdated",videoCodecUpdated:"Admin.StatusMessages.videoCodecUpdated",latencyBufferUpdated:"Admin.StatusMessages.latencyBufferUpdated",deletingEmoji:"Admin.StatusMessages.deletingEmoji",emojiDeleted:"Admin.StatusMessages.emojiDeleted",convertingEmoji:"Admin.StatusMessages.convertingEmoji",uploadingEmoji:"Admin.StatusMessages.uploadingEmoji",emojiUploadedSuccessfully:"Admin.StatusMessages.emojiUploadedSuccessfully",thereWasAnError:"Admin.StatusMessages.thereWasAnError",fileSizeTooBig:"Admin.StatusMessages.fileSizeTooBig",fileTypeNotSupported:"Admin.StatusMessages.fileTypeNotSupported",pleaseEnterTag:"Admin.StatusMessages.pleaseEnterTag",tagAlreadyUsed:"Admin.StatusMessages.tagAlreadyUsed"},Actions:{title:"Admin.Actions.title",description:"Admin.Actions.description",readMoreLink:"Admin.Actions.readMoreLink",createNewAction:"Admin.Actions.createNewAction",createNewActionTitle:"Admin.Actions.createNewActionTitle",editActionTitle:"Admin.Actions.editActionTitle",modalDescription:"Admin.Actions.modalDescription",onlyHttpsSupported:"Admin.Actions.onlyHttpsSupported",readMoreAboutActions:"Admin.Actions.readMoreAboutActions",selectActionType:"Admin.Actions.selectActionType",linkOrEmbedUrl:"Admin.Actions.linkOrEmbedUrl",customHtml:"Admin.Actions.customHtml",htmlEmbedPlaceholder:"Admin.Actions.htmlEmbedPlaceholder",urlPlaceholder:"Admin.Actions.urlPlaceholder",titlePlaceholder:"Admin.Actions.titlePlaceholder",descriptionPlaceholder:"Admin.Actions.descriptionPlaceholder",iconPlaceholder:"Admin.Actions.iconPlaceholder",optionalBackgroundColor:"Admin.Actions.optionalBackgroundColor",openExternally:"Admin.Actions.openExternally"},Webhooks:{createNewWebhook:"Admin.Webhooks.createNewWebhook",webhookUrlPlaceholder:"Admin.Webhooks.webhookUrlPlaceholder",selectEvents:"Admin.Webhooks.selectEvents",selectAll:"Admin.Webhooks.selectAll"},AccessTokens:{createNewAccessToken:"Admin.AccessTokens.createNewAccessToken",nameDescription:"Admin.AccessTokens.nameDescription",namePlaceholder:"Admin.AccessTokens.namePlaceholder",selectPermissions:"Admin.AccessTokens.selectPermissions",cannotEditAfterCreated:"Admin.AccessTokens.cannotEditAfterCreated",selectAll:"Admin.AccessTokens.selectAll"}},Common:{poweredByOwncastVersion:"Common.poweredByOwncastVersion"},Testing:{testing:"testing_string",another:"another_test",simpleKey:"Testing.simpleKey",itemCount:"Testing.itemCount",messageCount:"Testing.messageCount",noPluralKey:"Testing.noPluralKey"}}}},function(e){e.O(0,[5762,83,1287,8920,7786,443,9904,3657,2502,3093,7039,7528,9532,449,7043,6681,1882,5889,2888,9774,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);