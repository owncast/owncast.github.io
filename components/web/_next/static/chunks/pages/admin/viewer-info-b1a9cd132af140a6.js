(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6109],{92794:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/viewer-info",function(){return n(65874)}])},31112:function(e,t,n){"use strict";n.d(t,{k:function(){return f}});var o,i,r=n(85893),a=n(12642),s=n(67294),d=n(71218),l=n(23148),c=n(26495),m=n(56469);function u(e,t){let n={};return e.forEach(e=>{let o=new Date(e.time);n[(0,a.WU)(o,t)]=e.value}),n}l.kL.register(l.uw,l.WV,l.f$,l.od,l.jn,l.Dx,l.u,l.De),(o=i||(i={}))[o.Hour12=1]="Hour12",o[o.Hour24=2]="Hour24",o[o.Day7=3]="Day7",o[o.Day30=4]="Day30",o[o.Month3=5]="Month3",o[o.Month6=6]="Month6";let f=e=>{let{data:t,title:n,color:o,unit:i,dataCollections:a,yFlipped:l,yLogarithmic:f,minYValue:A,yStepSize:p=0,timeWindowKey:w}=e,g=[],h=(0,s.useRef)(null),y=function(e){switch(e){case 1:case 2:default:return"H:mm";case 3:case 4:return"MMM d";case 5:case 6:return"MMM"}}(w);return t&&t.length>0&&g.push({id:n,label:n,backgroundColor:o,borderColor:o,borderWidth:3,data:u(t,y)}),a.forEach(e=>{g.push({id:e.name,label:e.name,data:u(e.data,y),backgroundColor:e.color,borderColor:e.color,borderWidth:3,pointStyle:e.pointStyle||"circle",radius:e.pointRadius||1})}),(0,r.jsxs)("div",{className:"line-chart-container",children:[(0,r.jsx)(c.x1,{ref:h,data:{datasets:g},options:{responsive:!0,clip:!1,scales:{x:{title:{display:!1},ticks:{autoSkip:!0,maxTicksLimit:10}},y:{type:f?"logarithmic":"linear",reverse:l,min:A,ticks:{stepSize:p},title:{display:!0,text:i}}}},height:"70vh"}),(0,r.jsx)(m.Z,{size:"small",onClick:()=>{if(h.current){let e=document.createElement("a");e.download="chart.png",e.href=h.current.canvas.toDataURL(),e.click()}},type:"ghost",icon:(0,r.jsx)(d.Z,{}),className:"download-btn"})]})};f.defaultProps={dataCollections:[],data:[],title:"",yFlipped:!1,yLogarithmic:!1}},26826:function(e,t,n){"use strict";n.d(t,{m:function(){return f}});var o=n(85893),i=n(23657),r=n(92120),a=n(75543),s=n(3816);let{Text:d}=i.default,l={title:"",value:0,prefix:null,suffix:null,color:"",progress:!1,centered:!1,formatter:null},c=e=>{let{prefix:t,value:n,suffix:i,title:r}=e;return(0,o.jsxs)("div",{children:[t,(0,o.jsx)("div",{children:(0,o.jsx)(d,{type:"secondary",children:r})}),(0,o.jsx)("div",{children:(0,o.jsxs)(d,{type:"secondary",children:[n,i||"%"]})})]})},m=e=>{let{title:t,value:n,prefix:i,suffix:a,color:s}=e,d=n>90?"red":s,l=(0,o.jsx)(c,{prefix:i,value:n,suffix:a,title:t});return(0,o.jsx)(r.Z,{type:"dashboard",percent:n,width:120,strokeColor:{"0%":s,"90%":d},format:()=>l})};m.defaultProps=l;let u=e=>{let{title:t,value:n,prefix:i,formatter:r}=e;return(0,o.jsx)(a.Z,{title:t,value:n,prefix:i,formatter:r})};u.defaultProps=l;let f=e=>{let{progress:t,centered:n}=e,i=t?m:u;return(0,o.jsx)(s.default,{type:"inner",children:(0,o.jsx)("div",{style:n?{display:"flex",alignItems:"center",justifyContent:"center"}:{},children:(0,o.jsx)(i,{...e})})})};f.defaultProps=l},23061:function(e,t,n){"use strict";var o=n(67294),i=n(64773),r=n(98947);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,o.useRef)({}),n=(0,i.Z)();return(0,o.useEffect)(function(){var o=r.ZP.subscribe(function(o){t.current=o,e&&n()});return function(){return r.ZP.unsubscribe(o)}},[]),t.current}},65874:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var o=n(85893),i=n(67294),r=n(23657),a=n(10227),s=n(78021),d=n(1461),l=n(93879),c=n(70449),m=n(16393),u=n(6916),f=n(32532);function A(e,t,n){var o,i,r;let{years:a=0,months:s=0,weeks:d=0,days:l=0,hours:c=0,minutes:A=0,seconds:p=0}=t,w=(o=s+12*a,i=(0,f.z)(e,-o,n),r=l+7*d,(0,u.E)(i,-r,n));return(0,m.L)((null==n?void 0:n.in)||e,+w-1e3*(p+60*(A+60*c)))}var p=n(46042),w=n(5152),g=n.n(w),h=n(37039),y=n(31112),F=n(26826),b=n(27043),M=n(61913),v=n(74040);let T=e=>{let{data:t}=e;return(0,o.jsx)(b.Z,{pagination:{hideOnSinglePage:!0},className:"table-container",columns:[{title:"User Agent",dataIndex:"userAgent",key:"userAgent",render:e=>(0,v.AB)(e)},{title:"Location",dataIndex:"geo",key:"geo",render:e=>e?"".concat(e.regionName,", ").concat(e.countryCode):"-"},{title:"Watch Time",dataIndex:"firstSeen",key:"firstSeen",defaultSortOrder:"ascend",render:e=>(0,M.Q)(new Date(e)),sorter:(e,t)=>new Date(e.firstSeen).getTime()-new Date(t.firstSeen).getTime(),sortDirections:["descend","ascend"]}],dataSource:t,size:"small",rowKey:"id"})};var k=n(4481),x=n(11992),N=n(25889),S=n(53278);let V=g()(()=>Promise.all([n.e(3247),n.e(5746)]).then(n.t.bind(n,75746,23)),{loadableGenerated:{webpack:()=>[75746]},ssr:!1}),D=g()(()=>Promise.all([n.e(3247),n.e(9153)]).then(n.t.bind(n,96681,23)),{loadableGenerated:{webpack:()=>[96681]},ssr:!1});function C(){let e;let t=(0,i.useContext)(k.a),{t:n}=(0,h.$G)(),{online:m,broadcaster:u,viewerCount:f,overallPeakViewerCount:w,sessionPeakViewerCount:g}=t||{};u&&u.time&&(e=new Date(u.time));let b=[{title:n(S.W.Admin.ViewerInfo.currentStream),start:e},{title:n(S.W.Admin.ViewerInfo.last12Hours),start:A(new Date,{hours:12})},{title:n(S.W.Admin.ViewerInfo.last24Hours),start:A(new Date,{hours:24})},{title:n(S.W.Admin.ViewerInfo.last7Days),start:A(new Date,{days:7})},{title:n(S.W.Admin.ViewerInfo.last30Days),start:A(new Date,{days:30})},{title:n(S.W.Admin.ViewerInfo.last3Months),start:A(new Date,{months:3})},{title:n(S.W.Admin.ViewerInfo.last6Months),start:A(new Date,{months:6})}],[M,v]=(0,i.useState)(!0),[N,C]=(0,i.useState)([]),[H,j]=(0,i.useState)([]),[B,E]=(0,i.useState)(b[1]),[I,W]=(0,i.useState)(1),P=async()=>{try{var e;let t="".concat(x.iV,"?windowStart=").concat((e=B.start,Math.trunc(+(0,p.Q)(e)/1e3))),n=await (0,x.rQ)(t);C(n),v(!1)}catch(e){console.log("==== error",e)}try{let e=await (0,x.rQ)(x.a_);j(e)}catch(e){console.log("==== error",e)}};(0,i.useEffect)(()=>{let e=null;return(P(),m)?(e=setInterval(P,6e4),()=>{clearInterval(e)}):()=>[]},[m,B]);let L=e=>{let{key:t}=e;E(b[t]),W(Number(t))},U=m&&e?0:1,O=b.slice(U).map((e,t)=>({key:t+U,label:e.title,onClick:L}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.default.Title,{children:n(S.W.Admin.ViewerInfo.title)}),(0,o.jsx)("br",{}),(0,o.jsxs)(a.Z,{gutter:[16,16],justify:"space-around",children:[m&&(0,o.jsx)(s.Z,{span:8,md:8,children:(0,o.jsx)(F.m,{title:n(S.W.Admin.ViewerInfo.currentViewers),value:f.toString(),prefix:(0,o.jsx)(D,{})})}),(0,o.jsx)(s.Z,{md:m?8:12,children:(0,o.jsx)(F.m,{title:n(m?S.W.Admin.ViewerInfo.maxViewersThisStream:S.W.Admin.ViewerInfo.maxViewersLastStream),value:g.toString(),prefix:(0,o.jsx)(D,{})})}),(0,o.jsx)(s.Z,{md:m?8:12,children:(0,o.jsx)(F.m,{title:n(S.W.Admin.ViewerInfo.maxViewers),value:w.toString(),prefix:(0,o.jsx)(D,{})})})]}),!N.length&&(0,o.jsx)(d.Z,{style:{marginTop:"10px"},banner:!0,message:n(S.W.Admin.ViewerInfo.pleaseWait),description:n(S.W.Admin.ViewerInfo.noData),type:"info"}),(0,o.jsxs)(l.Z,{spinning:!N.length||M,children:[N.length>0&&(0,o.jsx)(y.k,{title:n(S.W.Admin.ViewerInfo.viewers),data:N,color:"#2087E2",unit:"viewers",minYValue:0,yStepSize:1,timeWindowKey:I}),(0,o.jsx)(c.Z,{menu:{items:O},trigger:["click"],children:(0,o.jsxs)("button",{type:"button",style:{position:"absolute",top:"5px",right:"35px",background:"transparent",border:"unset"},children:[B.title," ",(0,o.jsx)(V,{})]})}),(0,o.jsx)(T,{data:H})]})]})}C.getLayout=function(e){return(0,o.jsx)(N.l,{page:e})}},53278:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});let o={Frontend:{chatOffline:"Chat is offline",chatDisabled:"Chat is disabled",chatWillBeAvailable:"Chat will be available when the stream is live",lastLiveAgo:"Last live {{timeAgo}} ago",currentViewers:"Current viewers",maxViewers:"Max viewers this stream",noStreamActive:"No stream is active",healthyStream:"Healthy Stream",playbackHealth:"Playback Health",notify:"Notify",follow:"Follow",connected:"Connected",skipToPlayer:"Skip to player",skipToContent:"Skip to page content",skipToFooter:"Skip to footer",stayUpdated:"Stay updated!",fediverse:"Add your Owncast instance to the Fediverse",owncastDirectory:"Find an audience on the Owncast Directory",useBroadcastingSoftware:"Use your broadcasting software",embedVideo:"Embed your video onto other sites",helloWorld:"Frontend.helloWorld",complexMessage:"Frontend.complexMessage",componentError:"Frontend.componentError",BrowserNotifyModal:{unsupported:"Frontend.BrowserNotifyModal.unsupported",unsupportedLocal:"Frontend.BrowserNotifyModal.unsupportedLocal",iosTitle:"Frontend.BrowserNotifyModal.iosTitle",iosDescription:"Frontend.BrowserNotifyModal.iosDescription",iosShareButton:"Frontend.BrowserNotifyModal.iosShareButton",iosAddToHomeScreen:"Frontend.BrowserNotifyModal.iosAddToHomeScreen",iosAddButton:"Frontend.BrowserNotifyModal.iosAddButton",iosNameAndTap:"Frontend.BrowserNotifyModal.iosNameAndTap",iosComeBack:"Frontend.BrowserNotifyModal.iosComeBack",iosAllowPrompt:"Frontend.BrowserNotifyModal.iosAllowPrompt",permissionWantsTo:"Frontend.BrowserNotifyModal.permissionWantsTo",showNotifications:"Frontend.BrowserNotifyModal.showNotifications",allowButton:"Frontend.BrowserNotifyModal.allowButton",blockButton:"Frontend.BrowserNotifyModal.blockButton",enabledTitle:"Frontend.BrowserNotifyModal.enabledTitle",enabledDescription:"Frontend.BrowserNotifyModal.enabledDescription",deniedTitle:"Frontend.BrowserNotifyModal.deniedTitle",deniedDescription:"Frontend.BrowserNotifyModal.deniedDescription",mainDescription:"Frontend.BrowserNotifyModal.mainDescription",learnMoreAboutNotifications:"Frontend.BrowserNotifyModal.learnMoreAboutNotifications",errorTitle:"Frontend.BrowserNotifyModal.errorTitle",errorMessage:"Frontend.BrowserNotifyModal.errorMessage"},NameChangeModal:{description:"Frontend.NameChangeModal.description",placeholder:"Frontend.NameChangeModal.placeholder",buttonText:"Frontend.NameChangeModal.buttonText",colorLabel:"Frontend.NameChangeModal.colorLabel",authInfo:"Frontend.NameChangeModal.authInfo",overLimit:"Frontend.NameChangeModal.overLimit"},Header:{skipToPlayer:"Frontend.Header.skipToPlayer",skipToOfflineMessage:"Frontend.Header.skipToOfflineMessage",skipToContent:"Frontend.Header.skipToContent",skipToFooter:"Frontend.Header.skipToFooter",chatWillBeAvailable:"Frontend.Header.chatWillBeAvailable",chatOffline:"Frontend.Header.chatOffline"},Footer:{documentation:"Frontend.Footer.documentation",contribute:"Frontend.Footer.contribute",source:"Frontend.Footer.source"},Chat:{userJoined:"Frontend.Chat.userJoined",userLeft:"Frontend.Chat.userLeft",nameChangeText:"Frontend.Chat.nameChangeText",moderatorNotification:"Frontend.Chat.moderatorNotification",authenticateToChat:"Frontend.Chat.authenticateToChat"},FollowModal:{description:"Frontend.FollowModal.description",learnFediverse:"Frontend.FollowModal.learnFediverse",newToYou:"Frontend.FollowModal.newToYou",instructions:"Frontend.FollowModal.instructions",placeholder:"Frontend.FollowModal.placeholder",redirectMessage:"Frontend.FollowModal.redirectMessage",joinFediverse:"Frontend.FollowModal.joinFediverse",followButton:"Frontend.FollowModal.followButton",followError:"Frontend.FollowModal.followError",unableToFollow:"Frontend.FollowModal.unableToFollow"},offlineBasic:"Frontend.offlineBasic",offlineNotifyOnly:"Frontend.offlineNotifyOnly",offlineFediverseOnly:"Frontend.offlineFediverseOnly",offlineNotifyAndFediverse:"Frontend.offlineNotifyAndFediverse"},Admin:{emojis:"Admin.emojis",emojiPageDescription:"Admin.emojiPageDescription",emojiUploadBulkGuide:"Admin.emojiUploadBulkGuide",uploadNewEmoji:"Admin.uploadNewEmoji",deleteEmoji:"Admin.deleteEmoji",settings:"Admin.settings",overriddenViaCommandLine:"Admin.overriddenViaCommandLine",Chat:{moderationMessagesSent:"Admin.Chat.moderationMessagesSent",moderationMessagesSent_one:"Admin.Chat.moderationMessagesSent_one"},EditInstanceDetails:{offlineMessageDescription:"Admin.EditInstanceDetails.offlineMessageDescription",directoryDescription:"Admin.EditInstanceDetails.directoryDescription",serverUrlRequiredForDirectory:"Admin.EditInstanceDetails.serverUrlRequiredForDirectory"},EditFavicon:{label:"Admin.EditFavicon.label",tip:"Admin.EditFavicon.tip",resetButton:"Admin.EditFavicon.resetButton",resetConfirmTitle:"Admin.EditFavicon.resetConfirmTitle",resetConfirmOk:"Admin.EditFavicon.resetConfirmOk",resetConfirmCancel:"Admin.EditFavicon.resetConfirmCancel"},VideoVariantForm:{bitrateDisabledPassthrough:"Admin.VideoVariantForm.bitrateDisabledPassthrough",bitrateValueKbps:"Admin.VideoVariantForm.bitrateValueKbps",bitrateGoodForSlow:"Admin.VideoVariantForm.bitrateGoodForSlow",bitrateGoodForMost:"Admin.VideoVariantForm.bitrateGoodForMost",bitrateGoodForHigh:"Admin.VideoVariantForm.bitrateGoodForHigh"},HardwareInfo:{title:"Admin.HardwareInfo.title",pleaseWait:"Admin.HardwareInfo.pleaseWait",noDetails:"Admin.HardwareInfo.noDetails",cpu:"Admin.HardwareInfo.cpu",memory:"Admin.HardwareInfo.memory",disk:"Admin.HardwareInfo.disk",used:"Admin.HardwareInfo.used"},Help:{title:"Admin.Help.title",configureInstance:"Admin.Help.configureInstance",learnMore:"Admin.Help.learnMore",configureBroadcasting:"Admin.Help.configureBroadcasting",embedStream:"Admin.Help.embedStream",customizeWebsite:"Admin.Help.customizeWebsite",tweakVideo:"Admin.Help.tweakVideo",useStorage:"Admin.Help.useStorage",foundBug:"Admin.Help.foundBug",bugPlease:"Admin.Help.bugPlease",letUsKnow:"Admin.Help.letUsKnow",generalQuestion:"Admin.Help.generalQuestion",generalAnswered:"Admin.Help.generalAnswered",faq:"Admin.Help.faq",orExist:"Admin.Help.orExist",discussions:"Admin.Help.discussions",buildAddons:"Admin.Help.buildAddons",buildTools:"Admin.Help.buildTools",developerApis:"Admin.Help.developerApis",troubleshooting:"Admin.Help.troubleshooting",fixProblems:"Admin.Help.fixProblems",documentation:"Admin.Help.documentation",readDocs:"Admin.Help.readDocs",commonTasks:"Admin.Help.commonTasks",other:"Admin.Help.other"},LogTable:{level:"Admin.LogTable.level",info:"Admin.LogTable.info",warning:"Admin.LogTable.warning",error:"Admin.LogTable.error",timestamp:"Admin.LogTable.timestamp",message:"Admin.LogTable.message",logs:"Admin.LogTable.logs"},NewsFeed:{link:"Admin.NewsFeed.link",noNews:"Admin.NewsFeed.noNews",title:"Admin.NewsFeed.title"},ViewerInfo:{title:"Admin.ViewerInfo.title",currentStream:"Admin.ViewerInfo.currentStream",last12Hours:"Admin.ViewerInfo.last12Hours",last24Hours:"Admin.ViewerInfo.last24Hours",last7Days:"Admin.ViewerInfo.last7Days",last30Days:"Admin.ViewerInfo.last30Days",last3Months:"Admin.ViewerInfo.last3Months",last6Months:"Admin.ViewerInfo.last6Months",currentViewers:"Admin.ViewerInfo.currentViewers",maxViewersThisStream:"Admin.ViewerInfo.maxViewersThisStream",maxViewersLastStream:"Admin.ViewerInfo.maxViewersLastStream",maxViewers:"Admin.ViewerInfo.maxViewers",pleaseWait:"Admin.ViewerInfo.pleaseWait",noData:"Admin.ViewerInfo.noData",viewers:"Admin.ViewerInfo.viewers"},info:"Admin.info",warning:"Admin.warning",error:"Admin.error",level:"Admin.level",timestamp:"Admin.timestamp",message:"Admin.message",logs:"Admin.logs",StatusMessages:{updated:"Admin.StatusMessages.updated",tagsUpdated:"Admin.StatusMessages.tagsUpdated",variantsUpdated:"Admin.StatusMessages.variantsUpdated",videoCodecUpdated:"Admin.StatusMessages.videoCodecUpdated",latencyBufferUpdated:"Admin.StatusMessages.latencyBufferUpdated",deletingEmoji:"Admin.StatusMessages.deletingEmoji",emojiDeleted:"Admin.StatusMessages.emojiDeleted",convertingEmoji:"Admin.StatusMessages.convertingEmoji",uploadingEmoji:"Admin.StatusMessages.uploadingEmoji",emojiUploadedSuccessfully:"Admin.StatusMessages.emojiUploadedSuccessfully",thereWasAnError:"Admin.StatusMessages.thereWasAnError",fileSizeTooBig:"Admin.StatusMessages.fileSizeTooBig",fileTypeNotSupported:"Admin.StatusMessages.fileTypeNotSupported",pleaseEnterTag:"Admin.StatusMessages.pleaseEnterTag",tagAlreadyUsed:"Admin.StatusMessages.tagAlreadyUsed"},Actions:{title:"Admin.Actions.title",description:"Admin.Actions.description",readMoreLink:"Admin.Actions.readMoreLink",createNewAction:"Admin.Actions.createNewAction",createNewActionTitle:"Admin.Actions.createNewActionTitle",editActionTitle:"Admin.Actions.editActionTitle",modalDescription:"Admin.Actions.modalDescription",onlyHttpsSupported:"Admin.Actions.onlyHttpsSupported",readMoreAboutActions:"Admin.Actions.readMoreAboutActions",selectActionType:"Admin.Actions.selectActionType",linkOrEmbedUrl:"Admin.Actions.linkOrEmbedUrl",customHtml:"Admin.Actions.customHtml",htmlEmbedPlaceholder:"Admin.Actions.htmlEmbedPlaceholder",urlPlaceholder:"Admin.Actions.urlPlaceholder",titlePlaceholder:"Admin.Actions.titlePlaceholder",descriptionPlaceholder:"Admin.Actions.descriptionPlaceholder",iconPlaceholder:"Admin.Actions.iconPlaceholder",optionalBackgroundColor:"Admin.Actions.optionalBackgroundColor",openExternally:"Admin.Actions.openExternally"},Webhooks:{createNewWebhook:"Admin.Webhooks.createNewWebhook",webhookUrlPlaceholder:"Admin.Webhooks.webhookUrlPlaceholder",selectEvents:"Admin.Webhooks.selectEvents",selectAll:"Admin.Webhooks.selectAll"},AccessTokens:{createNewAccessToken:"Admin.AccessTokens.createNewAccessToken",nameDescription:"Admin.AccessTokens.nameDescription",namePlaceholder:"Admin.AccessTokens.namePlaceholder",selectPermissions:"Admin.AccessTokens.selectPermissions",cannotEditAfterCreated:"Admin.AccessTokens.cannotEditAfterCreated",selectAll:"Admin.AccessTokens.selectAll"}},Common:{poweredByOwncastVersion:"Common.poweredByOwncastVersion"},Testing:{testing:"testing_string",another:"another_test",simpleKey:"Testing.simpleKey",itemCount:"Testing.itemCount",messageCount:"Testing.messageCount",noPluralKey:"Testing.noPluralKey"}}},6916:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});var o=n(16393),i=n(46042);function r(e,t,n){let r=(0,i.Q)(e,null==n?void 0:n.in);return isNaN(t)?(0,o.L)((null==n?void 0:n.in)||e,NaN):(t&&r.setDate(r.getDate()+t),r)}},32532:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var o=n(16393),i=n(46042);function r(e,t,n){let r=(0,i.Q)(e,null==n?void 0:n.in);if(isNaN(t))return(0,o.L)((null==n?void 0:n.in)||e,NaN);if(!t)return r;let a=r.getDate(),s=(0,o.L)((null==n?void 0:n.in)||e,r.getTime());return(s.setMonth(r.getMonth()+t+1,0),a>=s.getDate())?s:(r.setFullYear(s.getFullYear(),s.getMonth(),a),r)}}},function(e){e.O(0,[2196,83,1287,8920,7786,443,9904,3657,2502,3093,7039,7528,9532,449,7043,4065,9307,2642,1913,6179,297,391,1882,5889,2888,9774,179],function(){return e(e.s=92794)}),_N_E=e.O()}]);