(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{27561:function(e,t,n){var a=n(67990),l=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(l,""):e}},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var a=n(13218),l=n(7771),s=n(14841),i=Math.max,r=Math.min;e.exports=function(e,t,n){var c,o,u,d,f,m,p=0,h=!1,v=!1,x=!0;if("function"!=typeof e)throw TypeError("Expected a function");function j(t){var n=c,a=o;return c=o=void 0,p=t,d=e.apply(a,n)}function N(e){var n=e-m,a=e-p;return void 0===m||n>=t||n<0||v&&a>=u}function b(){var e,n,a,s=l();if(N(s))return y(s);f=setTimeout(b,(e=s-m,n=s-p,a=t-e,v?r(a,u-n):a))}function y(e){return(f=void 0,x&&c)?j(e):(c=o=void 0,d)}function g(){var e,n=l(),a=N(n);if(c=arguments,o=this,m=n,a){if(void 0===f)return p=e=m,f=setTimeout(b,t),h?j(e):d;if(v)return clearTimeout(f),f=setTimeout(b,t),j(m)}return void 0===f&&(f=setTimeout(b,t)),d}return t=s(t)||0,a(n)&&(h=!!n.leading,u=(v="maxWait"in n)?i(s(n.maxWait)||0,t):u,x="trailing"in n?!!n.trailing:x),g.cancel=function(){void 0!==f&&clearTimeout(f),p=0,c=m=o=f=void 0},g.flush=function(){return void 0===f?d:y(l())},g}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7771:function(e,t,n){var a=n(55639);e.exports=function(){return a.Date.now()}},14841:function(e,t,n){var a=n(27561),l=n(13218),s=n(33448),i=0/0,r=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,o=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return i;if(l(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=l(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var n=c.test(e);return n||o.test(e)?u(e.slice(2),n?2:8):r.test(e)?i:+e}},81009:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-social-items",function(){return n(35688)}])},31512:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var a=n(85893),l=n(67294),s=n(23657),i=n(56469),r=n(20133),c=n(27043),o=n(77786),u=n(5152),d=n.n(u),f=n(87528),m=n(70869);let p=e=>{let{iconList:t,selectedOption:n,onSelected:l}=e,s=""===n?null:n;return(0,a.jsxs)("div",{className:"social-dropdown-container",children:[(0,a.jsx)("p",{className:"description",children:"If you are looking for a platform name not on this list, please select Other and type in your own name. A logo will not be provided."}),(0,a.jsxs)("div",{className:"formfield-container",children:[(0,a.jsx)("div",{className:"label-side",children:(0,a.jsx)("span",{className:"formfield-label",children:"Social Platform"})}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsxs)(f.default,{style:{width:240},className:"social-dropdown",placeholder:"Social platform...",defaultValue:s,value:s,onSelect:e=>{l&&l(e)},children:[t.map(e=>{let{platform:t,icon:n,key:l}=e;return(0,a.jsxs)(f.default.Option,{className:"social-option",value:l,children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:n,alt:"",className:"option-icon"})}),(0,a.jsx)("span",{className:"option-label",children:t})]},"platform-".concat(l))}),(0,a.jsx)(f.default.Option,{className:"social-option",value:m.z_,children:"Other..."},"platform-".concat(m.z_))]})})]})]})};var h=n(11992),v=n(4481),x=n(11),j=n(25510),N=n(28700),b=n(17586);let{Title:y}=s.default,g=d()(()=>Promise.all([n.e(3247),n.e(9036)]).then(n.t.bind(n,9036,23)),{loadableGenerated:{webpack:()=>[9036]},ssr:!1}),k=d()(()=>Promise.all([n.e(3247),n.e(3061)]).then(n.t.bind(n,93061,23)),{loadableGenerated:{webpack:()=>[93061]},ssr:!1}),w=d()(()=>Promise.all([n.e(3247),n.e(1506)]).then(n.t.bind(n,81506,23)),{loadableGenerated:{webpack:()=>[81506]},ssr:!1});function E(){var e,t;let[n,s]=(0,l.useState)([]),[u,d]=(0,l.useState)([]),[f,E]=(0,l.useState)(!1),[Z,C]=(0,l.useState)(!1),[S,O]=(0,l.useState)(!1),[P,_]=(0,l.useState)(-1),[T,z]=(0,l.useState)(m.wC),[I,$]=(0,l.useState)(null),{serverConfig:H,setFieldInConfigState:L}=(0,l.useContext)(v.a)||{},{instanceDetails:A}=H,{socialHandles:D}=A,G=async()=>{try{let e=await (0,h.rQ)(h.$i,{auth:!1}),t=Object.keys(e).map(t=>({key:t,...e[t]}));s(t)}catch(e){console.log(e)}},R=e=>n.find(t=>t.key===e)||!1,U=""!==T.platform&&!n.find(e=>e.key===T.platform);(0,l.useEffect)(()=>{G()},[]),(0,l.useEffect)(()=>{A.socialHandles&&d(D)},[A]);let K=()=>{$(null),clearTimeout(null)},M=()=>{E(!1),_(-1),C(!1),O(!1),z({...m.wC})},V=()=>{M()},W=(e,t)=>{z({...T,[e]:t})},X=async e=>{f||$((0,N.kg)(N.Jk)),await (0,m.Si)({apiPath:m.c9,data:{value:e},onSuccess:()=>{L({fieldName:"socialHandles",value:e,path:"instanceDetails"}),O(!1),V(),$((0,N.kg)(N.zv)),setTimeout(K,m.sI)},onError:e=>{$((0,N.kg)(N.Un,"There was an error: ".concat(e))),O(!1),setTimeout(K,m.sI)}})},B=e=>{let t=[...u];t.splice(e,1),X(t)},J=e=>{if(e<=0||e>=u.length)return;let t=[...u],n=t[e-1];t[e-1]=t[e],t[e]=n,X(t)},Q=e=>{if(e<0||e>=u.length-1)return;let t=[...u],n=t[e+1];t[e+1]=t[e],t[e]=n,X(t)},Y=[{title:"Social Link",dataIndex:"",key:"combo",render:(e,t)=>{let{platform:n,url:l}=t,s=R(n);if(!s)return(0,a.jsx)("div",{className:"social-handle-cell",children:(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:n}),(0,a.jsx)("span",{className:"handle-url",title:l,children:l})]})});let{icon:i,platform:r}=s;return(0,a.jsxs)("div",{className:"social-handle-cell",children:[(0,a.jsx)("span",{className:"option-icon",children:(0,a.jsx)("img",{src:i,alt:"",className:"option-icon"})}),(0,a.jsxs)("p",{className:"option-label",children:[(0,a.jsx)("strong",{children:r}),(0,a.jsx)("span",{className:"handle-url",title:l,children:l})]})]})}},{title:"",dataIndex:"",key:"edit",render:(e,t,n)=>(0,a.jsxs)("div",{className:"actions",children:[(0,a.jsx)(i.Z,{size:"small",onClick:()=>{let e=u[n];_(n),z({...e}),E(!0),R(e.platform)||C(!0)},children:"Edit"}),(0,a.jsx)(i.Z,{icon:(0,a.jsx)(k,{}),size:"small",hidden:0===n,onClick:()=>J(n)}),(0,a.jsx)(i.Z,{icon:(0,a.jsx)(g,{}),size:"small",hidden:n===u.length-1,onClick:()=>Q(n)}),(0,a.jsx)(i.Z,{className:"delete-button",icon:(0,a.jsx)(w,{}),size:"small",onClick:()=>B(n)})]})}],q={disabled:(e=T.url,!(""!==(t=T.platform)&&("xmpp"===t?(0,x.Kf)(e,"xmpp"):(0,x.jv)(e))))},F=(0,a.jsxs)("div",{className:"other-field-container formfield-container",children:[(0,a.jsx)("div",{className:"label-side"}),(0,a.jsx)("div",{className:"input-side",children:(0,a.jsx)(r.default,{placeholder:"Other platform name",defaultValue:T.platform,onChange:e=>{let{value:t}=e.target;W("platform",t)}})})]});return(0,a.jsxs)("div",{className:"social-links-edit-container",children:[(0,a.jsx)(y,{level:3,className:"section-title",children:"Your Social Handles"}),(0,a.jsx)("p",{className:"description",children:"Add all your social media handles and links to your other profiles here."}),(0,a.jsx)(b.E,{status:I}),(0,a.jsx)(c.Z,{className:"social-handles-table",pagination:!1,size:"small",rowKey:e=>"".concat(e.platform,"-").concat(e.url),columns:Y,dataSource:u}),(0,a.jsx)(o.default,{title:"Edit Social Handle",open:f,onOk:()=>{O(!0);let e=u.length?[...u]:[];-1===P?e.push(T):e.splice(P,1,T),X(e)},onCancel:V,confirmLoading:S,okButtonProps:q,children:(0,a.jsxs)("div",{className:"social-handle-modal-content",children:[(0,a.jsx)(p,{iconList:n,selectedOption:U?m.z_:T.platform,onSelected:e=>{e===m.z_?(C(!0),W("platform","")):(C(!1),W("platform",e))}}),Z&&F,(0,a.jsx)("br",{}),(0,a.jsx)(j.nv,{fieldName:"social-url",label:"URL",placeholder:{mastodon:"https://mastodon.social/@username",twitter:"https://twitter.com/username"}[T.platform]||"Url to page",value:T.url,onChange:e=>{let{value:t}=e;W("url",t)},useTrim:!0,type:"url",pattern:x.ax}),(0,a.jsx)(b.E,{status:I})]})}),(0,a.jsx)("br",{}),(0,a.jsx)(i.Z,{type:"primary",onClick:()=>{M(),E(!0)},children:"Add a new social link"})]})}},64773:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(97685),l=n(67294);function s(){var e=l.useReducer(function(e){return e+1},0);return(0,a.Z)(e,2)[1]}},23061:function(e,t,n){"use strict";var a=n(67294),l=n(64773),s=n(98947);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,a.useRef)({}),n=(0,l.Z)();return(0,a.useEffect)(function(){var a=s.ZP.subscribe(function(a){t.current=a,e&&n()});return function(){return s.ZP.unsubscribe(a)}},[]),t.current}},93879:function(e,t,n){"use strict";var a=n(87462),l=n(4942),s=n(97685),i=n(93967),r=n.n(i),c=n(23279),o=n.n(c),u=n(97485),d=n(67294),f=n(17399),m=n(84476),p=n(3227),h=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(n[a[l]]=e[a[l]]);return n};(0,p.b)("small","default","large");var v=null,x=function(e){var t=e.spinPrefixCls,n=e.spinning,i=void 0===n||n,c=e.delay,p=e.className,x=e.size,j=void 0===x?"default":x,N=e.tip,b=e.wrapperClassName,y=e.style,g=e.children,k=h(e,["spinPrefixCls","spinning","delay","className","size","tip","wrapperClassName","style","children"]),w=d.useState(function(){return i&&(!i||!c||!!isNaN(Number(c)))}),E=(0,s.Z)(w,2),Z=E[0],C=E[1];return d.useEffect(function(){var e=o()(function(){C(i)},c);return e(),function(){var t;null===(t=null==e?void 0:e.cancel)||void 0===t||t.call(e)}},[c,i]),d.createElement(f.C,null,function(n){var s,i,c=n.direction,o=r()(t,(0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)((0,l.Z)({},"".concat(t,"-sm"),"small"===j),"".concat(t,"-lg"),"large"===j),"".concat(t,"-spinning"),Z),"".concat(t,"-show-text"),!!N),"".concat(t,"-rtl"),"rtl"===c),p),f=(0,u.Z)(k,["indicator","prefixCls"]),h=d.createElement("div",(0,a.Z)({},f,{style:y,className:o,"aria-live":"polite","aria-busy":Z}),(s=e.indicator,i="".concat(t,"-dot"),null===s?null:(0,m.l$)(s)?(0,m.Tm)(s,{className:r()(s.props.className,i)}):(0,m.l$)(v)?(0,m.Tm)(v,{className:r()(v.props.className,i)}):d.createElement("span",{className:r()(i,"".concat(t,"-dot-spin"))},d.createElement("i",{className:"".concat(t,"-dot-item")}),d.createElement("i",{className:"".concat(t,"-dot-item")}),d.createElement("i",{className:"".concat(t,"-dot-item")}),d.createElement("i",{className:"".concat(t,"-dot-item")}))),N?d.createElement("div",{className:"".concat(t,"-text")},N):null);if(void 0!==g){var x=r()("".concat(t,"-container"),(0,l.Z)({},"".concat(t,"-blur"),Z));return d.createElement("div",(0,a.Z)({},f,{className:r()("".concat(t,"-nested-loading"),b)}),Z&&d.createElement("div",{key:"loading"},h),d.createElement("div",{className:x,key:"container"},g))}return h})},j=function(e){var t=e.prefixCls,n=(0,d.useContext(f.E_).getPrefixCls)("spin",t),l=(0,a.Z)((0,a.Z)({},e),{spinPrefixCls:n});return d.createElement(x,(0,a.Z)({},l))};j.setDefaultIndicator=function(e){v=e},t.Z=j},35688:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(85893);n(67294);var l=n(23657),s=n(31512),i=n(25889);let{Title:r}=l.default;function c(){return(0,a.jsxs)("div",{className:"config-social-items",children:[(0,a.jsx)(r,{children:"Social Items"}),(0,a.jsx)(s.Z,{})]})}c.getLayout=function(e){return(0,a.jsx)(i.l,{page:e})}}},function(e){e.O(0,[83,1287,8920,7786,443,9904,3657,2502,3093,7528,9532,449,7043,5889,2888,9774,179],function(){return e(e.s=81009)}),_N_E=e.O()}]);