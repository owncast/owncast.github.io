(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2532],{18957:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config-federation",function(){return t(96647)}])},78021:function(e,n,t){"use strict";var a=t(78235);n.Z=a.Z},10227:function(e,n,t){"use strict";var a=t(79338);n.Z=a.Z},59633:function(e,n,t){"use strict";t.d(n,{Z:function(){return w}});var a=t(87462),l=t(4942),o=t(72034),r=t(93967),s=t.n(r),i=t(97685),c=t(45987),d=t(67294),u=t(22720),h=t(77524),f=d.forwardRef(function(e,n){var t,a=e.prefixCls,o=void 0===a?"rc-switch":a,r=e.className,f=e.checked,p=e.defaultChecked,m=e.disabled,b=e.loadingIcon,g=e.checkedChildren,v=e.unCheckedChildren,y=e.onClick,w=e.onChange,x=e.onKeyDown,k=(0,c.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),j=(0,u.Z)(!1,{value:f,defaultValue:p}),C=(0,i.Z)(j,2),Z=C[0],N=C[1];function E(e,n){var t=Z;return m||(N(t=e),null==w||w(t,n)),t}var P=s()(o,r,(t={},(0,l.Z)(t,"".concat(o,"-checked"),Z),(0,l.Z)(t,"".concat(o,"-disabled"),m),t));return d.createElement("button",Object.assign({},k,{type:"button",role:"switch","aria-checked":Z,disabled:m,className:P,ref:n,onKeyDown:function(e){e.which===h.Z.LEFT?E(!1,e):e.which===h.Z.RIGHT&&E(!0,e),null==x||x(e)},onClick:function(e){var n=E(!Z,e);null==y||y(n,e)}}),b,d.createElement("span",{className:"".concat(o,"-inner")},Z?g:v))});f.displayName="Switch";var p=t(17399),m=t(92933),b=t(23173),g=t(51964),v=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>n.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]]);return t},y=d.forwardRef(function(e,n){var t=e.prefixCls,r=e.size,i=e.disabled,c=e.loading,u=e.className,h=v(e,["prefixCls","size","disabled","loading","className"]),y=d.useContext(p.E_),w=y.getPrefixCls,x=y.direction,k=d.useContext(b.Z),j=d.useContext(m.Z),C=(null!=i?i:j)||c,Z=w("switch",t),N=d.createElement("div",{className:"".concat(Z,"-handle")},c&&d.createElement(o.Z,{className:"".concat(Z,"-loading-icon")})),E=s()((0,l.Z)((0,l.Z)((0,l.Z)({},"".concat(Z,"-small"),"small"===(r||k)),"".concat(Z,"-loading"),c),"".concat(Z,"-rtl"),"rtl"===x),void 0===u?"":u);return d.createElement(g.Z,{insertExtraNode:!0},d.createElement(f,(0,a.Z)({},h,{prefixCls:Z,className:E,disabled:C,ref:n,loadingIcon:N})))});y.__ANT_SWITCH=!0;var w=y},91624:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var a=t(4942),l=t(87462),o=t(97685),r=t(69156),s=t(93967),i=t.n(s),c=t(97485),d=t(67294),u=t(17399),h=t(22781),f=t(51964),p=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>n.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]]);return t},m=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>n.indexOf(a)&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>n.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(t[a[l]]=e[a[l]]);return t},b=new RegExp("^(".concat(h.Y.join("|"),")(-inverse)?$")),g=new RegExp("^(".concat(h.E.join("|"),")$")),v=d.forwardRef(function(e,n){var t=e.prefixCls,s=e.className,h=e.style,p=e.children,v=e.icon,y=e.color,w=e.onClose,x=e.closeIcon,k=e.closable,j=m(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),C=d.useContext(u.E_),Z=C.getPrefixCls,N=C.direction,E=d.useState(!0),P=(0,o.Z)(E,2),O=P[0],S=P[1];d.useEffect(function(){"visible"in j&&S(j.visible)},[j.visible]);var _=function(){return!!y&&(b.test(y)||g.test(y))},I=(0,l.Z)({backgroundColor:y&&!_()?y:void 0},h),T=_(),R=Z("tag",t),U=i()(R,(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(R,"-").concat(y),T),"".concat(R,"-has-color"),y&&!T),"".concat(R,"-hidden"),!O),"".concat(R,"-rtl"),"rtl"===N),s),F=function(e){e.stopPropagation(),null==w||w(e),!e.defaultPrevented&&("visible"in j||S(!1))},L="onClick"in j||p&&"a"===p.type,K=(0,c.Z)(j,["visible"]),D=v||null,V=D?d.createElement(d.Fragment,null,D,d.createElement("span",null,p)):p,W=d.createElement("span",(0,l.Z)({},K,{ref:n,className:U,style:I}),V,void 0!==k&&k?x?d.createElement("span",{className:"".concat(R,"-close-icon"),onClick:F},x):d.createElement(r.Z,{className:"".concat(R,"-close-icon"),onClick:F}):null);return L?d.createElement(f.Z,null,W):W});v.CheckableTag=function(e){var n=e.prefixCls,t=e.className,o=e.checked,r=e.onChange,s=e.onClick,c=p(e,["prefixCls","className","checked","onChange","onClick"]),h=(0,d.useContext(u.E_).getPrefixCls)("tag",n),f=i()(h,(0,a.Z)((0,a.Z)({},"".concat(h,"-checkable"),!0),"".concat(h,"-checkable-checked"),o),t);return d.createElement("span",(0,l.Z)({},c,{className:f,onClick:function(e){null==r||r(!o),null==s||s(e)}}))};var y=v},96647:function(e,n,t){"use strict";t.r(n);var a=t(85893),l=t(77786),o=t(56469),r=t(23657),s=t(1461),i=t(10227),c=t(78021),d=t(67294),u=t(25510),h=t(18063),f=t(22067),p=t(36981),m=t(70869),b=t(4481),g=t(28700),v=t(25889);let y=e=>{let{cancelPressed:n,okPressed:t}=e;return(0,a.jsxs)(l.default,{width:"70%",title:"Enable Social Features",open:!0,onCancel:n,footer:(0,a.jsxs)("div",{children:[(0,a.jsx)(o.Z,{onClick:n,children:"Do not enable"}),(0,a.jsx)(o.Z,{type:"primary",onClick:t,children:"Enable Social Features"})]}),children:[(0,a.jsx)(r.default.Title,{level:3,children:"How do Owncast's social features work?"}),(0,a.jsxs)(r.default.Paragraph,{children:["Owncast's social features are accomplished by having your server join The"," ",(0,a.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",rel:"noopener noreferrer",target:"_blank",children:"Fediverse"}),", a decentralized, open, collection of independent servers, like yours."]}),"Please"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"read more"})," ","about these features, the details behind them, and how they work.",(0,a.jsx)(r.default.Paragraph,{}),(0,a.jsx)(r.default.Title,{level:3,children:"What do you need to know?"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:"These features are brand new. Given the variability of interfacing with the rest of the world, bugs are possible. Please report anything that you think isn't working quite right."}),(0,a.jsx)("li",{children:"You must always host your Owncast server with SSL using a https url."}),(0,a.jsx)("li",{children:"You should not change your server name URL or social username once people begin following you, as your server will be seen as a completely different user on the Fediverse, and the old user will disappear."}),(0,a.jsxs)("li",{children:["Turning on ",(0,a.jsx)("i",{children:"Private mode"})," will allow you to manually approve each follower and limit the visibility of your posts to followers only."]})]}),(0,a.jsx)(r.default.Title,{level:3,children:"Learn more about The Fediverse"}),(0,a.jsxs)(r.default.Paragraph,{children:["If these concepts are new you should discover more about what this functionality has to offer. Visit"," ",(0,a.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"our documentation"})," ","to be pointed at some resources that will help get you started on The Fediverse."]})]})},w=()=>{let{Title:e}=r.default,[n,t]=(0,d.useState)(null),[l,o]=(0,d.useState)(!1),{serverConfig:v,setFieldInConfigState:w}=(0,d.useContext)(b.a)||{},[x,k]=(0,d.useState)(null),{federation:j,yp:C,instanceDetails:Z}=v,{enabled:N,isPrivate:E,username:P,goLiveMessage:O,showEngagement:S,blockedDomains:_}=j,{instanceUrl:I}=C,{nsfw:T}=Z,R=e=>{let{fieldName:a,value:l}=e;t({...n,[a]:l})};function U(){k(null)}function F(){try{(0,m.Si)({apiPath:m.pE,data:{value:n.blockedDomains},onSuccess:()=>{w({fieldName:"forbiddenUsernames",value:n.forbiddenUsernames}),k(g.zv),setTimeout(U,m.sI)},onError:e=>{k((0,g.kg)(g.Un,e)),setTimeout(U,m.sI)}})}catch(e){console.error(e),k(g.Un)}}if((0,d.useEffect)(()=>{t({enabled:N,isPrivate:E,username:P,goLiveMessage:O,showEngagement:S,blockedDomains:_,nsfw:T,instanceUrl:C.instanceUrl})},[v,C]),!n)return null;let L=""!==I,K=I.startsWith("https://"),D=!K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{message:"You must set your server URL before you can enable this feature.",type:"warning",showIcon:!0}),(0,a.jsx)("br",{}),(0,a.jsx)(h.$7,{fieldName:"instanceUrl",...m.yi,value:n.instanceUrl,initialValue:C.instanceUrl,type:u.xA,onChange:R,onSubmit:()=>{let e=""!==n.instanceUrl,a=n.instanceUrl.startsWith("https://");e&&a||((0,m.Si)({apiPath:m.Kl.apiPath,data:{value:!1}}),t({...n,enabled:!1}))},required:!0})]}),V=(0,a.jsx)(s.Z,{message:"Only Owncast instances available on the default SSL port 443 support this feature.",type:"warning",showIcon:!0}),W=I&&""!==new URL(I).port&&"443"!==new URL(I).port;return(0,a.jsxs)("div",{children:[(0,a.jsx)(e,{children:"Configure Social Features"}),(0,a.jsx)("p",{children:"Owncast provides the ability for people to follow and engage with your instance. It's a great way to promote alerting, sharing and engagement of your stream."}),(0,a.jsx)("p",{children:"Once enabled you'll alert your followers when you go live as well as gain the ability to compose custom posts to share any information you like."}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"https://owncast.online/docs/social",rel:"noopener noreferrer",target:"_blank",children:"Read more about the specifics of these social features."})}),(0,a.jsxs)(i.Z,{children:[(0,a.jsxs)(c.Z,{span:15,className:"form-module",style:{marginRight:"15px"},children:[D,W&&V,(0,a.jsx)(f.Z,{fieldName:"enabled",onChange:e=>{e?o(!0):((0,m.Si)({apiPath:m.Kl.apiPath,data:{value:!1},onSuccess:()=>{w({fieldName:"enabled",value:!1,path:m.Kl.configPath})}}),t({...n,enabled:!1}))},...m.Kl,checked:n.enabled,disabled:W||!L||!K}),(0,a.jsx)(f.Z,{fieldName:"isPrivate",...m.LC,checked:n.isPrivate,disabled:!N}),(0,a.jsx)(f.Z,{fieldName:"nsfw",useSubmit:!0,...m.B_,checked:n.nsfw,disabled:W||!L}),(0,a.jsx)(h.$7,{required:!0,fieldName:"username",type:u.Kx,...m.Xc,value:n.username,initialValue:P,onChange:e=>{let{fieldName:a,value:l}=e;R({fieldName:a,value:l}),t({...n,username:l.replace(/\W/g,"")})},disabled:!N}),(0,a.jsx)(h.$7,{fieldName:"goLiveMessage",...m.BF,type:u.Sk,value:n.goLiveMessage,initialValue:O,onChange:R,disabled:!N}),(0,a.jsx)(f.Z,{fieldName:"showEngagement",...m.FE,checked:n.showEngagement,disabled:!N})]}),(0,a.jsx)(c.Z,{span:8,className:"form-module",children:(0,a.jsx)(p.Y,{title:m.dR.label,placeholder:m.dR.placeholder,description:m.dR.tip,values:n.blockedDomains,handleDeleteIndex:function(e){n.blockedDomains.splice(e,1),F()},handleCreateString:function(e){let t;try{t=new URL(e).host}catch(n){t=e}n.blockedDomains.push(t),R({fieldName:"blockedDomains",value:n.blockedDomains}),F()},submitStatus:(0,g.kg)(x)})})]}),l&&(0,a.jsx)(y,{cancelPressed:function(){o(!1),(0,m.Si)({apiPath:m.Kl.apiPath,data:{value:!1},onSuccess:()=>{w({fieldName:"enabled",value:!1,path:m.Kl.configPath})}}),t({...n,enabled:!1})},okPressed:function(){o(!1),(0,m.Si)({apiPath:m.Kl.apiPath,data:{value:!0},onSuccess:()=>{w({fieldName:"enabled",value:!0,path:m.Kl.configPath})}}),t({...n,enabled:!0})}})]})};w.getLayout=function(e){return(0,a.jsx)(v.l,{page:e})},n.default=w}},function(e){e.O(0,[83,1287,8920,7786,443,9904,3657,2502,3093,7039,1882,5889,3005,2888,9774,179],function(){return e(e.s=18957)}),_N_E=e.O()}]);