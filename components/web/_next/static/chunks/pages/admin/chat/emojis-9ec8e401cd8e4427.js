(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{10887:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(21493)}])},11660:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(85893);n(67294);var o=n(37039);let s=e=>{let t,{translationKey:n,vars:s,className:a,defaultText:r,count:l}=e,{t:c}=(0,o.$G)(),d=void 0!==l?{...s,count:l}:s;if(void 0!==l){if(1===l){let e="".concat(n,"_one");(t=c(e,d))===e&&(t=c(n,d))}else t=c(n,d)}else t=c(n,d);if(t===n&&r)for(let[e,n]of(t=r,Object.entries(d||{}))){let i=RegExp("{{\\s*".concat(e,"\\s*}}"),"g");t=t.replace(i,String(n))}return(0,i.jsx)("span",{className:a,dangerouslySetInnerHTML:{__html:t}})};t.Z=s},21493:function(e,t,n){"use strict";n.r(t);var i=n(85893),o=n(3816),s=n(23657),a=n(56469),r=n(10227),l=n(78021),c=n(8968),d=n(10647),u=n(6468),m=n(67294),f=n(5152),p=n.n(f),h=n(37039),g=n(17586),y=n(11992),j=n(35329),w=n(28700),_=n(70869),v=n(25889),x=n(11660),b=n(53278);let{Meta:k}=o.default,E=p()(()=>Promise.resolve().then(n.t.bind(n,12155,23)),{loadableGenerated:{webpack:()=>[12155]},ssr:!1}),{Title:S,Paragraph:C}=s.default,D=()=>{let[e,t]=(0,m.useState)([]),[n,s]=(0,m.useState)(!1),[f,p]=(0,m.useState)(null),[v,D]=(0,m.useState)(null),{t:A}=(0,h.$G)(),T=null,B=()=>{p(null),clearTimeout(T),T=null};async function M(){s(!0);try{let e=await (0,y.rQ)("/api/emoji");t(e)}catch(e){console.error("error fetching emojis",e)}s(!1)}async function W(e){let t="/".concat(e.split("/").slice(3).join("/"));console.log(t),s(!0),p((0,w.kg)(w.Jk,"Deleting emoji..."));try{let e=await (0,y.rQ)(y.Ff,{method:"POST",data:{name:t}});if(e instanceof Error)throw e;p((0,w.kg)(w.zv,"Emoji deleted")),T=setTimeout(B,_.sI)}catch(e){p((0,w.kg)(w.Un,"".concat(e))),s(!1),T=setTimeout(B,_.sI)}M()}async function N(){s(!0);try{p((0,w.kg)(w.Jk,"Converting emoji..."));let e=await new Promise((e,t)=>{if(!j.dr.includes(v.type)){let e="File type is not supported: ".concat(v.type);return t(e)}(0,j.y3)(v,t=>e({name:v.name,url:t}))});p((0,w.kg)(w.Jk,"Uploading emoji..."));let t=await (0,y.rQ)(y.Qc,{method:"POST",data:{name:e.name,data:e.url}});if(t instanceof Error)throw t;p((0,w.kg)(w.zv,"Emoji uploaded successfully!")),M()}catch(e){p((0,w.kg)(w.Un,"".concat(e)))}T=setTimeout(B,_.sI),s(!1)}return(0,m.useEffect)(()=>{M()},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)(S,{children:(0,i.jsx)(x.W,{translationKey:b.W.Admin.emojis})}),(0,i.jsx)(C,{children:(0,i.jsx)(x.W,{translationKey:b.W.Admin.emojiPageDescription})}),(0,i.jsx)(C,{children:(0,i.jsx)(x.W,{translationKey:b.W.Admin.emojiUploadBulkGuide})}),(0,i.jsx)("br",{}),(0,i.jsx)(u.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:j.dr.join(","),beforeUpload:D,customRequest:N,disabled:n,children:(0,i.jsx)(a.Z,{type:"primary",disabled:n,children:(0,i.jsx)(x.W,{translationKey:b.W.Admin.uploadNewEmoji})})}),(0,i.jsx)(g.Z,{status:f}),(0,i.jsx)("br",{}),(0,i.jsx)(r.Z,{children:e.map(e=>(0,i.jsx)(l.Z,{style:{padding:"10px"},children:(0,i.jsx)(o.default,{style:{width:120,marginTop:16},actions:[],children:(0,i.jsx)(k,{description:[(0,i.jsxs)("div",{style:{display:"flex",justifyItems:"center",alignItems:"center",flexDirection:"column",gap:"20px"},children:[(0,i.jsx)(c.Z,{title:e.name,children:(0,i.jsx)(d.C,{style:{height:50,width:50},src:e.url})}),(0,i.jsx)(a.Z,{size:"small",type:"ghost",title:A(b.W.Admin.deleteEmoji),style:{position:"absolute",right:0,top:0,height:24,width:24,border:"none",color:"gray"},onClick:()=>W(e.url),icon:(0,i.jsx)(E,{})})]})]})})},e.name))}),(0,i.jsx)("br",{})]})};D.getLayout=function(e){return(0,i.jsx)(v.l,{page:e})},t.default=D},53278:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});let i={Frontend:{chatOffline:"Chat is offline",chatDisabled:"Chat is disabled",chatWillBeAvailable:"Chat will be available when the stream is live",lastLiveAgo:"Last live ago",currentViewers:"Current viewers",maxViewers:"Max viewers this stream",noStreamActive:"No stream is active",healthyStream:"Healthy Stream",playbackHealth:"Playback Health",notify:"Notify",follow:"Follow",connected:"Connected",skipToPlayer:"Skip to player",skipToContent:"Skip to page content",skipToFooter:"Skip to footer",stayUpdated:"Stay updated!",fediverse:"Add your Owncast instance to the Fediverse",owncastDirectory:"Find an audience on the Owncast Directory",useBroadcastingSoftware:"Use your broadcasting software",embedVideo:"Embed your video onto other sites",helloWorld:"hello_world",notificationMessage:"notification_message",complexMessage:"complex_message",componentError:"component_error",offlineBasic:"offline_basic",offlineNotifyOnly:"offline_notify_only",offlineFediverseOnly:"offline_fediverse_only",offlineNotifyAndFediverse:"offline_notify_and_fediverse"},Admin:{emojis:"Emojis",emojiPageDescription:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename without extension will be used as emoji name. Additionally, emoji names are case-insensitive. For best results, ensure all emoji have unique names.",emojiUploadBulkGuide:'Want to upload custom emojis in bulk? Check out our <a href="https://owncast.online/docs/chat/emoji" rel="noopener noreferrer" target="_blank">Emoji guide</a>.',uploadNewEmoji:"Upload new emoji",deleteEmoji:"Delete emoji",settings:"settings",overriddenViaCommandLine:"Overridden via command line",Chat:{moderationMessagesSent:"Admin.Chat.moderationMessagesSent",moderationMessagesSent_one:"Admin.Chat.moderationMessagesSent_one"},EditInstanceDetails:{offlineMessageDescription:"Admin.EditInstanceDetails.offlineMessageDescription",directoryDescription:"Admin.EditInstanceDetails.directoryDescription",serverUrlRequiredForDirectory:"Admin.EditInstanceDetails.serverUrlRequiredForDirectory"},info:"Info",warning:"Warning",error:"Error",level:"Level",timestamp:"Timestamp",message:"Message",logs:"Logs"},Common:{yes:"Yes",no:"No",documentation:"Documentation",contribute:"Contribute",source:"Source",poweredByOwncast:"Powered by Owncast",poweredByOwncastVersion:"powered_by_owncast_version"},Testing:{testing:"testing_string",another:"another_test",simpleKey:"simple_key",itemCount:"item_count",messageCount:"message_count",noPluralKey:"no_plural_key"}}},35329:function(e,t,n){"use strict";n.d(t,{Z7:function(){return i},dr:function(){return o},kR:function(){return a},y3:function(){return s}});let i=2097152,o=["image/png","image/jpeg","image/gif"];function s(e,t){let n=new FileReader;n.addEventListener("load",()=>t(n.result)),n.readAsDataURL(e)}function a(e){let t=Math.floor(Math.log(e)/Math.log(1024)),n=1*Number((e/Math.pow(1024,t)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])}}},function(e){e.O(0,[3247,83,1287,8920,7786,443,9904,3657,2502,3093,7039,9307,1674,6356,1616,5889,3064,2888,9774,179],function(){return e(e.s=10887)}),_N_E=e.O()}]);