(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2476],{89675:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/federation/followers",function(){return n(4253)}])},67150:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1413),a=n(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},o=n(36936),i=a.forwardRef(function(e,t){return a.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:c}))})},31585:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var r=function(e){return e?"function"==typeof e?e():e:null}},64773:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(97685),a=n(67294);function c(){var e=a.useReducer(function(e){return e+1},0);return(0,r.Z)(e,2)[1]}},10647:function(e,t,n){"use strict";n.d(t,{C:function(){return k}});var r=n(87462),a=n(4942),c=n(71002),o=n(97685),i=n(93967),s=n.n(i),l=n(48555),u=n(89157),d=n(67294),f=n(17399),m=n(23061),p=n(98947),h=d.createContext("default"),g=function(e){var t=e.children,n=e.size;return d.createElement(h.Consumer,null,function(e){return d.createElement(h.Provider,{value:n||e},t)})},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},v=d.forwardRef(function(e,t){var n,i=d.useContext(h),g=d.useState(1),v=(0,o.Z)(g,2),w=v[0],x=v[1],b=d.useState(!1),k=(0,o.Z)(b,2),E=k[0],j=k[1],Z=d.useState(!0),C=(0,o.Z)(Z,2),S=C[0],O=C[1],P=d.useRef(null),_=d.useRef(null),N=(0,u.sQ)(t,P),T=d.useContext(f.E_).getPrefixCls,D=function(){if(_.current&&P.current){var t=_.current.offsetWidth,n=P.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&x(n-2*a<t?(n-2*a)/t:1)}}};d.useEffect(function(){j(!0)},[]),d.useEffect(function(){O(!0),x(1)},[e.src]),d.useEffect(function(){D()},[e.gap]);var I=e.prefixCls,R=e.shape,z=void 0===R?"circle":R,A=e.size,Q=void 0===A?"default":A,F=e.src,W=e.srcSet,G=e.icon,B=e.className,L=e.alt,M=e.draggable,U=e.children,q=e.crossOrigin,K=y(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),H="default"===Q?i:Q,X=Object.keys("object"===(0,c.Z)(H)&&H||{}).some(function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)}),Y=(0,m.Z)(X),$=d.useMemo(function(){if("object"!==(0,c.Z)(H))return{};var e=H[p.c4.find(function(e){return Y[e]})];return e?{width:e,height:e,lineHeight:"".concat(e,"px"),fontSize:G?e/2:18}:{}},[Y,H]),J=T("avatar",I),V=s()((0,a.Z)((0,a.Z)({},"".concat(J,"-lg"),"large"===H),"".concat(J,"-sm"),"small"===H)),ee=d.isValidElement(F),et=s()(J,V,(0,a.Z)((0,a.Z)((0,a.Z)({},"".concat(J,"-").concat(z),!!z),"".concat(J,"-image"),ee||F&&S),"".concat(J,"-icon"),!!G),B),en="number"==typeof H?{width:H,height:H,lineHeight:"".concat(H,"px"),fontSize:G?H/2:18}:{};if("string"==typeof F&&S)n=d.createElement("img",{src:F,draggable:M,srcSet:W,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&O(!1)},alt:L,crossOrigin:q});else if(ee)n=F;else if(G)n=G;else if(E||1!==w){var er="scale(".concat(w,") translateX(-50%)"),ea="number"==typeof H?{lineHeight:"".concat(H,"px")}:{};n=d.createElement(l.default,{onResize:D},d.createElement("span",{className:"".concat(J,"-string"),ref:_,style:(0,r.Z)((0,r.Z)({},ea),{msTransform:er,WebkitTransform:er,transform:er})},U))}else n=d.createElement("span",{className:"".concat(J,"-string"),style:{opacity:0},ref:_},U);return delete K.onError,delete K.gap,d.createElement("span",(0,r.Z)({},K,{style:(0,r.Z)((0,r.Z)((0,r.Z)({},en),$),K.style),className:et,ref:N}),n)}),w=n(22610),x=n(86842),b=n(84476);v.Group=function(e){var t=d.useContext(f.E_),n=t.getPrefixCls,r=t.direction,c=e.prefixCls,o=e.className,i=e.maxCount,l=e.maxStyle,u=e.size,m=n("avatar-group",c),p=s()(m,(0,a.Z)({},"".concat(m,"-rtl"),"rtl"===r),void 0===o?"":o),h=e.children,y=e.maxPopoverPlacement,k=e.maxPopoverTrigger,E=(0,w.Z)(h).map(function(e,t){return(0,b.Tm)(e,{key:"avatar-key-".concat(t)})}),j=E.length;if(i&&i<j){var Z=E.slice(0,i),C=E.slice(i,j);return Z.push(d.createElement(x.Z,{key:"avatar-popover-key",content:C,trigger:void 0===k?"hover":k,placement:void 0===y?"top":y,overlayClassName:"".concat(m,"-popover")},d.createElement(v,{style:l},"+".concat(j-i)))),d.createElement(g,{size:u},d.createElement("div",{className:p,style:e.style},Z))}return d.createElement(g,{size:u},d.createElement("div",{className:p,style:e.style},E))};var k=v},23061:function(e,t,n){"use strict";var r=n(67294),a=n(64773),c=n(98947);t.Z=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,r.useRef)({}),n=(0,a.Z)();return(0,r.useEffect)(function(){var r=c.ZP.subscribe(function(r){t.current=r,e&&n()});return function(){return c.ZP.unsubscribe(r)}},[]),t.current}},86842:function(e,t,n){"use strict";var r=n(87462),a=n(67294),c=n(31585),o=n(99293),i=n(17399),s=n(8968),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},u=function(e){var t=e.title,n=e.content,r=e.prefixCls;return a.createElement(a.Fragment,null,t&&a.createElement("div",{className:"".concat(r,"-title")},(0,c.Z)(t)),a.createElement("div",{className:"".concat(r,"-inner-content")},(0,c.Z)(n)))},d=a.forwardRef(function(e,t){var n=e.prefixCls,c=e.title,d=e.content,f=e._overlay,m=e.placement,p=e.trigger,h=e.mouseEnterDelay,g=e.mouseLeaveDelay,y=e.overlayStyle,v=l(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),w=a.useContext(i.E_).getPrefixCls,x=w("popover",n),b=w(),k=a.useMemo(function(){return f||(c||d?a.createElement(u,{prefixCls:x,title:c,content:d}):null)},[f,c,d,x]);return a.createElement(s.Z,(0,r.Z)({placement:void 0===m?"top":m,trigger:void 0===p?"hover":p,mouseEnterDelay:void 0===h?.1:h,mouseLeaveDelay:void 0===g?.1:g,overlayStyle:void 0===y?{}:y},v,{prefixCls:x,ref:t,overlay:k,transitionName:(0,o.mL)(b,"zoom-big",v.transitionName)}))});t.Z=d},4586:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(92818),a=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some(function(e){return e in n.style})}return!1},c=function(e,t){if(!a(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r};function o(e,t){return Array.isArray(e)||void 0===t?a(e):c(e,t)}},4253:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(85893),a=n(67294),c=n(27043),o=n(10647),i=n(56469),s=n(89307),l=n(12642),u=n(5152),d=n.n(u),f=n(4481),m=n(11992),p=n(74040),h=n(25889);let g=d()(()=>Promise.all([n.e(3247),n.e(7025)]).then(n.t.bind(n,77025,23)),{loadableGenerated:{webpack:()=>[77025]},ssr:!1}),y=d()(()=>Promise.all([n.e(3247),n.e(2130)]).then(n.t.bind(n,72130,23)),{loadableGenerated:{webpack:()=>[72130]},ssr:!1}),v=e=>{let{data:t,tableColumns:n,totalCount:a,setCurrentPage:o}=e;return(0,r.jsx)(c.Z,{dataSource:t,columns:n,size:"small",rowKey:e=>e.link,pagination:{pageSize:25,hideOnSinglePage:!0,showSizeChanger:!1,total:a},onChange:e=>{o(e.current)}})};function w(){let[e,t]=(0,a.useState)([]),[n,u]=(0,a.useState)([]),[d,h]=(0,a.useState)([]),[w,x]=(0,a.useState)(0),[b,k]=(0,a.useState)(1),{serverConfig:E}=(0,a.useContext)(f.a)||{},{federation:j}=E,{isPrivate:Z}=j,C=async()=>{try{let e="".concat(m.HP,"?offset=").concat((b-1)*25,"&limit=").concat(25),{results:r,total:a}=await (0,m.rQ)(e,{auth:!0});(0,p.Qr)(r)?h([]):(x(a),h(r));let c=await (0,m.rQ)(m.E8,{auth:!0});(0,p.Qr)(c)?t([]):t(c);let o=await (0,m.rQ)(m.Y9,{auth:!0});(0,p.Qr)(n)?u([]):u(o)}catch(e){console.log("==== error",e)}};(0,a.useEffect)(()=>{C()},[b]);let S=[{title:"",dataIndex:"image",key:"image",width:90,render:e=>(0,r.jsx)(o.C,{size:40,src:e||"/img/logo.svg"})},{title:"Name",dataIndex:"name",key:"name",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.name||t.username})},{title:"URL",dataIndex:"link",key:"link",render:(e,t)=>(0,r.jsx)("a",{href:t.link,target:"_blank",rel:"noreferrer",children:t.link})}];async function O(e){try{await (0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!0}}),C()}catch(e){console.error(e)}}async function P(e){try{await (0,m.rQ)(m.kb,{auth:!0,method:"POST",data:{actorIRI:e.link,approved:!1}}),C()}catch(e){console.error(e)}}let _=[...S];_.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",icon:(0,r.jsx)(g,{}),onClick:()=>{O(e)}}),width:50},{title:"Reject",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(y,{}),onClick:()=>{P(e)}}),width:50}),_.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.WU)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let N=[...S];N.unshift({title:"Approve",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",icon:(0,r.jsx)(g,{}),size:"large",onClick:()=>{O(e)}}),width:50}),N.push({title:"Requested",dataIndex:"timestamp",key:"requested",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.WU)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Rejected/Blocked",dataIndex:"timestamp",key:"disabled_at",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.WU)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"});let T=[...S];T.push({title:"Added",dataIndex:"timestamp",key:"timestamp",width:200,render:e=>{let t=new Date(e);return(0,r.jsx)(r.Fragment,{children:(0,l.WU)(t,"P")})},sorter:(e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime(),sortDirections:["descend","ascend"],defaultSortOrder:"descend"},{title:"Remove",dataIndex:null,key:null,render:e=>(0,r.jsx)(i.Z,{type:"primary",danger:!0,icon:(0,r.jsx)(y,{}),onClick:()=>{P(e)}}),width:50});let D=(0,r.jsxs)("span",{children:["Followers ",w>0&&"(".concat(w,")")]}),I=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following accounts get notified when you go live or send a post."}),(0,r.jsx)(v,{data:d,tableColumns:T,totalCount:w,setCurrentPage:k})]}),R=(0,r.jsxs)("span",{children:["Requests ",e.length>0&&"(".concat(e.length,")")]}),z=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:["The following people are requesting to follow your Owncast server on the"," ",(0,r.jsx)("a",{href:"https://en.wikipedia.org/wiki/Fediverse",target:"_blank",rel:"noopener noreferrer",children:"Fediverse"})," ","and be alerted to when you go live. Each must be approved."]}),(0,r.jsx)(c.Z,{dataSource:e,columns:_,size:"small",rowKey:e=>e.link})]}),A=(0,r.jsxs)("span",{children:["Blocked ",n.length>0&&"(".concat(n.length,")")]}),Q=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"The following people were either rejected or blocked by you. You can approve them as a follower."}),(0,r.jsx)("p",{children:(0,r.jsx)(c.Z,{dataSource:n,columns:N,size:"small",rowKey:e=>e.link})})]});return(0,r.jsx)("div",{className:"followers-section",children:(0,r.jsx)(s.Z,{defaultActiveKey:"1",items:[{label:D,key:"1",children:I},Z&&{label:R,key:"2",children:z},{label:A,key:"3",children:Q}]})})}w.getLayout=function(e){return(0,r.jsx)(h.l,{page:e})}},11992:function(e,t,n){"use strict";n.d(t,{$i:function(){return R},$l:function(){return q},Bu:function(){return v},E8:function(){return Q},Ff:function(){return O},GC:function(){return b},GR:function(){return X},HP:function(){return A},IO:function(){return N},Kp:function(){return h},Kt:function(){return H},M_:function(){return D},N$:function(){return B},NE:function(){return l},NM:function(){return y},Q_:function(){return u},Qc:function(){return S},RB:function(){return w},UJ:function(){return M},WB:function(){return i},WE:function(){return Z},WQ:function(){return j},Wr:function(){return _},XA:function(){return T},Y9:function(){return F},a_:function(){return p},ao:function(){return f},bl:function(){return d},e_:function(){return z},hn:function(){return C},iG:function(){return I},iV:function(){return m},jr:function(){return x},kb:function(){return W},kg:function(){return K},ms:function(){return P},nx:function(){return k},op:function(){return G},qk:function(){return g},rQ:function(){return U},sG:function(){return E},um:function(){return L}});var r=n(34155);let a=n(71312),c=r.env.NEXT_PUBLIC_ADMIN_USERNAME,o=r.env.NEXT_PUBLIC_ADMIN_STREAMKEY,i="/",s="".concat(i,"api/admin/"),l=15e3,u="".concat(s,"status"),d="".concat(s,"serverconfig"),f="".concat(s,"config"),m="".concat(s,"viewersOverTime"),p="".concat(s,"viewers"),h="".concat(s,"chat/clients"),g="".concat(s,"chat/users/disabled"),y="".concat(s,"chat/users/setenabled"),v="".concat(s,"chat/users/ipbans"),w="".concat(s,"chat/users/ipbans/remove"),x="".concat(s,"chat/users/setmoderator"),b="".concat(s,"chat/users/moderators"),k="".concat(s,"hardwarestats"),E="".concat(s,"logs"),j="".concat(s,"logs/warnings"),Z="".concat(s,"chat/messages"),C="/api/admin/chat/messagevisibility",S="".concat(s,"emoji/upload"),O="".concat(s,"emoji/delete"),P="".concat(s,"accesstokens"),_="".concat(s,"accesstokens/delete"),N="".concat(s,"accesstokens/create"),T="".concat(s,"webhooks"),D="".concat(s,"webhooks/delete"),I="".concat(s,"webhooks/create"),R="".concat(i,"api/socialplatforms"),z="".concat(s,"federation/send"),A="".concat(s,"followers"),Q="".concat(s,"followers/pending"),F="".concat(s,"followers/blocked"),W="".concat(s,"followers/approve"),G="".concat(s,"federation/actions"),B="".concat(s,"metrics/video"),L="".concat(s,"config/streamkeys"),M="".concat(s,"yp/reset");async function U(e,t){let{data:n,method:r="GET",auth:a=!0}=t||{},i={method:r};if(n&&(i.body=JSON.stringify(n)),a&&c&&o){let e=btoa("".concat(c,":").concat(o));i.headers={Authorization:"Basic ".concat(e)},i.mode="cors",i.credentials="include"}let s=await fetch(e,i),l=await s.json();if(!s.ok)throw Error(l.message||"An error has occurred: ".concat(s.status));return l}async function q(e,t){return U(e,{method:"GET",auth:!1,...t})}async function K(e){try{let t=await fetch(e,{referrerPolicy:"no-referrer",referrer:""});if(!t.ok){let e="An error has occured: ".concat(t.status);throw Error(e)}return await t.json()}catch(e){console.log(e)}return{}}async function H(){return K("https://api.github.com/repos/owncast/owncast/releases/latest")}async function X(e){let t=(await H()).tag_name;return("v"===t.substr(0,1)&&(t=t.substr(1)),a(t,e))?t:null}}},function(e){e.O(0,[83,1287,8920,7786,443,9904,2502,3093,7528,9532,449,7043,4065,9307,2642,5889,2888,9774,179],function(){return e(e.s=89675)}),_N_E=e.O()}]);