{"version":"https://jsonfeed.org/version/1.1","title":"SSL & HTTP Proxies","description":"Put your Owncast server behind a proxy to enable SSL.","home_page_url":"/","feed_url":"/docs/sslproxies/index.json","language":"en-US","items":[{"title":"Caddy","date_published":"0001-01-01T00:00:00Z","date_modified":"2022-10-14T11:21:47-04:00","id":"/docs/sslproxies/caddy/","url":"/docs/sslproxies/caddy/","content_html":"\u003cp\u003e\u003ca href=\"https://caddyserver.com/\"\u003eCaddy\u003c/a\u003e is the fastest way to setup a SSL reverse proxy with a free certificate from \u003ca href=\"https://letsencrypt.org/\"\u003eLet\u0026rsquo;s Encrypt\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eWhile we will try to walk you through some installation steps \u003cstrong\u003eit is highly suggested you follow Caddy\u0026rsquo;s \u003ca href=\"https://caddyserver.com/docs/install\"\u003eInstall options\u003c/a\u003e and \u003ca href=\"https://caddyserver.com/docs/quick-starts/reverse-proxy\"\u003eReverse Proxy Quickstart\u003c/a\u003e for more documentation, examples and detailed information\u003c/strong\u003e. Caddy is a well documented quality piece of software that you should get familiar with if you need to run a SSL reverse proxy.\u003c/p\u003e\n\u003ch2 id=\"1-make-sure-you-dont-have-other-web-servers-running\"\u003e1. Make sure you don\u0026rsquo;t have other web servers running.\u003c/h2\u003e\n\u003cp\u003eIf you are running other pieces of web server software such as Apache or NGINX using port 80 or 443 then you won\u0026rsquo;t be able to continue with this Caddy install. Either remove the other pieces of software or read up on how to make them live in harmony.\u003c/p\u003e\n\u003ch2 id=\"2-install-caddy\"\u003e2. Install Caddy\u003c/h2\u003e\n\u003cp\u003eDepending on your system there may be different options on installing. Using APT is suggested if it\u0026rsquo;s supported on your machine.\u003c/p\u003e\n\u003cdetails\u003e\n  \u003csummary\u003eUsing APT (recommended) \u003c/summary\u003e\n\u003cp\u003eInstalling this package automatically starts and runs Caddy for you as a systemd service so it will automatically run Caddy each time you start your machine.\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install -y debian-keyring debian-archive-keyring apt-transport-https\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl -1sLf \u003cspan class=\"s1\"\u003e\u0026#39;https://dl.cloudsmith.io/public/caddy/stable/gpg.key\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecurl -1sLf \u003cspan class=\"s1\"\u003e\u0026#39;https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e sudo tee /etc/apt/sources.list.d/caddy-stable.list\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt update\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003esudo apt install caddy\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://caddyserver.com/docs/install#debian-ubuntu-raspbian\"\u003eRead the Caddy install steps for using apt\u003c/a\u003e for more details.\u003c/p\u003e\n\u003c/details\u003e\n\u003cdetails\u003e\n  \u003csummary\u003eDownload manually\u003c/summary\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/caddyserver/caddy/releases\"\u003eVisit the releases page\u003c/a\u003e and expand the \u0026ldquo;assets\u0026rdquo; section.\u003c/li\u003e\n\u003cli\u003eFind the version for your platform and operating system.\u003c/li\u003e\n\u003cli\u003eUnarchive the file: \u003ccode\u003etar -xvzf caddy_2.3.0_linux_amd64.tar.gz\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eYou\u0026rsquo;re likely to want to setup Caddy as a system service to auatomatically start in the background.  \u003ca href=\"https://caddyserver.com/docs/install#linux-service\"\u003eLearn how to do this\u003c/a\u003e.\n\u003ca href=\"https://caddyserver.com/docs/install#static-binaries\"\u003eRead the Caddy download page for more details.\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/details\u003e\n\u003ch2 id=\"3-run-caddy-as-a-reverse-proxy\"\u003e3. Run Caddy as a reverse proxy\u003c/h2\u003e\n\u003cdetails\u003e\n  \u003csummary\u003eSingle command line\u003c/summary\u003e\n\u003cp\u003eIt offers automatic configuration of HTTPS with a single command.\u003c/p\u003e\n\u003cp\u003e\u003cbutton class=\"btn-clipboard btn btn-sm btn-link\" data-clipboard-text=\"caddy reverse-proxy --from owncast.mydomain.com --to 127.0.0.1:8080\"\u003e\u003cspan class=\"copy-status\"\u003e\u003c/span\u003e\u003c/button\u003e\n\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003ecaddy reverse-proxy --from owncast.mydomain.com --to 127.0.0.1:8080\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eReplace \u003ccode\u003eowncast.mydomain.com\u003c/code\u003e with the public hostname of your Owncast server like \u003ccode\u003ewatch.owncast.online\u003c/code\u003e for example.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://caddyserver.com/docs/quick-starts/reverse-proxy\"\u003eRead the Caddy reverse proxy documentation for more details.\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cdetails\u003e\n  \u003csummary\u003eCaddyfile\u003c/summary\u003e\n\u003cp\u003eThe \u003ca href=\"https://caddyserver.com/docs/caddyfile\"\u003eCaddyfile\u003c/a\u003e is Caddy\u0026rsquo;s config file.\u003c/p\u003e\n\u003cp\u003eAdd to your Caddyfile:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-caddyfile\" data-lang=\"caddyfile\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"gh\"\u003eowncast.mydomain.com\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eencode\u003c/span\u003e \u003cspan class=\"s\"\u003egzip\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003ereverse_proxy\u003c/span\u003e \u003cspan class=\"n\"\u003e127.0.0.1\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"mi\"\u003e8080\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003etls\u003c/span\u003e \u003cspan class=\"s\"\u003ewebmaster@mydomain.com\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eReplace \u003ccode\u003eowncast.mydomain.com\u003c/code\u003e with the public hostname of your Owncast server like \u003ccode\u003ewatch.owncast.online\u003c/code\u003e for example.\u003c/p\u003e\n\u003c/details\u003e\n\u003chr\u003e\n\u003cp\u003eIf you specify \u003ccode\u003eowncast.mydomain.com\u003c/code\u003e without a protocol or a port, it will attempt to use the default \u003ccode\u003ehttp\u003c/code\u003e and \u003ccode\u003ehttps\u003c/code\u003e ports (80 and 443). Since these are \u003ca href=\"https://www.w3.org/Daemon/User/Installation/PrivilegedPorts.html#:~:text=Priviliged%20ports,has%20put%20up%20for%20you.\"\u003e\u003cem\u003eprivileged ports\u003c/em\u003e\u003c/a\u003e, you will need to run caddy with \u003ccode\u003esudo\u003c/code\u003e or as \u003ccode\u003eroot\u003c/code\u003e.\u003c/p\u003e\n\u003ch2 id=\"4-run-owncast-normally\"\u003e4. Run Owncast normally\u003c/h2\u003e\n\u003cp\u003eContinue to run Owncast on port 8080.\u003c/p\u003e\n\u003ch2 id=\"5-access-owncast-through-the-proxy\"\u003e5. Access Owncast through the proxy\u003c/h2\u003e\n\u003chr\u003e\n\u003cp\u003eYou should now be able to access your Owncast server by visiting \u003ca href=\"https://owncast.mydomain.com\"\u003ehttps://owncast.mydomain.com\u003c/a\u003e instead of \u003ca href=\"http://owncast.mydomain.com:8080\"\u003ehttp://owncast.mydomain.com:8080\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eReplace \u003ccode\u003eowncast.mydomain.com\u003c/code\u003e with the public hostname of your Owncast server like \u003ccode\u003ewatch.owncast.online\u003c/code\u003e for example.\u003c/p\u003e\n"},{"title":"HAProxy","date_published":"0001-01-01T00:00:00Z","date_modified":"2023-05-12T22:56:56+02:00","id":"/docs/sslproxies/haproxy/","url":"/docs/sslproxies/haproxy/","content_html":"\u003cp\u003eSetup websocket on HAproxy could be tricky. Here is a working configuration:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ehaproxy.cfg\u003c/code\u003e\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003eglobal\n  log /dev/log  local0\n\tchroot /var/lib/haproxy\n\tuser haproxy\n\tgroup haproxy\n\tdaemon\n\n\t# Default SSL material locations\n\tca-base /etc/ssl/certs\n\tcrt-base /etc/ssl/private\n\n\t# See: https://ssl-config.mozilla.org/#server=haproxy\u0026amp;server-version=2.0.3\u0026amp;config=intermediate\n  ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384\n  ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256\n  ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets\n  nbproc  4\n  maxconn 16384\n\ndefaults\n    \tlog global\n        mode http\n    \toption httplog\n        timeout tunnel  1h\n        timeout client  5s\n        timeout server  60s\n        timeout connect 5s\n        timeout queue 5s\n\nfrontend tls\n  bind :443 accept-proxy ssl crt /etc/haproxy/certs ssl-min-ver TLSv1.2 \n\n  acl is_owncast hdr(host) -i \u0026lt;your.owncast.hostname.tld\u0026gt;\n  acl is_websocket hdr(Upgrade) -i WebSocket\n\n  use_backend owncast if is_owncast !is_websocket\n  # use a specific backend for websockets\n  use_backend owncastws if is_owncast is_websocket\n\nbackend owncast\n  mode http\n  http-request set-header X-Forwarded-Port %[dst_port]\n  http-request add-header X-Forwarded-Proto https if { ssl_fc }\n  option forwardfor\n  server server1 \u0026lt;owncast_ip_or_hostname\u0026gt;:\u0026lt;owncast_port\u0026gt; check\n\nbackend owncastws\n  mode http\n  http-request set-header X-Forwarded-Port %[dst_port]\n  http-request add-header X-Forwarded-Proto https if { ssl_fc }\n  option forwardfor\n  # added for websockets\n  option http-server-close\n  option forceclose\n  no option httpclose\n  server server1 \u0026lt;owncast_ip_or_hostname\u0026gt;:\u0026lt;owncast_port\u0026gt; check\n\u003c/code\u003e\u003c/pre\u003e"},{"title":"lighttpd","date_published":"0001-01-01T00:00:00Z","date_modified":"2022-11-17T00:53:07Z","id":"/docs/sslproxies/lighttpd/","url":"/docs/sslproxies/lighttpd/","content_html":"\u003cp\u003e\u003ca href=\"https://www.lighttpd.net/\"\u003elighttpd\u003c/a\u003e is a light HTTP server which can be configured as a suitable reverse proxy via the \u003ca href=\"https://redmine.lighttpd.net/projects/lighttpd/wiki/Mod_proxy\"\u003emod_proxy\u003c/a\u003e module.\u003c/p\u003e\n\u003ch2 id=\"ssl\"\u003eSSL\u003c/h2\u003e\n\u003cp\u003eAn implementation of \u003ca href=\"https://redmine.lighttpd.net/projects/lighttpd/wiki/Docs_SSL\"\u003eSSL support\u003c/a\u003e via the mod_openssl module using OpenSSL may appear as follows:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-lighttpd\" data-lang=\"lighttpd\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003e$SERVER\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;socket\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;[::]:443\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003essl.engine\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;enable\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003essl.cipher-list\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;HIGH\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003e$HTTP\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;host\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;owncast.yourdomain.com\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003essl.pemfile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;/etc/letsencrypt/live/yourdomain.com/fullchain.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003essl.privkey\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;/etc/letsencrypt/live/yourdomain.com/privkey.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003essl.dh-file\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;/etc/letsencrypt/ssl-dhparams.pem\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"reverse-proxy\"\u003eReverse Proxy\u003c/h2\u003e\n\u003cp\u003eProxying of incoming websocket connections is integrated with the module.\u003c/p\u003e\n\u003cp\u003eAn example configuration for lighttpd might appear as follows:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-lighttpd\" data-lang=\"lighttpd\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003e$HTTP\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;host\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;owncast.yourdomain.com\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eproxy.forwarded\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;host\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s2\"\u003e\u0026#34;proto\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s2\"\u003e\u0026#34;for\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s2\"\u003e\u0026#34;remote_user\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e# Required for websocket (chat) forwarding:\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003eproxy.header\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;upgrade\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;enable\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n"},{"title":"NGINX","date_published":"0001-01-01T00:00:00Z","date_modified":"2025-03-07T03:31:58+05:00","id":"/docs/sslproxies/nginx/","url":"/docs/sslproxies/nginx/","content_html":"\u003cp\u003eNGINX is a popular web server used as a reverse proxy with free Let\u0026rsquo;s Encrypt certificates. Visit the \u003ca href=\"https://www.nginx.com/blog/using-free-ssltls-certificates-from-lets-encrypt-with-nginx/\"\u003eofficial documentation\u003c/a\u003e for detailed instructions.\u003c/p\u003e\n\u003ch2 id=\"websockets\"\u003eWebsockets\u003c/h2\u003e\n\u003cp\u003ePeople often look over the need to tell NGINX to proxy websockets correctly, leading to chat being disabled. Please read the quick \u003ca href=\"https://nginx.org/en/docs/http/websocket.html\"\u003edocumentation by nginx around websocket support\u003c/a\u003e to make sure you\u0026rsquo;re doing it properly.\u003c/p\u003e\n\u003cp\u003eEssentially, you\u0026rsquo;ll need to edit \u003ccode\u003e/etc/nginx/nginx.conf\u003c/code\u003e to add the following map block to the http section\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003ehttp\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kn\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"s\"\u003emap\u003c/span\u003e \u003cspan class=\"nv\"\u003e$http_upgrade\u003c/span\u003e \u003cspan class=\"nv\"\u003e$connection_upgrade\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003edefault\u003c/span\u003e \u003cspan class=\"s\"\u003eupgrade\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003e\u0026#39;\u0026#39;\u003c/span\u003e      \u003cspan class=\"s\"\u003eclose\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kn\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"err\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/p\u003e\n\u003cp\u003eYou\u0026rsquo;ll end up with a configuration that looks somewhat like the following when you\u0026rsquo;re done setting up NGINX. The below should be added to \u003ccode\u003e/etc/nginx/sites-available/my.site.com.conf\u003c/code\u003e and enabled with \u003ccode\u003eln /etc/nginx/sites-available/my.site.com.conf /etc/nginx/sites-enabled/my.site.com.conf\u003c/code\u003e and tested with \u003ccode\u003esudo nginx -t\u003c/code\u003e, then restarted \u003ccode\u003esudo service nginx restart\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-nginx\" data-lang=\"nginx\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eserver\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003eserver_name\u003c/span\u003e \u003cspan class=\"s\"\u003eowncast.yourdomain.com\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003elisten\u003c/span\u003e \u003cspan class=\"mi\"\u003e443\u003c/span\u003e \u003cspan class=\"s\"\u003essl\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003essl_certificate\u003c/span\u003e \u003cspan class=\"s\"\u003e/etc/letsencrypt/live/yourdomain.com/fullchain.pem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003essl_certificate_key\u003c/span\u003e \u003cspan class=\"s\"\u003e/etc/letsencrypt/live/yourdomain.com/privkey.pem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003einclude\u003c/span\u003e \u003cspan class=\"s\"\u003e/etc/letsencrypt/options-ssl-nginx.conf\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003essl_dhparam\u003c/span\u003e \u003cspan class=\"s\"\u003e/etc/letsencrypt/ssl-dhparams.pem\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kn\"\u003elocation\u003c/span\u003e \u003cspan class=\"s\"\u003e/\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eHost\u003c/span\u003e \u003cspan class=\"nv\"\u003e$host\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eX-Forwarded-Host\u003c/span\u003e \u003cspan class=\"nv\"\u003e$host\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eX-Forwarded-Server\u003c/span\u003e \u003cspan class=\"nv\"\u003e$host\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eX-Forwarded-Proto\u003c/span\u003e \u003cspan class=\"nv\"\u003e$scheme\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eX-Real-IP\u003c/span\u003e \u003cspan class=\"nv\"\u003e$remote_addr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eX-Forwarded-For\u003c/span\u003e \u003cspan class=\"nv\"\u003e$proxy_add_x_forwarded_for\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_http_version\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"s\"\u003e.1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eUpgrade\u003c/span\u003e \u003cspan class=\"nv\"\u003e$http_upgrade\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e \u003cspan class=\"s\"\u003eConnection\u003c/span\u003e \u003cspan class=\"nv\"\u003e$connection_upgrade\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_set_header\u003c/span\u003e  \u003cspan class=\"s\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"nv\"\u003e$http_authorization\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_pass_header\u003c/span\u003e \u003cspan class=\"s\"\u003eAuthorization\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"kn\"\u003eproxy_pass\u003c/span\u003e \u003cspan class=\"s\"\u003ehttp://127.0.0.1:8080\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n"},{"title":"Apache","date_published":"0001-01-01T00:00:00Z","date_modified":"2025-04-03T01:51:45+02:00","id":"/docs/sslproxies/apache/","url":"/docs/sslproxies/apache/","content_html":"\u003cp\u003eIf you\u0026rsquo;re already using Apache as a web server you can \u003ca href=\"https://httpd.apache.org/docs/2.4/howto/reverse_proxy.html\"\u003econfigure it as a reverse proxy\u003c/a\u003e in front of your Owncast server to enable SSL.\nThe following configuration example requires Apache \u0026gt;= 2.4.47.\u003c/p\u003e\n\u003cp\u003eEnsure required Apache modules are enabled using the \u003ccode\u003ea2enmod\u003c/code\u003e command.\u003c/p\u003e\n\u003cpre tabindex=\"0\"\u003e\u003ccode\u003e$ sudo a2enmod proxy proxy_http ssl\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-ApacheConf\" data-lang=\"ApacheConf\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;VirtualHost\u003c/span\u003e \u003cspan class=\"s\"\u003e*:80\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eServerName\u003c/span\u003e live.example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eServerAdmin\u003c/span\u003e admin@example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eRedirect\u003c/span\u003e permanent / https://live.example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;/VirtualHost\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c\"\u003e# live-le-ssl.conf\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;IfModule\u003c/span\u003e \u003cspan class=\"s\"\u003emod_ssl.c\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;VirtualHost\u003c/span\u003e \u003cspan class=\"s\"\u003e*:443\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eServerName\u003c/span\u003e live.example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eServerAdmin\u003c/span\u003e admin@example.com\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eProxyRequests\u003c/span\u003e       \u003cspan class=\"k\"\u003eOff\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eProxyPreserveHost\u003c/span\u003e   \u003cspan class=\"k\"\u003eOn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eAllowEncodedSlashes\u003c/span\u003e NoDecode\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eProxyPass\u003c/span\u003e        / http://localhost:8080/ upgrade=websocket\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eProxyPassReverse\u003c/span\u003e / http://localhost:8080/\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eRequestHeader\u003c/span\u003e    set X-Forwarded-Proto \u003cspan class=\"s2\"\u003e\u0026#34;https\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eRequestHeader\u003c/span\u003e    set X-Forwarded-Port \u003cspan class=\"s2\"\u003e\u0026#34;443\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eSSLCertificateFile\u003c/span\u003e \u003cspan class=\"sx\"\u003e/path/to/fullchain.pem\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eSSLCertificateKeyFile\u003c/span\u003e \u003cspan class=\"sx\"\u003e/path/to/privkey.pem\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"nb\"\u003eInclude\u003c/span\u003e \u003cspan class=\"sx\"\u003e/etc/letsencrypt/options-ssl-apache.conf\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;/VirtualHost\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;/IfModule\u0026gt;\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n"}]}